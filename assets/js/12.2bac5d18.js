(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{828:function(t,a,s){t.exports=s.p+"assets/img/202112142227793.99b6f827.png"},829:function(t,a,s){t.exports=s.p+"assets/img/image-20211216214902553.d1c88135.png"},830:function(t,a,s){t.exports=s.p+"assets/img/image-20211218214957203.6c510aa4.png"},831:function(t,a,s){t.exports=s.p+"assets/img/image-20220126220723859.a618ae66.png"},832:function(t,a,s){t.exports=s.p+"assets/img/image-20220130161744226.5e54fd26.png"},833:function(t,a,s){t.exports=s.p+"assets/img/image-20220204221208361.1f027455.png"},834:function(t,a,s){t.exports=s.p+"assets/img/image-20220204123425989.efcd60a4.png"},910:function(t,a,s){"use strict";s.r(a);var n=s(17),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"nginxç®€ä»‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxç®€ä»‹"}},[t._v("#")]),t._v(" nginxç®€ä»‹")]),t._v(" "),n("h2",{attrs:{id:"èƒŒæ™¯ä»‹ç»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#èƒŒæ™¯ä»‹ç»"}},[t._v("#")]),t._v(" èƒŒæ™¯ä»‹ç»")]),t._v(" "),n("blockquote",[n("p",[t._v("é«˜æ€§èƒ½çš„ã€HTTPã€‘å’Œã€åå‘ä»£ç†ã€‘çš„ã€webæœåŠ¡å™¨ã€‘ï¼ŒåŒæ—¶æ˜¯ã€POP3ã€SMTPã€IMAPä»£ç†æœåŠ¡å™¨ã€‘ï¼Œä½¿ç”¨cè¯­è¨€ç¼–å†™çš„ï¼Œå¼€æº")])]),t._v(" "),n("h3",{attrs:{id:"åè¯è§£é‡Š"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åè¯è§£é‡Š"}},[t._v("#")]),t._v(" åè¯è§£é‡Š")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("webæœåŠ¡å™¨ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("ä¹Ÿå«==é¡µé¢æœåŠ¡å™¨==ï¼Œç»™ç”¨æˆ·æä¾›ç½‘ä¸Šä¿¡æ¯æµè§ˆæœåŠ¡")])])]),t._v(" "),n("li",[n("p",[t._v("HTTPï¼š")]),t._v(" "),n("ul",[n("li",[t._v("è¶…æ–‡æœ¬ä¼ è¾“åè®®çš„ç¼©å†™ï¼Œä»webæœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ è¾“åè®®ï¼Œå®¢æˆ·ç«¯æ˜¯ç»ˆç«¯ç”¨æˆ·ï¼ŒæœåŠ¡å™¨æ˜¯ç½‘ç«™")])])]),t._v(" "),n("li",[n("p",[t._v("POP3ã€SMTPã€IMAPï¼š")]),t._v(" "),n("ul",[n("li",[t._v("POP3ï¼ˆpost office protocolï¼‰ï¼šé‚®å±€åè®®çš„ç¬¬ä¸‰ä¸ªç‰ˆæœ¬")]),t._v(" "),n("li",[t._v("SMTPï¼ˆsimple mail transfer protocolï¼‰ï¼šç®€å•é‚®ä»¶ä¼ è¾“åè®®")]),t._v(" "),n("li",[t._v("IMAPï¼ˆInternet mail access protocolï¼‰ï¼šäº¤äº’å¼é‚®ä»¶å­˜å–åè®®")])])]),t._v(" "),n("li",[n("p",[t._v("åå‘ä»£ç†ï¼šnginxå¯ä»¥ä½œä¸º==ç”µå­é‚®ä»¶==ä»£ç†æœåŠ¡å™¨")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("æ­£å‘ä»£ç†ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112062117719.png",alt:"image-20211206211713665"}})])]),t._v(" "),n("li",[n("p",[t._v("åå‘ä»£ç†ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112062117309.png",alt:"image-20211206211717992"}})])])])])]),t._v(" "),n("h2",{attrs:{id:"å¸¸è§æœåŠ¡å™¨å¯¹æ¯”"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¸¸è§æœåŠ¡å™¨å¯¹æ¯”"}},[t._v("#")]),t._v(" å¸¸è§æœåŠ¡å™¨å¯¹æ¯”")]),t._v(" "),n("blockquote",[n("p",[t._v("==netcraft==å…¬å¸å®˜ç½‘æ¯æœˆå…¬å¸ƒè°ƒç ”æ•°æ®ï¼ˆweb server surveyï¼‰ï¼Œæˆä¸ºäººä»¬äº†è§£å…¨çƒç½‘ç«™æ•°é‡åŠæœåŠ¡å™¨ä»½é¢æƒ…å†µå¿…ä¸å¯å°‘ç½‘ç«™")])]),t._v(" "),n("p",[t._v("https://news.netcraft.com/")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112072003804.png",alt:"image-20211207200319533"}})]),t._v(" "),n("h3",{attrs:{id:"iis"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#iis"}},[t._v("#")]),t._v(" IIS")]),t._v(" "),n("blockquote",[n("p",[t._v("Internet information serviceså³äº’è”ç½‘ä¿¡æ¯æœåŠ¡ï¼Œç”±å¾®è½¯å…¬å¸æä¾›çš„åŸºäºWindowsç³»ç»Ÿçš„äº’è”ç½‘æœåŠ¡")])]),t._v(" "),n("ul",[n("li",[t._v("ç¼ºç‚¹ï¼š\n"),n("ul",[n("li",[t._v("æœåŠ¡å™¨çš„ç¨³å®šæ€§")]),t._v(" "),n("li",[t._v("æ€§èƒ½ä¸å¦‚unixæ“ä½œç³»ç»Ÿ")])])])]),t._v(" "),n("h3",{attrs:{id:"tomcat"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tomcat"}},[t._v("#")]),t._v(" tomcat")]),t._v(" "),n("blockquote",[n("p",[t._v("è¿è¡Œ==servletå’Œjsp==çš„webåº”ç”¨è½¯ä»¶ï¼Œå¼€æº")])]),t._v(" "),n("ul",[n("li",[t._v("ç¼ºç‚¹ï¼š\n"),n("ul",[n("li",[t._v("é‡é‡çº§")]),t._v(" "),n("li",[t._v("å¯¹é™æ€æ–‡ä»¶å’Œé«˜å¹¶å‘çš„å¤„ç†æ¯”è¾ƒå¼±")])])])]),t._v(" "),n("h3",{attrs:{id:"apache"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#apache"}},[t._v("#")]),t._v(" apache")]),t._v(" "),n("blockquote",[n("p",[t._v("ç¨³å®šã€å¼€æºã€‚è·¨å¹³å°ç­‰ï¼Œå‡ºç°æ—¶é—´å¤ªä¹…äº†")])]),t._v(" "),n("ul",[n("li",[t._v("ç¼ºç‚¹ï¼š\n"),n("ul",[n("li",[t._v("é‡é‡çº§ã€ä¸æ”¯æŒé«˜å¹¶å‘")]),t._v(" "),n("li",[t._v("æ¶ˆè€—å¤§é‡çš„CPUèµ„æº")])])])]),t._v(" "),n("h3",{attrs:{id:"lighttpd"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lighttpd"}},[t._v("#")]),t._v(" lighttpd")]),t._v(" "),n("blockquote",[n("p",[t._v("å¾·å›½å¼€æºçš„webæœåŠ¡å™¨è½¯ä»¶")])]),t._v(" "),n("ul",[n("li",[t._v("ä¼˜ç‚¹ï¼š\n"),n("ul",[n("li",[t._v("è½»é‡çº§ï¼Œé«˜æ€§èƒ½")]),t._v(" "),n("li",[t._v("æ¬§ç¾å¸¸ç”¨ï¼Œå›½å†…å¸¸ç”¨nginx")])])])]),t._v(" "),n("h3",{attrs:{id:"å…¶å®ƒçš„æœåŠ¡å™¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å…¶å®ƒçš„æœåŠ¡å™¨"}},[t._v("#")]),t._v(" å…¶å®ƒçš„æœåŠ¡å™¨")]),t._v(" "),n("blockquote",[n("p",[t._v("Google serversã€weblogicâ€¦â€¦")])]),t._v(" "),n("h3",{attrs:{id:"nginxçš„ä¼˜ç‚¹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxçš„ä¼˜ç‚¹"}},[t._v("#")]),t._v(" nginxçš„ä¼˜ç‚¹")]),t._v(" "),n("h4",{attrs:{id:"é€Ÿåº¦æ›´å¿«ã€å¹¶å‘æ›´é«˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é€Ÿåº¦æ›´å¿«ã€å¹¶å‘æ›´é«˜"}},[t._v("#")]),t._v(" é€Ÿåº¦æ›´å¿«ã€å¹¶å‘æ›´é«˜")]),t._v(" "),n("blockquote",[n("p",[t._v("é‡‡ç”¨äº†==å¤šè¿›ç¨‹å’ŒI/Oå¤šè·¯å¤ç”¨ï¼ˆepollï¼‰==çš„åº•å±‚å®ç°")])]),t._v(" "),n("h4",{attrs:{id:"é…ç½®ç®€å•-æ‰©å±•æ€§å¼º"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é…ç½®ç®€å•-æ‰©å±•æ€§å¼º"}},[t._v("#")]),t._v(" é…ç½®ç®€å•ï¼Œæ‰©å±•æ€§å¼º")]),t._v(" "),n("blockquote",[n("p",[t._v("å¾ˆå¤šæ¨¡å—ç»„æˆï¼Œå¯ä»¥ä½¿ç”¨==é…ç½®æ–‡ä»¶çš„é…ç½®æ¥æ·»åŠ æ¨¡å—==ï¼Œä¹Ÿå¯ä»¥è‡ªå·±==å®šåˆ¶æ¨¡å—==")])]),t._v(" "),n("h4",{attrs:{id:"é«˜å¯é æ€§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é«˜å¯é æ€§"}},[t._v("#")]),t._v(" é«˜å¯é æ€§")]),t._v(" "),n("blockquote",[n("p",[t._v("å¤šè¿›ç¨‹ï¼Œå…¶ä¸­æœ‰ä¸€ä¸ªmasterä¸»è¿›ç¨‹å’ŒNå¤šä¸ªworkerè¿›ç¨‹ï¼Œ==workerè¿›ç¨‹æ•°é‡å¯ä»¥æ‰‹åŠ¨è®¾ç½®==ï¼Œworkerç›¸äº’==ç‹¬ç«‹==")])]),t._v(" "),n("h4",{attrs:{id:"çƒ­éƒ¨ç½²"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#çƒ­éƒ¨ç½²"}},[t._v("#")]),t._v(" çƒ­éƒ¨ç½²")]),t._v(" "),n("blockquote",[n("p",[t._v("åœ¨==nginxä¸åœæ­¢==çš„æƒ…å†µä¸‹ï¼Œå¯¹nginxè¿›è¡Œæ–‡ä»¶å‡çº§ã€æ›´æ–°é…ç½®å’Œæ›´æ¢æ—¥å¿—æ–‡ä»¶ç­‰åŠŸèƒ½")])]),t._v(" "),n("h4",{attrs:{id:"æˆæœ¬ä½ã€bsdè®¸å¯è¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æˆæœ¬ä½ã€bsdè®¸å¯è¯"}},[t._v("#")]),t._v(" æˆæœ¬ä½ã€BSDè®¸å¯è¯")]),t._v(" "),n("blockquote",[n("p",[t._v("BSDæ˜¯ä¸€ä¸ªå¼€æºçš„è®¸å¯è¯ã€‚nginxä¸ä»…å¯ä»¥å…è´¹çš„åº”ç”¨åœ¨å•†ä¸šé¢†åŸŸï¼Œè¿˜å¯ä»¥åœ¨é¡¹ç›®ä¸­ç›´æ¥ä¿®æ”¹nginxçš„æºç ")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("æ¯”è¾ƒæµè¡Œçš„å¼€æºè®¸å¯è¯ï¼š")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("GPLã€BSDã€MITã€Mozillaã€Apacheã€LGPL")])]),t._v(" "),n("li",[n("p",[t._v("OpenRestry [Nginx+Lua]   Tengine[æ·˜å®]")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112072015644.png",alt:"image-20211207201540414"}})])])])])]),t._v(" "),n("h2",{attrs:{id:"nginxçš„åŠŸèƒ½ç‰¹æ€§åŠå¸¸ç”¨åŠŸèƒ½"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxçš„åŠŸèƒ½ç‰¹æ€§åŠå¸¸ç”¨åŠŸèƒ½"}},[t._v("#")]),t._v(" nginxçš„åŠŸèƒ½ç‰¹æ€§åŠå¸¸ç”¨åŠŸèƒ½")]),t._v(" "),n("h3",{attrs:{id:"åŸºæœ¬httpæœåŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŸºæœ¬httpæœåŠ¡"}},[t._v("#")]),t._v(" åŸºæœ¬HTTPæœåŠ¡")]),t._v(" "),n("p",[t._v("ä½œä¸ºHTTPä»£ç†æœåŠ¡å™¨å’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œæ”¯æŒé€šè¿‡==ç¼“å­˜åŠ é€Ÿè®¿é—®==ï¼Œå¯ä»¥å®Œæˆç®€å•çš„==è´Ÿè½½å‡è¡¡å’Œå®¹é”™==ï¼Œæ”¯æŒ==åŒ…è¿‡æ»¤ã€SSl==ç­‰")]),t._v(" "),n("ul",[n("li",[t._v("å¤„ç†é™æ€æ–‡ä»¶ã€ç´¢å¼•æ–‡ä»¶ä»¥åŠæ”¯æŒè‡ªåŠ¨ç´¢å¼•")]),t._v(" "),n("li",[t._v("æä¾›åå‘ä»£ç†æœåŠ¡å™¨ã€å¹¶å¯ä»¥ä½¿ç”¨ç¼“å­˜åŠ ä¸Šåå‘ä»£ç†ï¼ŒåŒæ—¶å®Œæˆè´Ÿè½½å‡è¡¡å’Œå®¹é”™")]),t._v(" "),n("li",[t._v("æä¾›å¯¹fastcglã€memcachedç­‰è®¿é—®çš„ç¼“å­˜æœºåˆ¶ï¼ŒåŒæ—¶å®Œæˆè´Ÿè½½å‡è¡¡å’Œå®¹é”™")]),t._v(" "),n("li",[t._v("æä¾›è¿‡æ»¤å™¨åŠŸèƒ½ï¼ŒåŸºæœ¬è¿‡æ»¤å™¨åŒ…æ‹¬gzipå‹ç¼©ã€rangesæ”¯æŒã€chunkedå“åº”ã€XSLTã€SSIä»¥åŠå›¾åƒç¼©æ”¾ç­‰")]),t._v(" "),n("li",[t._v("æ”¯æŒHTTPä¸‹çš„==å®‰å…¨å¥—æ¥å±‚å®‰å…¨åè®®SSL==")]),t._v(" "),n("li",[t._v("æ”¯æŒåŸºäºåŠ æƒå’Œä¾èµ–çš„ä¼˜å…ˆæƒçš„HTTP/2")])]),t._v(" "),n("h3",{attrs:{id:"é«˜çº§httpæœåŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é«˜çº§httpæœåŠ¡"}},[t._v("#")]),t._v(" é«˜çº§HTTPæœåŠ¡")]),t._v(" "),n("ul",[n("li",[t._v("æ”¯æŒåŸºäºåå­—å’ŒIPçš„è™šæ‹Ÿä¸»æœºè®¾ç½®")]),t._v(" "),n("li",[t._v("æ”¯æŒhttp/1.0ä¸­çš„keep-aliveæ¨¡å¼å’Œç®¡çº¿ï¼ˆPipeLinedï¼‰æ¨¡å‹è¿æ¥")]),t._v(" "),n("li",[t._v("è‡ªå®šä¹‰è®¿é—®æ—¥å¿—æ ¼å¼ã€å¸¦ç¼“å­˜çš„æ—¥å¿—å†™æ“ä½œä»¥åŠå¿«é€Ÿæ—¥å¿—è½®è½¬")]),t._v(" "),n("li",[t._v("æä¾›3xx-5xxé”™è¯¯ä»£ç é‡å®šå‘åŠŸèƒ½")]),t._v(" "),n("li",[t._v("æ”¯æŒé‡å†™ï¼ˆRewriteï¼‰æ¨¡å—æ‰©å±•")]),t._v(" "),n("li",[t._v("æ”¯æŒé‡å†™åŠ è½½é…ç½®ä»¥åŠåœ¨çº¿å‡çº§æ— éœ€ä¸­æ–­æ­£åœ¨å¤„ç†çš„è¯·æ±‚")]),t._v(" "),n("li",[t._v("æ”¯æŒç½‘ç»œç›‘æ§")]),t._v(" "),n("li",[t._v("æ”¯æŒFLVå’ŒMP4æµåª’ä½“ä¼ è¾“")])]),t._v(" "),n("h3",{attrs:{id:"é‚®ä»¶æœåŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é‚®ä»¶æœåŠ¡"}},[t._v("#")]),t._v(" é‚®ä»¶æœåŠ¡")]),t._v(" "),n("ul",[n("li",[t._v("æ”¯æŒIMPAã€POP3ä»£ç†æœåŠ¡åŠŸèƒ½")]),t._v(" "),n("li",[t._v("æ”¯æŒå†…éƒ¨SMTPä»£ç†æœåŠ¡åŠŸèƒ½")])]),t._v(" "),n("h3",{attrs:{id:"nginxå¸¸ç”¨çš„åŠŸèƒ½æ¨¡å—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxå¸¸ç”¨çš„åŠŸèƒ½æ¨¡å—"}},[t._v("#")]),t._v(" nginxå¸¸ç”¨çš„åŠŸèƒ½æ¨¡å—")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("é™æ€èµ„æºéƒ¨ç½²\nRewriteåœ°å€é‡å†™\n\tæ­£åˆ™è¡¨è¾¾å¼\nåå‘ä»£ç†\nè´Ÿè½½å‡è¡¡\n\tè½®è¯¢ã€åŠ æƒè½®è¯¢ã€ip_hashã€url_hashã€fair\nwebç¼“å­˜\nç¯å¢ƒéƒ¨ç½²\n\té«˜å¯ç”¨çš„ç¯å¢ƒ\nç”¨æˆ·è®¤è¯æ¨¡å—..\n")])])]),n("p",[t._v("nginxçš„æ ¸å¿ƒç»„æˆ")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("nginxäºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶\nnginx.confé…ç½®æ–‡ä»¶\nerror.logé”™è¯¯çš„æ—¥å¿—è®°å½•\naccess.ogè®¿é—®æ—¥å¿—è®°å½•\n")])])]),n("h1",{attrs:{id:"nginxç¯å¢ƒå‡†å¤‡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxç¯å¢ƒå‡†å¤‡"}},[t._v("#")]),t._v(" nginxç¯å¢ƒå‡†å¤‡")]),t._v(" "),n("h2",{attrs:{id:"nginxç‰ˆæœ¬ä»‹ç»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxç‰ˆæœ¬ä»‹ç»"}},[t._v("#")]),t._v(" nginxç‰ˆæœ¬ä»‹ç»")]),t._v(" "),n("p",[t._v("å®˜ç½‘ï¼šhttp://nginx.org/")]),t._v(" "),n("p",[t._v("å³è¾¹å¯¼èˆªæ ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("è¯­è¨€ï¼šè‹±æ–‡å’Œä¿„ç½—æ–¯")]),t._v(" "),n("li",[t._v("ä¸åŒå¹´ä»½æ›´æ–°è¯´æ˜")]),t._v(" "),n("li",[t._v("å…³äºnginxä»‹ç»")]),t._v(" "),n("li",[t._v("downloadï¼šä¸‹è½½ä¸åŒç‰ˆæœ¬é“¾æ¥")]),t._v(" "),n("li",[t._v("securityï¼šå’Œnginxå®‰å…¨ç›¸å…³çš„é—®é¢˜æè¿°")]),t._v(" "),n("li",[t._v("documentationï¼šå®˜æ–¹æ–‡æ¡£")]),t._v(" "),n("li",[t._v("==faqï¼šnginxçš„é—®ç­”==")]),t._v(" "),n("li",[t._v("booksï¼šnginxä¹¦ç±")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112081930691.png",alt:"image-20211208193032993"}})]),t._v(" "),n("p",[t._v("ä¸‹è½½é¡µé¢ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("mainline versionï¼šä¸»çº¿ç‰ˆæœ¬ï¼Œå³æœ€æ–°çš„")]),t._v(" "),n("li",[t._v("stable versionï¼šç¨³å®šç‰ˆæœ¬ï¼ŒåšwebæœåŠ¡å™¨é€šå¸¸è€ƒè™‘çš„")]),t._v(" "),n("li",[t._v("legacy versionï¼šæ—§ç‰ˆæœ¬")]),t._v(" "),n("li",[t._v("changesï¼šå¯¹åº”ç‰ˆæœ¬åŠŸèƒ½å˜æ›´æ—¥å¿—")]),t._v(" "),n("li",[t._v("nginxï¼šä¸€ç‚¹å°±ä¸‹è½½ï¼ŒLinuxç‰ˆæœ¬çš„ä¸‹è½½é“¾æ¥")]),t._v(" "),n("li",[t._v("pgpï¼šä¸€ç‚¹å°±ä¸‹è½½ï¼Œä½¿ç”¨PGPåŠ å¯†è‡ªç”±è½¯ä»¶GnuPGè®¡ç®—åçš„ç­¾åä¿¡æ¯")]),t._v(" "),n("li",[t._v("windowsï¼šWindowsç‰ˆæœ¬ä¸‹è½½é“¾æ¥\t"),n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112081939722.png",alt:"image-20211208193950598"}})])]),t._v(" "),n("h2",{attrs:{id:"è·å–nginxæºç "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è·å–nginxæºç "}},[t._v("#")]),t._v(" è·å–nginxæºç ")]),t._v(" "),n("p",[t._v("å®˜ç½‘ï¼šhttp://nginx.org/download/")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112081947134.png",alt:"image-20211208194727177"}})]),t._v(" "),n("h2",{attrs:{id:"å‡†å¤‡æœåŠ¡å™¨ç³»ç»Ÿ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å‡†å¤‡æœåŠ¡å™¨ç³»ç»Ÿ"}},[t._v("#")]),t._v(" å‡†å¤‡æœåŠ¡å™¨ç³»ç»Ÿ")]),t._v(" "),n("p",[t._v("ç¯å¢ƒï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("Vmware workStation\nCentos7\nMobaXterm(æˆ–è€…Xshellï¼ŒSecureCRT)\nç½‘ç»œ\n")])])]),n("ol",[n("li",[n("p",[t._v("ç¡®è®¤centosçš„å†…æ ¸ï¼Œ==centos7.6é»˜è®¤é«˜äºLinux2.6==ï¼Œ2.6ä»¥ä¸Šæ‰æ”¯æŒepollï¼Œå› ä¸ºnginxéœ€è¦è§£==å†³é«˜å¹¶å‘é—®é¢˜æ˜¯éœ€è¦epoll==")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("==uname -a==ï¼šæŸ¥çœ‹å½“å‰")])]),t._v(" "),n("li",[n("p",[t._v("==yum list kernel -q==ï¼šæŸ¥çœ‹å·²ç»å®‰è£…çš„å†…æ ¸ç‰ˆæœ¬")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112081953011.png",alt:"image-20211208195338513"}})])])])])])]),t._v(" "),n("li",[n("p",[t._v("ç¡®ä¿è”ç½‘ï¼šping baidu.com")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112081954654.png",alt:"image-20211208195425573"}})])]),t._v(" "),n("li",[n("p",[t._v("ç¡®ä¿å…³é—­é˜²ç«å¢™ï¼Œçœå»å­¦ä¹ é…ç½®çš„é—®é¢˜ï¼Œå¯ä»¥è‡ªå·±é…ç½®ç«¯å£å·ï¼Œè¿™æ ·å°±ä¸ä¼šè¢«é˜²ç«å¢™æ‹¦ä½")]),t._v(" "),n("ul",[n("li",[t._v("systemctl stop firewalldï¼šé‡å¯å¤±æ•ˆ")]),t._v(" "),n("li",[t._v("==systemctl disable firewalld==ï¼šæ°¸ä¹…å…³é—­")]),t._v(" "),n("li",[t._v("systemctl status firewalldï¼šæŸ¥çœ‹æœåŠ¡å™¨çŠ¶æ€")])])]),t._v(" "),n("li",[n("p",[t._v("åœç”¨selinuxï¼šæ°å‡ºå®‰å…¨å­ç³»ç»Ÿ")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("==sestatus==")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112081959081.png",alt:"image-20211208195908479"}})])]),t._v(" "),n("li",[n("p",[t._v("å¦‚æœä¸æ˜¯disabled")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("==vim /etc/selinux/config==")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112082000818.png",alt:"image-20211208200039591"}})])])])])])])]),t._v(" "),n("h2",{attrs:{id:"nginxå®‰è£…æ–¹å¼ä»‹ç»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxå®‰è£…æ–¹å¼ä»‹ç»"}},[t._v("#")]),t._v(" nginxå®‰è£…æ–¹å¼ä»‹ç»")]),t._v(" "),n("p",[t._v("ä¸¤ä¸ªæ–¹å¼")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("é€šè¿‡nginxæºç \n\tç®€å•å®‰è£…ï¼ˆ1ï¼‰\n\tå¤æ‚å®‰è£…ï¼ˆ2ï¼‰\né€šè¿‡yumå®‰è£…\n")])])]),n("h3",{attrs:{id:"æºç å®‰è£…æ¡ä»¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æºç å®‰è£…æ¡ä»¶"}},[t._v("#")]),t._v(" æºç å®‰è£…æ¡ä»¶")]),t._v(" "),n("blockquote",[n("p",[t._v("centos7.6å·²ç»å…¨éƒ¨å®‰è£…ï¼Œä¸éœ€è¦è‡ªå·±å®‰è£…")])]),t._v(" "),n("h4",{attrs:{id:"gccç¼–è¯‘å™¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gccç¼–è¯‘å™¨"}},[t._v("#")]),t._v(" GCCç¼–è¯‘å™¨")]),t._v(" "),n("blockquote",[n("p",[t._v("GCCæ˜¯ä¸€ä¸ªå¼€æºçš„==ç¼–è¯‘å™¨é›†åˆ==ï¼Œç”¨äºå¤„ç†å„ç§å„æ ·çš„è¯­è¨€ï¼Œå…¶ä¸­åŒ…æ‹¬Cè¯­è¨€")])]),t._v(" "),n("h4",{attrs:{id:"pcre"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pcre"}},[t._v("#")]),t._v(" PCRE")]),t._v(" "),n("blockquote",[n("p",[t._v("perl Compatible Regular Expressoinå…¼å®¹æ­£åˆ™è¡¨è¾¾å¼åº“ï¼Œå› ä¸ºnginxçš„Rewriteæ¨¡å—å’Œhttpç§‘å­¦æ¨¡å—ä¼šä½¿ç”¨åˆ°")])]),t._v(" "),n("h4",{attrs:{id:"zlib"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#zlib"}},[t._v("#")]),t._v(" zlib")]),t._v(" "),n("blockquote",[n("p",[t._v("å› ä¸ºnginxçš„éœ€è¦==gzipå‹ç¼©==ï¼Œæ‰€ä»¥éœ€è¦æå‰å®‰è£…zlib(åº“)å’Œzlib-devel(æºä»£ç )")])]),t._v(" "),n("h4",{attrs:{id:"openssl"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#openssl"}},[t._v("#")]),t._v(" OpenSSL")]),t._v(" "),n("blockquote",[n("p",[t._v("å®‰å…¨é€šä¿¡ï¼ŒSSLï¼šSecure Sockets Layer å®‰å…¨å¥—æ¥åè®®ï¼Œä¿è¯ä¸¤ä¸ªåº”ç”¨é—´é€šä¿¡çš„ä¿å¯†æ€§å’Œå¯é æ€§")])]),t._v(" "),n("p",[t._v("ä¸€è¡Œå‘½ä»¤å®‰è£…æ‰€æœ‰ï¼šyum install -y gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel")]),t._v(" "),n("h3",{attrs:{id:"æ–¹æ¡ˆä¸€-æºç ç®€å•å®‰è£…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆä¸€-æºç ç®€å•å®‰è£…"}},[t._v("#")]),t._v(" æ–¹æ¡ˆä¸€ï¼šæºç ç®€å•å®‰è£…")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("è¿›å…¥å®˜ç½‘æ‰¾åˆ°ä¸‹è½½ç‰ˆæœ¬çš„é“¾æ¥åœ°å€ï¼Œä½¿ç”¨wgetå‘½ä»¤ä¸‹è½½")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("wget http://nginx.org/download/nginx-1.16.1.tar.gz\n")])])])]),t._v(" "),n("li",[n("p",[t._v("åˆ›å»ºç›®å½•")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("mkdir -p nginx/coreï¼šåˆ›å»ºå¤šçº§\t\n")])])])]),t._v(" "),n("li",[n("p",[t._v("è§£å‹ç¼©")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("tar -zxf nginx-1.16.1.tar.gzï¼šä¸åŠ væ˜¯ä¸æ˜¾ç¤ºè§£å‹æ—¶çš„ä¿¡æ¯\n")])])])]),t._v(" "),n("li",[n("p",[t._v("æ‰¾åˆ°configureæ‰§è¡Œè„šæœ¬")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("./configure\n")])])])]),t._v(" "),n("li",[n("p",[t._v("ç¼–è¯‘å’Œå®‰è£…")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("make && make install\n")])])])])]),t._v(" "),n("h3",{attrs:{id:"æ–¹æ¡ˆäºŒ-yumå®‰è£…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆäºŒ-yumå®‰è£…"}},[t._v("#")]),t._v(" æ–¹æ¡ˆäºŒï¼šyumå®‰è£…")]),t._v(" "),n("blockquote",[n("p",[t._v("æºç å®‰è£…æ¯”è¾ƒç¹çï¼Œéœ€è¦å‡†å¤‡GCCã€PCREã€zlibã€OpenSSLç­‰ï¼Œè€Œyumä¸éœ€è¦")])]),t._v(" "),n("p",[t._v("å®˜ç½‘å®‰è£…ï¼šhttp://nginx.org/en/linux_packages.html#RHEL-CentOS")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("å®‰è£…yum-utils")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("sudo yum install yum-utils\n")])])])]),t._v(" "),n("li",[n("p",[t._v("æ·»åŠ yumæºæ–‡ä»¶")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("vim sudo yum install yum-utils\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("[nginx-stable]\nname=nginx stable repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=1\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n\n[nginx-mainline]\nname=nginx mainline repo\nbaseurl=http://nginx.org/packages/mainline/centos/$releasever/$basearch/\ngpgcheck=1\nenabled=0\ngpgkey=https://nginx.org/keys/nginx_signing.key\nmodule_hotfixes=true\n")])])])]),t._v(" "),n("li",[n("p",[t._v("ä½¿ç”¨yumå®‰è£…")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("yum install -y nginxï¼šåŠ â€”yæ˜¯é»˜è®¤è¾“å…¥yï¼Œå³ç¡®è®¤\n")])])])]),t._v(" "),n("li",[n("p",[t._v("æŸ¥çœ‹nginxçš„å®‰è£…ä½ç½®")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("whereis nginx\n")])])])])]),t._v(" "),n("h3",{attrs:{id:"æºç ç®€å•å®‰è£…å’Œyumå®‰è£…çš„å·®å¼‚"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æºç ç®€å•å®‰è£…å’Œyumå®‰è£…çš„å·®å¼‚"}},[t._v("#")]),t._v(" æºç ç®€å•å®‰è£…å’Œyumå®‰è£…çš„å·®å¼‚")]),t._v(" "),n("p",[n("code",[t._v("./nginx -V")]),t._v("ï¼Œå¼€æºæŸ¥çœ‹nginxç‰ˆæœ¬åŠç›¸å…³é…ç½®ä¿¡æ¯ï¼Œè¿™é‡Œçš„./nginxæ˜¯ç»å¯¹è·¯å¾„ï¼Œå®Œæ•´è·¯å¾„==/usr/local/nginx/sbin/nginx -V==")]),t._v(" "),n("p",[t._v("ç®€å•å®‰è£…ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112082045043.png",alt:"image-20211208204542962"}})]),t._v(" "),n("p",[t._v("yumå®‰è£…ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112082046991.png",alt:"image-20211208204605990"}})]),t._v(" "),n("h4",{attrs:{id:"è§£å‹nginxç›®å½•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è§£å‹nginxç›®å½•"}},[t._v("#")]),t._v(" è§£å‹nginxç›®å½•")]),t._v(" "),n("p",[t._v("è§£å‹åè¿˜æ²¡æœ‰Makefileã€objs")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112082051945.png",alt:"image-20211208205158683"}})]),t._v(" "),n("p",[t._v("å†…å®¹è§£é‡Šï¼š")]),t._v(" "),n("ol",[n("li",[t._v("autoï¼šå­˜æ”¾ç¼–è¯‘ç›¸å…³çš„è„šæœ¬")]),t._v(" "),n("li",[t._v("changesï¼šç‰ˆæœ¬å˜æ›´è®°å½•")]),t._v(" "),n("li",[t._v("changes.ruï¼šä¿„ç½—æ–¯ç‰ˆæœ¬å˜æ›´è®°å½•")]),t._v(" "),n("li",[t._v("==conf==ï¼šnginxé»˜è®¤çš„é…ç½®æ–‡ä»¶")]),t._v(" "),n("li",[t._v("==configure==ï¼šnginxçš„è‡ªåŠ¨è„šæœ¬ç¨‹åºï¼Œé‡è¦ï¼Œä½œç”¨å¦‚ä¸‹ï¼š\n"),n("ul",[n("li",[t._v("==æ£€æŸ¥ç¯å¢ƒåŠæ ¹æ®ç¯å¢ƒæ£€æŸ¥ç»“æ„ç”ŸæˆCä»£ç ==")]),t._v(" "),n("li",[t._v("==ç”Ÿæˆç¼–è¯‘ä»£ç éœ€è¦çš„Makefileæ–‡ä»¶==")])])]),t._v(" "),n("li",[t._v("==contrib==ï¼šå­˜æ”¾ç»“æ„ç‰¹æ®Šçš„è„šæœ¬æ–‡ä»¶ï¼Œå…¶ä¸­readmeå¯¹è„šæœ¬æœ‰è¯¦ç»†çš„è¯´æ˜")]),t._v(" "),n("li",[t._v("htmlï¼šnginxè‡ªå¸¦ä¸¤ä¸ªé¡µé¢ï¼Œé¦–é¡µå’Œé”™è¯¯é¡µé¢")]),t._v(" "),n("li",[t._v("licenseï¼šè®¸å¯è¯")]),t._v(" "),n("li",[t._v("manï¼šnginxçš„manæ‰‹å†Œ")]),t._v(" "),n("li",[t._v("srcï¼šæºä»£ç ")])]),t._v(" "),n("h3",{attrs:{id:"æ–¹æ¡ˆä¸‰-nginxçš„æºç å¤æ‚å®‰è£…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆä¸‰-nginxçš„æºç å¤æ‚å®‰è£…"}},[t._v("#")]),t._v(" æ–¹æ¡ˆä¸‰ï¼šNginxçš„æºç å¤æ‚å®‰è£…")]),t._v(" "),n("blockquote",[n("p",[t._v("å’Œç®€å•å®‰è£…ä¸åŒåœ¨ç¬¬ä¸€æ­¥ï¼Œæ‰‹åŠ¨æŒ‡å®š./configureçš„é…ç½®")])]),t._v(" "),n("ul",[n("li",[t._v("PATHï¼šå’Œè·¯å¾„ç›¸å…³çš„é…ç½®")]),t._v(" "),n("li",[t._v("==withï¼šå¯åŠ¨æ¨¡å—ï¼Œé»˜è®¤å…³é—­==")]),t._v(" "),n("li",[t._v("==withoutï¼šå…³é—­æ¨¡å—ï¼Œé»˜è®¤å¼€å¯==")])]),t._v(" "),n("p",[t._v("é…ç½®ï¼š")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("--prefix=PATH")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("æŒ‡å‘nginxçš„å®‰è£…ç›®å½•ï¼Œé»˜è®¤æ˜¯/usr/local/nginx\n")])])])]),t._v(" "),n("li",[n("p",[t._v("--sbin-path=PATH")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("æŒ‡å‘æ‰§è¡Œç¨‹åºæ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤/usr/local/nginx/sbin/nginx\n")])])])]),t._v(" "),n("li",[n("p",[t._v("--modules-path=PATH")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("åŠ¨æ€æ¨¡å—å®‰è£…ç›®å½•ï¼Œé»˜è®¤/usr/local/nginx/modules\n")])])])]),t._v(" "),n("li",[n("p",[t._v("--conf-path=PATH")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("æ‰§è¡Œé…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼Œé»˜è®¤/usr/local/nginx/conf/nginx.conf\n")])])]),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112082104546.png",alt:"image-20211208210404057"}})])]),t._v(" "),n("li",[n("p",[t._v("--error-log-path=PATH")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("é”™è¯¯æ—¥å¿—æ–‡ä»¶è·¯å¾„ï¼Œé»˜è®¤å€¼/usr/local/nginx/logs/error.log\n")])])])]),t._v(" "),n("li",[n("p",[t._v("--http-log-path=PATH")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("è®¿é—®æ—¥å¿—è·¯å¾„ï¼Œé»˜è®¤/usr/local/nginx/logs/access.log\n")])])])]),t._v(" "),n("li",[n("p",[t._v("--pid-path=PATH")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("nginxå¯åŠ¨åIDçš„è·¯å¾„ï¼Œé»˜è®¤/usr/local/nginx/logs/nginx.pid\n")])])])]),t._v(" "),n("li",[n("p",[t._v("--lock-path=PATH")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("nginxé”æ–‡ä»¶çš„è·¯å¾„ï¼Œé»˜è®¤/usr/local/nginx/logs/nginx.lock\n")])])])])]),t._v(" "),n("p",[t._v("ä½¿ç”¨ä»¥ä¸Šå‘½ä»¤")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("./configure --prefix=/usr/local/nginx \\\n--sbin-path=/usr/local/nginx/sbin/nginx \\\n--modules-path=/usr/local/nginx/modules \\\n--conf-path=/usr/local/nginx/conf/nginx.conf \\\n--error-log-path=/usr/local/nginx/logs/error.log \\\n--http-log-path=/usr/local/nginx/logs/access.log \\\n--pid-path=/usr/local/nginx/logs/nginx.pid \\\n--lock-path=/usr/local/nginx/logs/nginx.lock\n")])])]),n("p",[t._v("ç¼–è¯‘å’Œå®‰è£…")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("make && make install\n")])])]),n("h2",{attrs:{id:"å¸è½½nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¸è½½nginx"}},[t._v("#")]),t._v(" å¸è½½nginx")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("å…³é—­è¿›ç¨‹")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("./nginx -s stop\n")])])])]),t._v(" "),n("li",[n("p",[t._v("åˆ é™¤å®‰è£…çš„nginx")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("rm -rf /usr/local/nginx\n")])])])]),t._v(" "),n("li",[n("p",[t._v("ä¹‹å‰ç¼–è¯‘çš„ç¯å¢ƒæ¸…é™¤æ‰ï¼ˆæ³¨æ„ï¼šmakeå‘½ä»¤è¦åœ¨æœ‰Makefileçš„ç›®å½•ä¸­æ‰§è¡Œï¼‰")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("make clean\n")])])]),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112092007451.png",alt:"image-20211209200746888"}})])]),t._v(" "),n("li",[n("p",[t._v("å¦‚æœåœ¨è¿™æ­¤ä¹‹å‰å®‰è£…è¿‡å¤æ‚æºç å®‰è£…ï¼Œyumå®‰è£…ånginxç›®å½•å¯èƒ½ä¸åœ¨/usr/local/nginx")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("==find / -name nginx==")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112082130898.png",alt:"image-20211208213027143"}})])]),t._v(" "),n("li",[n("p",[t._v("æ‰¾åˆ°nginxç›®å½•æŠŠå®ƒç»™åˆ é™¤")])]),t._v(" "),n("li",[n("p",[t._v("ç„¶ååœ¨make cleanå°†ä¹‹å‰ç¼–è¯‘çš„ç¯å¢ƒæ¸…é™¤æ‰")])])])])]),t._v(" "),n("h2",{attrs:{id:"nginxç›®å½•ç»“æ„åˆ†æ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxç›®å½•ç»“æ„åˆ†æ"}},[t._v("#")]),t._v(" nginxç›®å½•ç»“æ„åˆ†æ")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112091549221.png",alt:"image-20211209154908119"}})]),t._v(" "),n("ul",[n("li",[t._v("confï¼šnginxæ‰€æœ‰é…ç½®æ–‡ä»¶ç›®å½•")]),t._v(" "),n("li",[t._v("CGIï¼ˆcommon gateway interfaceï¼‰é€šç”¨ç½‘å…³æ¥å£ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚å’Œæ•°æ®ï¼ŒæœåŠ¡ç«¯è°ƒç”¨cgiå¤„ç†ç›¸åº”ç»“æœç»™å®¢æˆ·ç«¯çš„ä¸€ç§==æ ‡å‡†è§„èŒƒ==")]),t._v(" "),n("li",[t._v("fastcgi.confï¼šç›¸å…³é…ç½®æ–‡ä»¶")]),t._v(" "),n("li",[t._v("fastcgi.conf.defaultï¼šå¯¹åº”çš„å¤‡ä»½")]),t._v(" "),n("li",[t._v("fastcgi_paramsï¼šå‚æ•°æ–‡ä»¶")]),t._v(" "),n("li",[t._v("scgi_paramsï¼šscgiçš„å‚æ•°æ–‡ä»¶")]),t._v(" "),n("li",[t._v("uwsgi_paramsï¼šuwsgiçš„å‚æ•°æ–‡ä»¶")]),t._v(" "),n("li",[t._v("mine.typesï¼šè®°å½•HTTPåè®®ä¸­çš„Content-Typeçš„==å€¼==å’Œ==æ–‡ä»¶åç¼€å==çš„å¯¹åº”å…³ç³»")]),t._v(" "),n("li",[t._v("==nginx.conf==ï¼š==æ ¸å¿ƒé…ç½®æ–‡ä»¶==ï¼Œéå¸¸é‡è¦ï¼Œå­¦ä¹ çš„é‡ç‚¹")]),t._v(" "),n("li",[t._v("koi-utfã€koi-winã€win-utfï¼šä¸ç¼–ç è½¬æ¢æ˜ å°„ç›¸å…³çš„é…ç½®æ–‡ä»¶ï¼Œä¸€ç§==ç¼–ç è½¬æ¢å¦ä¸€ç§ç¼–ç ==")]),t._v(" "),n("li",[t._v("htmlï¼šå­˜æ”¾ä¸¤ä¸ªé™æ€é¡µé¢\n"),n("ul",[n("li",[t._v("50x.htmlï¼šè®¿é—®å¤±è´¥")]),t._v(" "),n("li",[t._v("index.htmlï¼šè®¿é—®æˆåŠŸé¡µé¢")])])]),t._v(" "),n("li",[t._v("logsï¼šæœåŠ¡å™¨å¯åŠ¨åï¼Œè¿™é‡Œä¼šæœ‰==access.logã€error.logã€nginx.pid==ä¸‰ä¸ªæ–‡ä»¶")]),t._v(" "),n("li",[t._v("sbinï¼šå­˜æ”¾æ‰§è¡Œç¨‹åºnginxæ–‡ä»¶")])]),t._v(" "),n("h2",{attrs:{id:"nginxæœåŠ¡å™¨å¯åœå‘½ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxæœåŠ¡å™¨å¯åœå‘½ä»¤"}},[t._v("#")]),t._v(" nginxæœåŠ¡å™¨å¯åœå‘½ä»¤")]),t._v(" "),n("h3",{attrs:{id:"æ–¹å¼ä¸€-nginxæœåŠ¡çš„ä¿¡å·æ§åˆ¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹å¼ä¸€-nginxæœåŠ¡çš„ä¿¡å·æ§åˆ¶"}},[t._v("#")]),t._v(" æ–¹å¼ä¸€ï¼šNginxæœåŠ¡çš„ä¿¡å·æ§åˆ¶")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("==ps -ef | grep nginx==ï¼šæŸ¥çœ‹nginxè¿›ç¨‹å·")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112091838307.png",alt:"image-20211209183823884"}})])]),t._v(" "),n("li",[n("p",[t._v("å…³ç³»ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"E:%5CTypora_BI_JI%5Ctu-pian%5Cimage-20211209184041084.png",alt:"image-20211209184041084"}})])]),t._v(" "),n("li",[n("p",[t._v("æˆ‘ä»¬æ˜¯ç®¡ç†å‘˜ï¼Œåªéœ€ç»™masterè¿›ç¨‹å‘é€ä¿¡å·å°±å¯ä»¥æ§åˆ¶nginx")]),t._v(" "),n("ul",[n("li",[t._v("masterè¿›ç¨‹")]),t._v(" "),n("li",[t._v("ä¿¡å·")])])]),t._v(" "),n("li",[n("p",[t._v("ä¿¡å·")]),t._v(" "),n("ul",[n("li",[t._v("TERM/INTï¼šç«‹å³å…³é—­æœåŠ¡")]),t._v(" "),n("li",[t._v("QUITï¼šå…ˆæ‰§è¡Œå®Œå½“å‰ç„¶åå…³é—­å…¨éƒ¨æœåŠ¡")]),t._v(" "),n("li",[t._v("HUPï¼šé‡æ–°å¯åŠ¨workè¿›ç¨‹")]),t._v(" "),n("li",[t._v("USR1ï¼šé‡æ–°å¼€å¯æ—¥å¿—æ–‡ä»¶")]),t._v(" "),n("li",[t._v("USR2ï¼šå¹³æ»‘å‡çº§åˆ°æœ€æ–°ç‰ˆçš„nginx")]),t._v(" "),n("li",[t._v("WINCHï¼šå’Œquitå·®ä¸å¤šï¼ŒåŒºåˆ«åœ¨äºè¿™ä¸ªmasterè¿›ç¨‹ä¸ä¼šè¢«å…³é—­")])])]),t._v(" "),n("li",[n("p",[t._v("==kill -signal PID==")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("ç«‹å³å…³é—­")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("kill -TERM `cat /usr/local/nginx/logs/nginx.pid`\n")])])])]),t._v(" "),n("li",[n("p",[t._v("å…ˆæ‰§è¡Œå®Œå½“å‰ç„¶åå…³é—­å…¨éƒ¨æœåŠ¡")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("kill -quit 11044\n")])])])]),t._v(" "),n("li",[n("p",[t._v("é‡æ–°å¯åŠ¨workè¿›ç¨‹")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("kill -HUP 11044\n")])])])]),t._v(" "),n("li",[n("p",[t._v("é‡æ–°å¼€å¯æ—¥å¿—æ–‡ä»¶")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("//åˆ é™¤æ—¥å¿—æ–‡ä»¶\nrm -rf access.log error.log\n//æ¢å¤\nkill -usr1 11044\n")])])])]),t._v(" "),n("li",[n("p",[t._v("å¹³æ»‘å‡çº§åˆ°æœ€æ–°ç‰ˆçš„nginx")]),t._v(" "),n("div",{staticClass:"language-nginx extra-class"},[n("pre",{pre:!0,attrs:{class:"language-nginx"}},[n("code",[t._v("kill -usr2 11044\næ­¤æ—¶å‡ºç°ä¸¤ä¸ªmasterï¼Œæ—¥å¿—å¤šäº†nginx.pid.oldbin\n//å…³é—­æ—§çš„master\nkill -quit 11044\n")])])]),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112091932811.png",alt:"image-20211209193256555"}})])]),t._v(" "),n("li",[n("p",[t._v("å’Œquitå·®ä¸å¤šï¼ŒåŒºåˆ«åœ¨äºè¿™ä¸ªmasterè¿›ç¨‹ä¸ä¼šè¢«å…³é—­")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("kill -winch 11044\n")])])])])])])]),t._v(" "),n("h3",{attrs:{id:"æ–¹å¼äºŒ-nginxçš„å‘½ä»¤è¡Œæ§åˆ¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹å¼äºŒ-nginxçš„å‘½ä»¤è¡Œæ§åˆ¶"}},[t._v("#")]),t._v(" æ–¹å¼äºŒï¼šNginxçš„å‘½ä»¤è¡Œæ§åˆ¶")]),t._v(" "),n("blockquote",[n("p",[t._v("é€šè¿‡sbinä¸‹çš„nginxå®ç°å‘½ä»¤è¡Œæ§åˆ¶ï¼Œå…ˆ./nginx -hæŸ¥çœ‹æœ‰å“ªäº›å‚æ•°å¯ä»¥ç”¨")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112091921971.png",alt:"image-20211209192136967"}})]),t._v(" "),n("ol",[n("li",[t._v("-vï¼šæ‰“å°ç‰ˆæœ¬å·ä¿¡æ¯")]),t._v(" "),n("li",[t._v("-Vï¼šæ‰“å°ç‰ˆæœ¬å·å’Œé…ç½®ä¿¡æ¯")]),t._v(" "),n("li",[t._v("-tï¼šæµ‹è¯•nginxçš„é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®")]),t._v(" "),n("li",[t._v("-Tï¼šæµ‹è¯•nginxçš„é…ç½®æ–‡ä»¶æ˜¯å¦æ­£ç¡®å¹¶==åˆ—å‡ºé…ç½®æ–‡ä»¶ä¿¡æ¯==")]),t._v(" "),n("li",[t._v("==-qï¼šåªæ‰“å°é”™è¯¯ä¿¡æ¯==")]),t._v(" "),n("li",[t._v("-sï¼šä¿¡å·ï¼Œåé¢å¯ä»¥è·Ÿï¼š\n"),n("ul",[n("li",[t._v("stopã€å¿«é€Ÿå…³é—­ï¼Œç›¸å½“äºintã€‘")]),t._v(" "),n("li",[t._v("quitã€QUITã€‘")]),t._v(" "),n("li",[t._v("==reopen==ã€é‡å¯æ—¥å¿—æ–‡ä»¶ï¼Œç›¸å½“äº==usr1==ã€‘")]),t._v(" "),n("li",[t._v("==reload==ã€hupï¼Œå³==é‡æ–°åŠ è½½worker==ã€‘")])])]),t._v(" "),n("li",[t._v("-pï¼šæŒ‡å®šnginxçš„è·¯å¾„ï¼Œé»˜è®¤/usr/local/nginx")]),t._v(" "),n("li",[t._v("-cï¼šæŒ‡å®šnginxçš„é…ç½®æ–‡ä»¶è·¯å¾„ã€‚é»˜è®¤/usr/local/nginx/conf/nginx.conf")]),t._v(" "),n("li",[t._v("-gï¼šè¡¥å……å…¨å±€é…ç½®æ–‡ä»¶ï¼Œå¾ˆå°‘ç”¨ï¼Œå¯ä»¥åœ¨/usr/local/nginx/conf/nginx.confé…ç½®å°±è¡Œ")])]),t._v(" "),n("h2",{attrs:{id:"nginxæœåŠ¡å™¨ç‰ˆæœ¬å‡çº§å’Œæ–°å¢æ¨¡å—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxæœåŠ¡å™¨ç‰ˆæœ¬å‡çº§å’Œæ–°å¢æ¨¡å—"}},[t._v("#")]),t._v(" nginxæœåŠ¡å™¨ç‰ˆæœ¬å‡çº§å’Œæ–°å¢æ¨¡å—")]),t._v(" "),n("h3",{attrs:{id:"ç¯å¢ƒå‡†å¤‡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¯å¢ƒå‡†å¤‡"}},[t._v("#")]),t._v(" ç¯å¢ƒå‡†å¤‡")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("å‡†å¤‡è¦å®‰è£…çš„æ–°ç‰ˆæœ¬åŒ…")])]),t._v(" "),n("li",[n("p",[t._v("==å¯¹æ–°ç‰ˆæœ¬è¿›è¡Œå‚æ•°é…ç½®å’Œç¼–è¯‘ï¼Œä¸éœ€è¦å®‰è£…make install==")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("./configure\nmake\n")])])])])]),t._v(" "),n("h3",{attrs:{id:"æ–¹æ¡ˆä¸€-ä½¿ç”¨nginxæœåŠ¡ä¿¡å·è¿›è¡Œå‡çº§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆä¸€-ä½¿ç”¨nginxæœåŠ¡ä¿¡å·è¿›è¡Œå‡çº§"}},[t._v("#")]),t._v(" æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨nginxæœåŠ¡ä¿¡å·è¿›è¡Œå‡çº§")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("==å¯¹è€ç‰ˆæœ¬sbinä¸‹çš„nginxè¿›è¡Œå¤‡ä»½==")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /usr/local/nginx/sbin\n//æ”¹å\nmv nginx nginxOld\n")])])])]),t._v(" "),n("li",[n("p",[t._v("è¿›å…¥==æ–°ç‰ˆæœ¬çš„objs==ï¼Œ==æŠŠé‡Œé¢çš„nginxæ–‡ä»¶æ‹·è´åˆ°/usr/local/nginx/sbinç›®å½•ä¸‹==")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd ~/nginx/core/nginx-1.16.1/objs\ncp nginx /usr/local/nginx/sbin\n")])])])]),t._v(" "),n("li",[n("p",[t._v("ä½¿ç”¨usr2")]),t._v(" "),n("ul",[n("li",[t._v("==kill -usr2 è€ç‰ˆæœ¬å·çš„PID==")]),t._v(" "),n("li",[t._v("==kill -quit è€ç‰ˆæœ¬å·çš„PID==")])])]),t._v(" "),n("li",[n("p",[t._v("æ£€æŸ¥æ˜¯å¦æ›´æ–°æˆåŠŸ")]),t._v(" "),n("ul",[n("li",[t._v("==./nginx -v==")])])])]),t._v(" "),n("h3",{attrs:{id:"æ–¹æ¡ˆäºŒ-ä½¿ç”¨nginxå®‰è£…ç›®å½•çš„makeå‘½ä»¤å®Œæˆå‡çº§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹æ¡ˆäºŒ-ä½¿ç”¨nginxå®‰è£…ç›®å½•çš„makeå‘½ä»¤å®Œæˆå‡çº§"}},[t._v("#")]),t._v(" æ–¹æ¡ˆäºŒï¼šä½¿ç”¨nginxå®‰è£…ç›®å½•çš„makeå‘½ä»¤å®Œæˆå‡çº§")]),t._v(" "),n("p",[t._v("å‰ä¸¤æ­¥ä¸€æ ·ï¼Œç¬¬ä¸‰æ­¥æœ‰å˜åŒ–")]),t._v(" "),n("p",[t._v("==make upgradeï¼ˆä½¿ç”¨makeå‰æåœ¨æœ‰Makefileçš„ç›®å½•ï¼‰ï¼Œåº•å±‚å®ç°è¿˜æ˜¯è°ƒç”¨äº†usr2ã€quit==")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112092020558.png",alt:"image-20211209202016477"}})]),t._v(" "),n("h1",{attrs:{id:"nginxæ ¸å¿ƒé…ç½®æ–‡ä»¶ç»“æ„"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxæ ¸å¿ƒé…ç½®æ–‡ä»¶ç»“æ„"}},[t._v("#")]),t._v(" nginxæ ¸å¿ƒé…ç½®æ–‡ä»¶ç»“æ„")]),t._v(" "),n("blockquote",[n("p",[t._v("ç›®å½•ï¼š/usr/local/nginx/conf/nginx.conf")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("é™¤äº†æ³¨é‡Šï¼Œnginx.confçš„å†…å®¹ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("worker_processes  1;\n\nevents {\n    worker_connections  1024;\n}\n\nhttp {\n    include       mime.types;\n    default_type  application/octet-stream;\n    sendfile        on;\n    keepalive_timeout  65;\n\n    server {\n        listen       80;\n        server_name  localhost;\n        location / {\n            root   html;\n            index  index.html index.htm;\n        }\n        error_page   500 502 503 504  /50x.html;\n        location = /50x.html {\n            root   html;\n        }\n    }\n\n}\n")])])])]),t._v(" "),n("li",[n("p",[t._v("å…¨å±€å—ï¼šè®¾ç½®nginxæœåŠ¡å™¨==æ•´ä½“è¿è¡Œçš„é…ç½®æŒ‡ä»¤==")]),t._v(" "),n("ul",[n("li",[t._v("æŒ‡ä»¤å  æŒ‡ä»¤å€¼")])])]),t._v(" "),n("li",[n("p",[t._v("eventså—ï¼šè®¾ç½®æœåŠ¡å™¨ä¸ç”¨æˆ·çš„==ç½‘ç»œè¿æ¥==")])]),t._v(" "),n("li",[n("p",[t._v("httpå—ï¼š==ä»£ç†ã€ç¼“å­˜ã€æ—¥å¿—è®°å½•ã€ç¬¬ä¸‰æ–¹æ¨¡å—é…ç½®â€¦â€¦==")])])]),t._v(" "),n("p",[t._v("ğŸš…nginx.confé…ç½®æ–‡ä»¶é»˜è®¤æœ‰ä¸‰å¤§å—ï¼šå…¨å±€å—ã€eventså—ã€httpå—")]),t._v(" "),n("p",[t._v("ğŸ“§==http==å¯ä»¥è®¾ç½®==å¤šä¸ªserverå—==ï¼Œæ¯ä¸ª==serverå—==åˆå¯ä»¥é…ç½®==å¤šä¸ªlocationå—==")]),t._v(" "),n("h2",{attrs:{id:"å…¨å±€å—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å…¨å±€å—"}},[t._v("#")]),t._v(" å…¨å±€å—")]),t._v(" "),n("h3",{attrs:{id:"useræŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#useræŒ‡ä»¤"}},[t._v("#")]),t._v(" useræŒ‡ä»¤")]),t._v(" "),n("blockquote",[n("p",[t._v("é…ç½®workerè¿›ç¨‹çš„ç”¨æˆ·å’Œç”¨æˆ·ç»„")]),t._v(" "),n("p",[t._v("âœ”ï¸é»˜è®¤å€¼ï¼šnobody")]),t._v(" "),n("p",[t._v("âœ”ï¸ä½ç½®ï¼šå…¨å±€å—")])]),t._v(" "),n("ol",[n("li",[n("p",[t._v("user www;")])]),t._v(" "),n("li",[n("p",[t._v("==useradd www==")])]),t._v(" "),n("li",[n("p",[t._v("åˆ›å»º/root/html/index.htmlï¼Œå†…å®¹å¦‚ä¸‹ï¼š")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token doctype"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),n("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Welcome to nginx!"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token style"}},[n("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("body")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 35em"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("margin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 0 auto"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("font-family")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Tahoma"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Verdana"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Arial"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" sans-serif"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Welcome to nginx!"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required."),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("For online documentation and support please refer to\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://nginx.org/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("nginx.org"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("."),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("br")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\nCommercial support is available at\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("http://nginx.com/"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("nginx.com"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("."),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("em")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Thank you for using nginx."),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("em")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("em")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("I am WWW"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("em")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("ä¿®æ”¹nginx.conf")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("location / {\n\troot /root/html\n\tindex index.html index.htm\n}\n")])])])]),t._v(" "),n("li",[n("p",[t._v("å¯åŠ¨è®¿é—®å¤±è´¥ï¼š403")])]),t._v(" "),n("li",[n("p",[t._v("åŸå› ï¼šå½“å‰ç”¨æˆ·(www)æ²¡æœ‰è®¿é—®/root/htmlç›®å½•æƒé™")]),t._v(" "),n("ul",[n("li",[t._v("è¿™ä¸ªå¯ä»¥è‡ªå·±æµ‹è¯•ï¼Œå³==ç”¨è¦æµ‹è¯•çš„ç”¨æˆ·ç™»å½•ï¼Œç„¶åçœ‹èƒ½ä¸èƒ½è¿›å…¥æƒ³è¦çš„ç›®å½•==")])])]),t._v(" "),n("li",[n("p",[t._v("å°†æ–‡ä»¶åˆ›å»ºåˆ°/home/www/html/index.html")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("location / {\n\troot /home/www/html\n\tindex index.html index.htm\n}\n")])])])]),t._v(" "),n("li",[n("p",[t._v("è®¿é—®æˆåŠŸ")])])]),t._v(" "),n("p",[t._v(":happy:ä½¿ç”¨useræŒ‡ä»¤ï¼Œå¯¹äºç³»ç»Ÿçš„æƒé™è®¿é—®æ§åˆ¶çš„==æ›´åŠ ç²¾ç»†å’Œå®‰å…¨==")]),t._v(" "),n("h3",{attrs:{id:"work-process-æŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#work-process-æŒ‡ä»¤"}},[t._v("#")]),t._v(" work process æŒ‡ä»¤")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("==master_process==   on|off")]),t._v(" "),n("ul",[n("li",[t._v("é»˜è®¤å€¼ï¼šonï¼ˆå¼€å¯ï¼‰")]),t._v(" "),n("li",[t._v("ä½ç½®ï¼šå…¨å±€å—")]),t._v(" "),n("li",[t._v("ä½œç”¨ï¼šæ˜¯å¦==å¼€å¯workerè¿›ç¨‹==")])])]),t._v(" "),n("li",[n("p",[t._v("==worker_processes==")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("é»˜è®¤å€¼ï¼š1")])]),t._v(" "),n("li",[n("p",[t._v("ä½ç½®ï¼šå…¨å±€å—")])]),t._v(" "),n("li",[n("p",[t._v("ä½œç”¨ï¼šå¼€å¯==workerè¿›ç¨‹æ•°é‡==ï¼Œå°½é‡å’ŒCPUçš„å†…æ ¸æ•°ä¿å­˜ä¸€è‡´")])]),t._v(" "),n("li",[n("p",[t._v("è®¾ç½®ä¸º2ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹æ‰€ç¤ºï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112101658374.png",alt:"image-20211210165834580"}})])])])])]),t._v(" "),n("h3",{attrs:{id:"å…¶å®ƒæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å…¶å®ƒæŒ‡ä»¤"}},[t._v("#")]),t._v(" å…¶å®ƒæŒ‡ä»¤")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("==daemon== on|off")]),t._v(" "),n("ul",[n("li",[t._v("é»˜è®¤å€¼ï¼šon")]),t._v(" "),n("li",[t._v("å…¨å±€å—")]),t._v(" "),n("li",[t._v("ä½œç”¨ï¼šæ˜¯å¦==å®ˆæŠ¤è¿›ç¨‹==ï¼Œä¸å®ˆæŠ¤å¼€å¯nginxåï¼Œä¸èƒ½è¿›è¡Œä»»ä½•æ“ä½œï¼Œåªèƒ½ç­‰è¿›ç¨‹ç»“æŸï¼ˆå³ctrl+cé€€å‡ºè¿›ç¨‹ï¼‰")])])]),t._v(" "),n("li",[n("p",[t._v("pid file")]),t._v(" "),n("ul",[n("li",[t._v("é»˜è®¤å€¼ï¼š/usr/local/nginx/logs/nginx.pid")]),t._v(" "),n("li",[t._v("ä½ç½®ï¼šå…¨å±€å—")]),t._v(" "),n("li",[t._v("ä½œç”¨ï¼šmasterè¿›ç¨‹çš„è¿›ç¨‹å·IDå­˜å‚¨è·¯å¾„")])])]),t._v(" "),n("li",[n("p",[t._v("==error_log==")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("é»˜è®¤å€¼ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112101706026.png",alt:"image-20211210170617415"}})])]),t._v(" "),n("li",[n("p",[t._v("ä½ç½®ï¼šé™¤äº†eventéƒ½æœ‰")])]),t._v(" "),n("li",[n("p",[t._v("æ—¥å¿—çº§åˆ«ï¼šdebug|info|notice|warn|error|crit|alert|emerg|ï¼šè°ƒè¯•ã€ä¿¡æ¯ã€é€šçŸ¥ã€è­¦å‘Šã€é”™è¯¯ã€ä¸´ç•Œã€è­¦æŠ¥ã€ç´§æ€¥ï¼Œè¦åœ¨infoä¹‹ä¸Šï¼Œå‡å°‘ç£ç›˜I/Oæ¶ˆè€—")])])])]),t._v(" "),n("li",[n("p",[t._v("==include==ï¼šå¼•å…¥å…¶å®ƒé…ç½®æ–‡ä»¶ï¼Œä½¿nginxé…ç½®æ›´çµæ´»")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112101712728.png",alt:"image-20211210171241156"}})])])]),t._v(" "),n("h2",{attrs:{id:"eventså—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#eventså—"}},[t._v("#")]),t._v(" eventså—")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("==accept_mutex==ï¼šè®¾ç½®ç½‘ç»œè¿æ¥åºåˆ—åŒ–")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("é»˜è®¤å€¼ï¼šon")])]),t._v(" "),n("li",[n("p",[t._v("ä½ç½®ï¼ševents")])]),t._v(" "),n("li",[n("p",[t._v("å¼€å¯åï¼Œä¸€ä¸ªä¸€ä¸ªå”¤é†’æ¥æ”¶ï¼Œä¸å¼€å¯ä¼šäº‰å¤ºï¼Œä½†æœ€åè¿˜æ˜¯åªèƒ½ä¸€ä¸ªç‹—è·å¾—")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112101715893.png",alt:"image-20211210171426417"}})])])])]),t._v(" "),n("li",[n("p",[t._v("==multi_accept==ï¼šæ˜¯å¦å…è®¸==å¤šä¸ªç½‘ç»œè¿æ¥worker==")]),t._v(" "),n("ul",[n("li",[t._v("é»˜è®¤å€¼ï¼šoff")]),t._v(" "),n("li",[t._v("ä½ç½®ï¼ševents")])])]),t._v(" "),n("li",[n("p",[t._v("==worker_connections==ï¼šä¸€ä¸ªworkeræœ€å¤§è¿æ¥æ•°")]),t._v(" "),n("ul",[n("li",[t._v("é»˜è®¤å€¼ï¼š512")]),t._v(" "),n("li",[t._v("ä½ç½®ï¼ševents")])])]),t._v(" "),n("li",[n("p",[t._v("useï¼šé€‰æ‹©å“ªç§==äº‹ä»¶é©±åŠ¨==æ¥==å¤„ç†ç½‘ç»œæ¶ˆæ¯==")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("é»˜è®¤å€¼ï¼šæ“ä½œç³»ç»Ÿå®š")])]),t._v(" "),n("li",[n("p",[t._v("ä½ç½®ï¼ševents")])]),t._v(" "),n("li",[n("p",[t._v("å¯é€‰ï¼šselect/poll/epoll/kqueueç­‰")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112101722894.png",alt:"image-20211210172231629"}})])])])])]),t._v(" "),n("h3",{attrs:{id:"eventsæŒ‡ä»¤é…ç½®å®ä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#eventsæŒ‡ä»¤é…ç½®å®ä¾‹"}},[t._v("#")]),t._v(" eventsæŒ‡ä»¤é…ç½®å®ä¾‹")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("events "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è®¾ç½®ç½‘ç»œè¿æ¥åºåˆ—å·ï¼Œé»˜è®¤onï¼Œå³ä¸€ä¸ªä¸€ä¸ªå”¤é†’è¿æ¥")]),t._v("\n    accept_mutex on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é»˜è®¤offï¼Œè®¾ç½®è¿›ç¨‹æ˜¯å¦å¯ä»¥å¤šä¸ªç½‘ç»œè¿æ¥")]),t._v("\n    multi_accept on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#å•ä¸ªworkeræœ€å¤§è¿æ¥æ•°")]),t._v("\n    worker_connections  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è®¾ç½®å“ªç§äº‹ä»¶é©±åŠ¨æ¥å¤„ç†ç½‘ç»œä¿¡æ¯ï¼Œlinux2.6ä»¥ä¸Šæ‰æ”¯æŒepoll(å¤šè·¯å¤ç”¨)")]),t._v("\n    use epoll"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"httpå—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#httpå—"}},[t._v("#")]),t._v(" httpå—")]),t._v(" "),n("h3",{attrs:{id:"å®šä¹‰mime-type"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®šä¹‰mime-type"}},[t._v("#")]),t._v(" å®šä¹‰MIME-Type")]),t._v(" "),n("blockquote",[n("p",[t._v("MIME-Typeç½‘ç»œèµ„æºçš„åª’ä½“ç±»å‹")])]),t._v(" "),n("p",[t._v("âœ”ï¸include mine.typesç›¸å½“äºæŠŠmine.typesæ–‡ä»¶åŠ å…¥nginx.confçš„é…ç½®æ–‡ä»¶ä¸­")]),t._v(" "),n("p",[t._v("âœ”ï¸ä½ç½®ï¼šhttpã€serverã€location")]),t._v(" "),n("p",[t._v("âœ”ï¸ä¾‹ï¼šè¯·æ±‚æ–‡æœ¬æˆ–è€…jsonå­—ç¬¦ä¸²ï¼Œä½¿ç”¨å›ºå®šå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨nginxå¿«é€Ÿå®ç°ï¼Œå°±ä¸ç”¨ç¨‹åºå“åº”è¯·æ±‚")]),t._v(" "),n("ul",[n("li",[n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è‡ªå®šä¹‰æ™®é€šæ–‡æœ¬æ–‡ä»¶")]),t._v("\n      location /get_text "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#access_log   logs/text.log myFormat;")]),t._v("\n          default_type text/html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<h1>This is a nginx\'s text</h1>"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      location /get_json "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          default_type application/json"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'{name:\"luo\",age:18}'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),n("h3",{attrs:{id:"è‡ªå®šä¹‰æœåŠ¡æ—¥å¿—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è‡ªå®šä¹‰æœåŠ¡æ—¥å¿—"}},[t._v("#")]),t._v(" è‡ªå®šä¹‰æœåŠ¡æ—¥å¿—")]),t._v(" "),n("blockquote",[n("p",[t._v("å¯¹æ—¥å¿—çš„æ ¼å¼ã€å¤§å°ã€è¾“å‡ºç­‰è¿›è¡Œè‡ªå®šä¹‰ï¼Œéœ€è¦ä¸¤ä¸ªæŒ‡ä»¤")]),t._v(" "),n("ul",[n("li",[t._v("==access_log==")]),t._v(" "),n("li",[t._v("==log_format==")])])]),t._v(" "),n("ol",[n("li",[n("p",[t._v("access_logï¼šæˆåŠŸæ—¥å¿—è·¯å¾„")])]),t._v(" "),n("li",[n("p",[t._v("log_formatï¼šæ—¥å¿—è¾“å‡ºæ ¼å¼")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112101733957.png",alt:"image-20211210173348925"}})])])]),t._v(" "),n("h3",{attrs:{id:"å…¶å®ƒé…ç½®æŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å…¶å®ƒé…ç½®æŒ‡ä»¤"}},[t._v("#")]),t._v(" å…¶å®ƒé…ç½®æŒ‡ä»¤")]),t._v(" "),n("ol",[n("li",[t._v("==sendfile==ï¼šä¼ è¾“æ–‡ä»¶ï¼Œæé«˜å¤„ç†é™æ€èµ„æºçš„æ€§èƒ½\n"),n("ul",[n("li",[t._v("é»˜è®¤å€¼ï¼šoff")]),t._v(" "),n("li",[t._v("ä½ç½®ï¼šhttpã€serverã€location")])])]),t._v(" "),n("li",[t._v("==keepalive_timeout==ï¼šè®¾ç½®é•¿è¿æ¥çš„è¶…æ—¶æ—¶é—´\n"),n("ul",[n("li",[t._v("å³ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹")]),t._v(" "),n("li",[t._v("å¤„ç†å®Œä¸€ä¸ªè¯·æ±‚åä¿å­˜TCPè¿æ¥æ‰“å¼€çŠ¶æ€ï¼Œè‹¥æœ‰å…¶å®ƒè¯·æ±‚ï¼ŒæœåŠ¡ç«¯åˆ©ç”¨è¿™ä¸ªæœªè¢«å…³é—­çš„è¿æ¥ï¼Œä¸éœ€è¦åˆ›å»ºæ–°è¿æ¥")]),t._v(" "),n("li",[t._v("é»˜è®¤å€¼ï¼š75s")]),t._v(" "),n("li",[t._v("ä½ç½®ï¼šhttpã€serverã€location")])])]),t._v(" "),n("li",[t._v("==keepalive_requests==ï¼šè®¾ç½®ä¸€ä¸ªkeep-aliveè¿æ¥ä½¿ç”¨æ¬¡æ•°\n"),n("ul",[n("li",[t._v("é»˜è®¤å€¼ï¼š100")]),t._v(" "),n("li",[t._v("ä½ç½®ï¼šhttpã€serverã€location")])])])]),t._v(" "),n("h2",{attrs:{id:"serverå’Œlocationå—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#serverå’Œlocationå—"}},[t._v("#")]),t._v(" serverå’Œlocationå—")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112101740025.png",alt:"image-20211210174053086"}})]),t._v(" "),n("h1",{attrs:{id:"nginxè¿›é˜¶ç¯‡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxè¿›é˜¶ç¯‡"}},[t._v("#")]),t._v(" nginxè¿›é˜¶ç¯‡")]),t._v(" "),n("h2",{attrs:{id:"nginxæœåŠ¡å™¨åŸºç¡€é…ç½®å®ä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxæœåŠ¡å™¨åŸºç¡€é…ç½®å®ä¾‹"}},[t._v("#")]),t._v(" nginxæœåŠ¡å™¨åŸºç¡€é…ç½®å®ä¾‹")]),t._v(" "),n("p",[t._v(":happy:éœ€æ±‚ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("1ã€è®¿é—®192.168.200.129:8081/server1/location1ï¼šè¿”å›index_sr1_location1.html\n2ã€è®¿é—®192.168.200.129:8081/server2/location2ï¼šè¿”å›index_sr1_location2.html\n3ã€è®¿é—®192.168.200.129:8082/server1/location1ï¼šè¿”å›index_sr2_location1.html\n4ã€è®¿é—®192.168.200.129:8082/server2/location1ï¼šè¿”å›index_sr2_location2.html\n5ã€404è¿”å›è‡ªå®šä¹‰404é¡µé¢\n6ã€server1å’Œserver2é…ç½®åˆ†å¼€æ”¾\n7ã€server1å’Œserver2æ ¼å­æœ‰è®¿é—®æ—¥å¿—æ–‡ä»¶\n")])])]),n("p",[t._v(":happy:ç›®å½•å¦‚ä¸‹ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112112246532.png",alt:"image-20211211224611486"}})]),t._v(" "),n("ul",[n("li",[n("p",[t._v("nginx.confçš„é…ç½®")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#æ›´æ”¹ç”¨æˆ·")]),t._v("\nuser  www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è®¾ç½®workeræ•°é‡")]),t._v("\nworker_processes  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é»˜è®¤é”™è¯¯è·¯å¾„åœ¨logs/error.log")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#error_log  logs/error.log;")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é»˜è®¤masterPIDè·¯å¾„åœ¨logs/nginx.pid")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#pid        logs/nginx.pid;")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é»˜è®¤ä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼å¯åŠ¨")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#daemon on;")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ä»¥åè¿™ä¸ªç›´æ¥å¤åˆ¶")]),t._v("\nevents "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è®¾ç½®ç½‘ç»œè¿æ¥åºåˆ—åŒ–")]),t._v("\n    accept_mutex on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è®¾ç½®workeræ˜¯å¦å¯ä»¥åŒæ—¶è¿æ¥å¤šä¸ª")]),t._v("\n    multi_accept on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#åŒæ—¶è¿æ¥å¤šä¸ªä¸Šé™")]),t._v("\n    worker_connections  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#äº‹ä»¶é©±åŠ¨æ¨¡å‹")]),t._v("\n    use epoll"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nhttp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    include       mime.types"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ä½¿ç”¨default_typeä»£è¡¨application/octet-stream")]),t._v("\n    default_type  application/octet-stream"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ä½¿ç”¨sendfileä¼ è¾“")]),t._v("\n    sendfile        on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é…ç½®è¿æ¥è¶…æ—¶æ—¶é—´")]),t._v("\n    keepalive_timeout  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("65")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é…ç½®æ—¥å¿—æ ¼å¼")]),t._v("\n    log_format server1 "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'===>server1 access log'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    log_format server2 "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'===>server2 access log'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#å¼•å…¥è‡ªå®šä¹‰é…ç½®")]),t._v("\n    include /home/www/conf.d/*.conf"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("server1.conf")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ç›‘å¬çš„ç«¯å£")]),t._v("\n        listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8081")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ä¸»æœºå")]),t._v("\n        server_name localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#æˆåŠŸè®¿é—®åæ—¥å¿—è·¯å¾„ï¼ˆè¯•è¯•èƒ½ä¸èƒ½æ”¹è·¯å¾„/myweb/server1/logs/access.log,ç­”æ¡ˆä¸è¡Œ,å…¶å®æ¯ä¸ªlocationæœ€åéƒ½ç”¨äº†ç»å¯¹è·¯å¾„ï¼‰")]),t._v("\n        access_log /home/www/myweb/server1/logs/access.log server1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è®¾ç½®è®¿é—®çš„è·¯å¾„")]),t._v("\n        location /server1/location1 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                root /home/www/myweb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                index index_sr1_location1.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        location /server1/location2 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                root /home/www/myweb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                index index_sr1_location2.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é”™è¯¯æ—¥å¿—è·¯å¾„")]),t._v("\n        error_page "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(" /404.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" /404.html "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                root /home/www/myweb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#å¯ä»¥è¯•è¯•æŠŠè¿™ä¸ªåˆ äº†ï¼Œå› ä¸ºä¸Šé¢å†™äº†404.html(error_page),rootå¯ä»¥ä¸ç”¨å†™ï¼Œä½†aliaséœ€è¦")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#index 404.html;")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("server2.conf")]),t._v(" "),n("div",{staticClass:"language-shell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[t._v("server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ç›‘å¬çš„ç«¯å£")]),t._v("\n        listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8082")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ä¸»æœºå")]),t._v("\n        server_name localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#æˆåŠŸè®¿é—®åæ—¥å¿—è·¯å¾„ï¼ˆè¯•è¯•èƒ½ä¸èƒ½æ”¹è·¯å¾„/server2/logs/access.logï¼‰")]),t._v("\n        access_log /home/www/myweb/server2/logs/access.log server1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è®¾ç½®è®¿é—®çš„è·¯å¾„")]),t._v("\n        location /server2/location1 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                root /home/www/myweb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                index index_sr2_location1.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        location /server2/location2 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                root /home/www/myweb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                index index_sr2_location2.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é”™è¯¯æ—¥å¿—è·¯å¾„")]),t._v("\n        error_page "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(" /404.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" /404.html "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                root /home/www/myweb"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#å¯ä»¥è¯•è¯•æŠŠè¿™ä¸ªåˆ äº†ï¼Œå› ä¸ºä¸Šé¢å†™äº†404.html(error_page)")]),t._v("\n                index "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(".html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])])])]),t._v(" "),n("h2",{attrs:{id:"nginxæœåŠ¡æ“ä½œçš„é—®é¢˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxæœåŠ¡æ“ä½œçš„é—®é¢˜"}},[t._v("#")]),t._v(" nginxæœåŠ¡æ“ä½œçš„é—®é¢˜")]),t._v(" "),n("blockquote",[n("p",[t._v("å¦‚æœæƒ³å¯åŠ¨ã€å…³é—­æˆ–é‡æ–°åŠ è½½nginxï¼Œéœ€è¦è¿›å…¥å®ƒçš„é…ç½®æ–‡ä»¶ï¼Œæœ‰ç‚¹ç¹ç")])]),t._v(" "),n("p",[t._v("ä¼˜åŒ–ï¼š")]),t._v(" "),n("p",[t._v("â€‹\tâœ”ï¸é…ç½®ä¸ºç³»ç»ŸæœåŠ¡")]),t._v(" "),n("p",[t._v("â€‹\tâœ”ï¸å‘½ä»¤é…ç½®åˆ°ç³»ç»Ÿç¯å¢ƒ")]),t._v(" "),n("h2",{attrs:{id:"nginxé…ç½®æˆç³»ç»ŸæœåŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxé…ç½®æˆç³»ç»ŸæœåŠ¡"}},[t._v("#")]),t._v(" nginxé…ç½®æˆç³»ç»ŸæœåŠ¡")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("==vim /usr/lib/systemd/system/nginx.service==")])]),t._v(" "),n("li",[n("p",[t._v("æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š")]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[t._v("[Unit]\nDescription=nginx web service\nDocumentation="),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("http")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//nginx.org/en/docs/")]),t._v("\nAfter=network.target\n\n[Service]\nType=forking\nPIDFile=/usr/local/nginx/logs/nginx.pid\nExecStartPre=/usr/local/nginx/sbin/nginx -t -c /usr/local/nginx/conf/nginx.conf\nExecStart=/usr/local/nginx/sbin/nginx\nExecReload=/usr/local/nginx/sbin/nginx -s reload\nExecStop=/usr/local/nginx/sbin/nginx -s stop\nPrivateTmp="),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n\n[Install]\nWantedBy=default.target\n")])])])]),t._v(" "),n("li",[n("p",[t._v("ä¿®æ”¹æƒé™ï¼š==chmod 755  /usr/lib/systemd/system/nginx.service==")])]),t._v(" "),n("li",[n("p",[t._v("æ¥ä¸‹æ¥å¯ä»¥ä½¿ç”¨ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å¯åŠ¨ï¼šsystemctl start nginx")]),t._v(" "),n("li",[t._v("åœæ­¢ï¼šsystemctl stop nginx")]),t._v(" "),n("li",[t._v("é‡å¯ï¼šsystemctl restart nginx")]),t._v(" "),n("li",[t._v("é‡æ–°åŠ è½½ï¼šsystemctl reload nginx")]),t._v(" "),n("li",[t._v("çŠ¶æ€ï¼šsystemctl status nginx")])])])]),t._v(" "),n("h2",{attrs:{id:"nginxå‘½ä»¤é…ç½®åˆ°ç³»ç»Ÿç¯å¢ƒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxå‘½ä»¤é…ç½®åˆ°ç³»ç»Ÿç¯å¢ƒ"}},[t._v("#")]),t._v(" nginxå‘½ä»¤é…ç½®åˆ°ç³»ç»Ÿç¯å¢ƒ")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("vim /etc/profile")])]),t._v(" "),n("li",[n("p",[t._v("åœ¨æœ€åä¸€è¡ŒåŠ ï¼š==export PATH=$PATH:$JAVA_HOME/bin:/usr/local/nginx/sbin==")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112120952172.png",alt:"image-20211212095247984"}})])]),t._v(" "),n("li",[n("p",[t._v("ç”Ÿæ•ˆï¼š==source /etc/profile==")])]),t._v(" "),n("li",[n("p",[t._v("æ‰§è¡Œå‘½ä»¤ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("nginx -V")]),t._v(" "),n("li",[t._v("nginx -t")]),t._v(" "),n("li",[t._v("nginx -s reload")]),t._v(" "),n("li",[t._v("nginx -s stop")])])])]),t._v(" "),n("h2",{attrs:{id:"nginxé™æ€èµ„æºéƒ¨ç½²"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxé™æ€èµ„æºéƒ¨ç½²"}},[t._v("#")]),t._v(" nginxé™æ€èµ„æºéƒ¨ç½²")]),t._v(" "),n("h3",{attrs:{id:"nginxé™æ€èµ„æºæ¦‚è¿°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxé™æ€èµ„æºæ¦‚è¿°"}},[t._v("#")]),t._v(" nginxé™æ€èµ„æºæ¦‚è¿°")]),t._v(" "),n("p",[t._v("âœ”ï¸é™æ€èµ„æºï¼šæœåŠ¡ç«¯çœŸå®å­˜åœ¨ï¼Œèƒ½ç›´æ¥æ‹¿å‡ºæ¥ï¼Œä¾‹ï¼šhtmlã€cssã€jsã€å›¾ç‰‡ã€è§†é¢‘ç­‰")]),t._v(" "),n("p",[t._v("âœ”ï¸åŠ¨æ€èµ„æºï¼šæœåŠ¡ç«¯çœŸå®å­˜åœ¨ï¼Œä½†éœ€è¦ä¸šåŠ¡é€»è¾‘å¤„ç†æ‰èƒ½å–å‡ºæ¥ ï¼Œä¾‹æŠ¥è¡¨æ•°æ®ã€ç™»å½•ç”¨æˆ·ä¸åŒå±•ç¤ºä¸åŒæ•°æ®ç­‰")]),t._v(" "),n("p",[t._v(":happy:nginxå¤„ç†é™æ€å†…å®¹ï¼Œè€ƒè™‘å¦‚ä¸‹é—®é¢˜ï¼š")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("é™æ€èµ„æºçš„é…ç½®æŒ‡ä»¤\né™æ€èµ„æºçš„é…ç½®ä¼˜åŒ–\né™æ€èµ„æºçš„å‹ç¼©é…ç½®æŒ‡ä»¤\né™æ€èµ„æºçš„ç¼“å­˜å¤„ç†\né™æ€èµ„æºçš„è®¿é—®æ§åˆ¶ï¼ŒåŒ…æ‹¬è·¨åŸŸé—®é¢˜å’Œé˜²ç›—é“¾é—®é¢˜\n")])])]),n("h3",{attrs:{id:"nginxé™æ€èµ„æºçš„é…ç½®æŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxé™æ€èµ„æºçš„é…ç½®æŒ‡ä»¤"}},[t._v("#")]),t._v(" nginxé™æ€èµ„æºçš„é…ç½®æŒ‡ä»¤")]),t._v(" "),n("h4",{attrs:{id:"listenæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#listenæŒ‡ä»¤"}},[t._v("#")]),t._v(" listenæŒ‡ä»¤")]),t._v(" "),n("ul",[n("li",[t._v("listenï¼šé…ç½®ç›‘å¬ç«¯å£\n"),n("ul",[n("li",[t._v("é»˜è®¤å€¼ï¼š80")]),t._v(" "),n("li",[t._v("ä½ç½®ï¼šserver")]),t._v(" "),n("li",[t._v("ä¾‹ï¼š\n"),n("ul",[n("li",[t._v("listen 8080;            æŒ‡å®šç«¯å£")])])]),t._v(" "),n("li",[t._v("default_serverå±æ€§æ˜¯æ ‡è¯†ç¬¦ï¼Œé»˜è®¤ä¸»æœºï¼Œå¦‚æœ==ä¸æŒ‡å®šé»˜è®¤ï¼Œ==åˆ™==é»˜è®¤æ˜¯ç¬¬ä¸€ä¸ªserver==")]),t._v(" "),n("li",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112121014586.png",alt:"image-20211212101453776"}})])])])]),t._v(" "),n("h4",{attrs:{id:"server-nameæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#server-nameæŒ‡ä»¤"}},[t._v("#")]),t._v(" server_nameæŒ‡ä»¤")]),t._v(" "),n("ul",[n("li",[t._v("server_nameï¼šè®¾ç½®è™šæ‹Ÿä¸»æœºæœåŠ¡åç§°")]),t._v(" "),n("li",[t._v("ä¾‹ï¼š127.0.0.1ã€localhosã€åŸŸåã€www.baidu.comã€‘ã€www.jd.comã€‘")]),t._v(" "),n("li",[t._v("ä¸‰ç§é…ç½®ï¼š\n"),n("ul",[n("li",[t._v("ç²¾ç¡®åŒ¹é…")]),t._v(" "),n("li",[t._v("é€šé…ç¬¦åŒ¹é…")]),t._v(" "),n("li",[t._v("æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…")])])])]),t._v(" "),n("p",[t._v("âœ”ï¸ç²¾ç¡®åŒ¹é…")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("server {\n\tlisten 80;\n\tserver_name www.baidu.com  www.itcast.cn;\n\tâ€¦â€¦\n}\n")])])]),n("p",[t._v("ğŸ˜„è¡¥å……å°çŸ¥è¯†ç‚¹ï¼šhostsæ˜¯ä¸€ä¸ªæ²¡æœ‰æ‰©å±•åçš„ç³»ç»Ÿæ–‡ä»¶ï¼Œç™»å½•ç½‘å€æ—¶ï¼Œç³»ç»Ÿ==é¦–å…ˆä»hosts==æ–‡ä»¶ä¸­å¯»æ‰¾å¯¹åº”çš„IPåœ°å€ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œå†ä»==DNSåŸŸåè§£ææœåŠ¡å™¨è¿›è¡ŒIPåœ°å€è§£æ==")]),t._v(" "),n("ul",[n("li",[t._v("windowsï¼šC:\\Windows\\System32\\drivers\\etc")]),t._v(" "),n("li",[t._v("cenotsï¼š/etc/hosts")]),t._v(" "),n("li",[t._v("é…ç½®è™šæ‹ŸåŸŸåï¼š\n"),n("ol",[n("li",[t._v("==vim /etc/hosts==")]),t._v(" "),n("li",[t._v("127.0.0.1 www.baidu.com       127.0.0.1 www.itheima.com")])])])]),t._v(" "),n("p",[t._v("âœ”ï¸é€šé…ç¬¦åŒ¹é…")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("é€šé…ç¬¦ä¸èƒ½å‡ºç°åœ¨åŸŸåä¸­é—´ï¼Œåªèƒ½åœ¨é¦–æ®µæˆ–å°¾æ®µ")]),t._v(" "),n("div",{staticClass:"language-SPARQL extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sparql"}},[n("code",[t._v("server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é€šé…ç¬¦åœ¨å‰")]),t._v("\n    server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name *"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("baidu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        default_type text/plain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        return "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'wildcard_before_success'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é€šé…ç¬¦åœ¨å")]),t._v("\n    server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("baidu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        default_type text/plain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        return "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'wildcard_after_success'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),n("p",[t._v("âœ”ï¸æ­£åˆ™è¡¨è¾¾å¼é…ç½®")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("æ­£åˆ™è¡¨è¾¾å¼å¼€å§‹çš„æ ‡è®°~")])]),t._v(" "),n("li",[n("p",[t._v("å¸¸è§çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("^(å¸¸ç”¨)ï¼šå­—ç¬¦ä¸²å¼€å§‹")]),t._v(" "),n("li",[t._v("$(å¸¸ç”¨)ï¼šå­—ç¬¦ä¸²ç»“æŸ")]),t._v(" "),n("li",[t._v("(å¸¸ç”¨)ï¼šè½¬ä¹‰å­—ç¬¦")]),t._v(" "),n("li",[t._v("[xyz]ï¼šå­—ç¬¦é›†ï¼Œä¸å…¶ä¸­ä»»æ„ä¸€ä¸ªæŒ‡å®šå­—ç¬¦åŒ¹é…")]),t._v(" "),n("li",[t._v("[a-z]ï¼šå­—ç¬¦èŒƒå›´")]),t._v(" "),n("li",[t._v("\\w(å¸¸ç”¨)ï¼šA-Zã€a-zã€0-9å’Œä¸‹åˆ’çº¿_ ï¼Œç­‰æ•ˆäº[A-Za-z0-9_]")]),t._v(" "),n("li",[t._v("\\dï¼šæ•°å­—åŒ¹é…ï¼Œç­‰æ•ˆäº[0-9]")]),t._v(" "),n("li",[t._v("{n}ï¼šæ­£å¥½åŒ¹é…næ¬¡")]),t._v(" "),n("li",[t._v("{n,}ï¼šè‡³å°‘åŒ¹é…næ¬¡")]),t._v(" "),n("li",[t._v("{n,m}ï¼šè‡³å°‘næ¬¡ï¼Œè‡³å¤šmæ¬¡")]),t._v(" "),n("li",[t._v("*(å¸¸ç”¨)ï¼šé›¶æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰ä»·äº{0,}")]),t._v(" "),n("li",[t._v("+ï¼šä¸€æ¬¡æˆ–å¤šæ¬¡ï¼Œç­‰ä»·äº{1,}")]),t._v(" "),n("li",[t._v("?ï¼šé›¶æ¬¡æˆ–ä¸€æ¬¡ï¼Œç­‰ä»·äº{0,1}")])])]),t._v(" "),n("li",[n("p",[t._v("ä¾‹ï¼š")]),t._v(" "),n("div",{staticClass:"language-SPARQL extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sparql"}},[n("code",[t._v("\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#æ­£åˆ™è¡¨è¾¾å¼")]),t._v("\n    server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#\\.è½¬ä¹‰ï¼Œ\\w+ï¼Œè¾“å…¥ä¸€æ¬¡æˆ–å¤šæ¬¡")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#~^å¼€å§‹")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#$ç»“æŸ")]),t._v("\n        server_name ~^www\\"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\\w+"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\\"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        default_type text/plain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        return "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'regex_success'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),n("h5",{attrs:{id:"åŒ¹é…æ‰§è¡Œé¡ºåº"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŒ¹é…æ‰§è¡Œé¡ºåº"}},[t._v("#")]),t._v(" åŒ¹é…æ‰§è¡Œé¡ºåº")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("ä¸‰ç§åŒ¹é…éƒ½æœ‰ï¼Œå“ªä¸ªä¼˜å…ˆï¼Ÿ")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("  \t#server\n    #ç²¾ç¡®åŒ¹é…\n    server{\n        listen 80;\n        server_name www.baidu.com;\n        default_type text/plain;\n        return 200 'exact_success';\n    }\n    #é€šé…ç¬¦åœ¨å‰\n    server{\n        listen 80;\n        server_name *.baidu.com;\n        default_type text/plain;\n        return 200 'wildcard_before_success';\n    }\n    #é€šé…ç¬¦åœ¨å\n    server{\n        listen 80;\n        server_name www.baidu.*;\n        default_type text/plain;\n        return 200 'wildcard_after_success';\n    }\n    #æ­£åˆ™è¡¨è¾¾å¼\n    server{\n        listen 80;\n        server_name ~^www\\.(\\w+)\\.com$;\n        default_type text/plain;\n        return 200 'regex_success';\n    }\n    #é»˜è®¤\n    server{\n        listen 80 default_server;\n        server_name localhost;\n        default_type text/plain;\n        return 444 'default_server error';\n\t}\n")])])]),n("p",[t._v("ğŸ˜™ç»“è®º")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("exact_success\tç²¾ç¡®\nwildcard_before_success\t\té€šé…ç¬¦å‰\nwildcard_after_success\t\té€šé…ç¬¦å\nregex_success\t\tæ­£åˆ™è¡¨è¾¾å¼\ndefault_server not found server!!\té»˜è®¤\n")])])])])]),t._v(" "),n("h4",{attrs:{id:"locationæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#locationæŒ‡ä»¤"}},[t._v("#")]),t._v(" locationæŒ‡ä»¤")]),t._v(" "),n("ul",[n("li",[t._v("locationï¼šè®¾ç½®è¯·æ±‚çš„URL")]),t._v(" "),n("li",[t._v("å±æ€§ä»‹ç»ï¼š")])]),t._v(" "),n("p",[t._v("âœ”ï¸ä¸å¸¦ç¬¦å·")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('server {\n\tlisten 80;\n\tserver_name 127.0.0.1;\n\tlocation =/abc{\n\t\tdefault_type text/plain;\n\t\treturn 200 "access success";\n\t}\n}\nåªè¦åŠ äº†abcï¼Œåé¢ä»€ä¹ˆéƒ½å¯ä»¥åŠ \nhttp://192.168.164.129/abc\nhttp://192.168.164.129/abc?p1=TOM\nhttp://192.168.164.129/abc/\nhttp://192.168.164.129/abcdef\n')])])]),n("p",[t._v("âœ”ï¸å¸¦ç­‰å·=")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('server {\n\tlisten 80;\n\tserver_name 127.0.0.1;\n\tlocation =/abc{\n\t\tdefault_type text/plain;\n\t\treturn 200 "access success";\n\t}\n}\nå¯ä»¥è®¿é—®ï¼ˆç²¾ç¡®è®¿é—®ï¼Œ?ç›¸å½“äºä¼ å‚ä¸å½±å“ï¼‰\nhttp://192.168.164.129/abc\nhttp://192.168.164.129/abc?p1=TOM\nä¸å¯ä»¥\nhttp://192.168.164.129/abc/\nhttp://192.168.164.129/abcdef\n')])])]),n("p",[t._v("âœ”ï¸å¸¦æ­£åˆ™è¡¨è¾¾å¼ï¼Œä½¿ç”¨~(åŒºåˆ†å¤§å°å†™) æˆ– ~*(ä¸åŒºåˆ†å¤§å°å†™)")]),t._v(" "),n("div",{staticClass:"language-SPARQL extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sparql"}},[n("code",[t._v("server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tlisten "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tserver_name "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tlocation ~^/abc\\w$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tdefault_type text/plain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\treturn "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"access success"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tlisten "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tserver_name "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#/abcï¼šå³åœ°å€åé¢åŠ /abc")]),t._v("\n\tlocation ~*^/abc\\w$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tdefault_type text/plain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\treturn "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"access success"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("âœ”ï¸å¸¦ç¬¦å·^~(ä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼)ï¼Œè€Œ==æ­£åˆ™è¡¨è¾¾å¼æ˜¯ ~^==ï¼Œä½œç”¨æ˜¯å¦‚æœåŒ¹é…åˆ°äº†ï¼Œå°±ä¸ç»§ç»­æ‰¾åé¢server(åé¢å¯èƒ½æœ‰ç›¸åŒçš„URL)")]),t._v(" "),n("h4",{attrs:{id:"è®¾ç½®è¯·æ±‚èµ„æºçš„ç›®å½•root-alias"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è®¾ç½®è¯·æ±‚èµ„æºçš„ç›®å½•root-alias"}},[t._v("#")]),t._v(" è®¾ç½®è¯·æ±‚èµ„æºçš„ç›®å½•root/alias")]),t._v(" "),n("ul",[n("li",[t._v("rootï¼šè®¾ç½®è¯·æ±‚çš„æ ¹ç›®å½•")]),t._v(" "),n("li",[t._v("aliasï¼šæ›´æ”¹locationçš„URLï¼Œå³locationåé¢é…ç½®çš„æ— æ•ˆ")])]),t._v(" "),n("p",[t._v("âœ”ï¸root")]),t._v(" "),n("ul",[n("li",[t._v("é»˜è®¤å€¼ï¼šhtml")]),t._v(" "),n("li",[t._v("ä½ç½®ï¼šhttpã€serverã€location")])]),t._v(" "),n("p",[t._v("âœ”ï¸ä¸¤è€…åŒºåˆ«")]),t._v(" "),n("ol",[n("li",[t._v("rootå¤„ç†ç»“æœæ˜¯ï¼š==rootè·¯å¾„+locationè·¯å¾„==")]),t._v(" "),n("li",[t._v("aliaså¤„ç†ç»“æœæ˜¯ï¼š==aliasè·¯å¾„æ›¿æ¢locationè·¯å¾„==")])]),t._v(" "),n("h4",{attrs:{id:"indexæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#indexæŒ‡ä»¤"}},[t._v("#")]),t._v(" indexæŒ‡ä»¤")]),t._v(" "),n("ul",[n("li",[t._v("indexï¼šè®¾ç½®ç½‘ç«™é»˜è®¤é¦–é¡µ\n"),n("ul",[n("li",[t._v("é»˜è®¤å€¼ï¼šindex.htmlã€index.htmï¼Œä»å·¦å¾€å³æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸ºæ­¢")])])])]),t._v(" "),n("h4",{attrs:{id:"error-pageæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#error-pageæŒ‡ä»¤"}},[t._v("#")]),t._v(" error_pageæŒ‡ä»¤")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("error_pageï¼šè®¾ç½®ç½‘ç«™é”™è¯¯é¡µé¢")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("å¯ä»¥æŒ‡å®šå…·ä½“è·³è½¬åœ°å€ï¼šerroe_page 404 http://www.baidu.com")])]),t._v(" "),n("li",[n("p",[t._v("æŒ‡å®šé‡å®šå‘åœ°å€å’Œä½¿ç”¨=200æŠŠçŠ¶æ€ç æ”¹æ‰")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("    #è®¾ç½®é”™è¯¯åçŠ¶æ€ç æ”¹ä¸º200ï¼Œä½¿ç”¨=200å³å¯,/50x.htmlä½¿é‡å®šå‘\n    error_page 404 =200 /50x.html;\n    error_page   500 502 503 504  /50x.html;\n    location = /50x.html {\n    \troot   html;\n    }\n")])])])]),t._v(" "),n("li",[n("p",[t._v("ä½¿ç”¨locationçš„@å®Œæˆé”™è¯¯ä¿¡æ¯å±•ç¤ºï¼ˆç­‰åŒäºä½¿ç”¨é‡å®šå‘å±•ç¤ºé”™è¯¯ä¿¡æ¯ï¼‰")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("server{\n\terror_page 404 @jump_to_error;\n\tlocation @jump_to_error {\n\t\tdefault_type text/plain;\n\t\treturn 404 'Not Found Page...';\n\t}\n}\n")])])])])])])]),t._v(" "),n("h3",{attrs:{id:"é™æ€èµ„æºä¼˜åŒ–é…ç½®è¯­æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é™æ€èµ„æºä¼˜åŒ–é…ç½®è¯­æ³•"}},[t._v("#")]),t._v(" é™æ€èµ„æºä¼˜åŒ–é…ç½®è¯­æ³•")]),t._v(" "),n("p",[t._v(":happy:ä¸‰ä¸ªå±æ€§é…ç½®ä¼˜åŒ–ï¼šä¸€èˆ¬ä¸‰ä¸ªéƒ½ä¸€èµ·å¼€")]),t._v(" "),n("div",{staticClass:"language-SPARQL extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sparql"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ä¼ è¾“æ–¹å¼")]),t._v("\n    sendfile        on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ä¸æ¨é€ï¼Œå³å…ˆå­˜å‚¨")]),t._v("\n    tcp_nopush      on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#æ²¡æœ‰å»¶è¿Ÿï¼Œå³å®æ—¶æ¨é€")]),t._v("\n    tcp_nodelay     on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("âœ”ï¸sendfileï¼Œå¼€å¯é«˜æ•ˆçš„æ–‡ä»¶ä¼ è¾“æ¨¡å¼")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112121113110.png",alt:"image-20211212111335833"}})]),t._v(" "),n("p",[t._v("âœ”ï¸==tcp_nopush==ï¼šå¿…é¡»åœ¨==sendfile==æ‰“å¼€çŠ¶æ€ä¸‹æ‰ç”Ÿæ•ˆï¼Œæé«˜ä¼ è¾“æ•ˆç‡")]),t._v(" "),n("p",[t._v("âœ”ï¸==tcp_nodelay==ï¼šå¿…é¡»åœ¨==keep-alive==å¼€å¯ä¸‹æ‰ç”Ÿæ•ˆï¼Œæé«˜ç½‘ç»œåŒ…ä¼ è¾“çš„å®æ—¶æ€§")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112121115350.png",alt:"image-20211212111529259"}})]),t._v(" "),n("h3",{attrs:{id:"nginxé™æ€èµ„æºå‹ç¼©å®æˆ˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxé™æ€èµ„æºå‹ç¼©å®æˆ˜"}},[t._v("#")]),t._v(" nginxé™æ€èµ„æºå‹ç¼©å®æˆ˜")]),t._v(" "),n("p",[t._v("nginxé€šè¿‡å¦‚ä¸‹æ¨¡å—å¯¹å‹ç¼©æŒ‡ä»¤è¿›è¡Œè§£æå’Œå¤„ç†")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("ngx_http_gzip_moduleæ¨¡å—\nngx_http_gzip_static_moduleæ¨¡å—\nngx_http_gunzip_moduleæ¨¡å—\n")])])]),n("p",[t._v("å­¦ä¹ å†…å®¹å¦‚ä¸‹ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("Gzipå„æ¨¡å—æ”¯æŒçš„é…ç½®æŒ‡ä»¤")]),t._v(" "),n("li",[t._v("Gzipå‹ç¼©åŠŸèƒ½çš„é…ç½®")]),t._v(" "),n("li",[t._v("Gzipå’Œsendfileçš„å†²çªè§£å†³")]),t._v(" "),n("li",[t._v("æµè§ˆå™¨ä¸æ”¯æŒGzipçš„è§£å†³æ–¹æ¡ˆ")])]),t._v(" "),n("h4",{attrs:{id:"gzipæ¨¡å—é…ç½®æŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzipæ¨¡å—é…ç½®æŒ‡ä»¤"}},[t._v("#")]),t._v(" Gzipæ¨¡å—é…ç½®æŒ‡ä»¤")]),t._v(" "),n("blockquote",[n("p",[t._v("æ¥ä¸‹æ¥æŒ‡ä»¤æ¥è‡ªngx_http_gzip_moduleæ¨¡å—")])]),t._v(" "),n("ol",[n("li",[n("p",[t._v("gzipæŒ‡ä»¤ï¼šå¼€å¯æˆ–å…³é—­gzipåŠŸèƒ½")])]),t._v(" "),n("li",[n("p",[t._v("==gzip_types==ï¼šæ ¹æ®å“åº”é¡µçš„MIMEç±»å‹é€‰æ‹©æ€§å¼€å¯Gzipå‹ç¼©åŠŸèƒ½")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("    #é€‰æ‹©æ€§å¼€å¯gzipå‹ç¼©\n    gzip_types application/javascript;\n")])])])]),t._v(" "),n("li",[n("p",[t._v("==gzip_comp_level==ï¼šè®¾ç½®å‹ç¼©ç¨‹åº¦ï¼Œ1-9ï¼Œ1å‹ç¼©ç¨‹åº¦ä½ï¼Œä½†æ•ˆç‡é«˜ï¼Œæ—¶é—´å°‘ï¼Œè€Œ9ç›¸å")])]),t._v(" "),n("li",[n("p",[t._v("==gzip_vary==ï¼šå‘Šè¯‰æ¥æ”¶æ–¹æ‰€å‘é€çš„æ•°æ®ç»è¿‡Gzipå‹ç¼©å¤„ç†")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112121128138.png",alt:"image-20211212112810166"}})])]),t._v(" "),n("li",[n("p",[t._v("==gzip_buffers==ï¼šå¤„ç†è¯·æ±‚å‹ç¼©çš„ç¼“å†²åŒºæ•°é‡å’Œå¤§å°ï¼Œå’ŒæœåŠ¡å™¨çš„æ“ä½œç³»ç»Ÿæœ‰å…³ï¼Œä½¿ç”¨é»˜è®¤å€¼å³å¯")])]),t._v(" "),n("li",[n("p",[t._v("==gzip_disable==ï¼šé’ˆå¯¹å®¢æˆ·ç«¯ç§ç±»å‘èµ·çš„è¯·æ±‚ï¼Œé€‰æ‹©æ€§å¼€å¯å’Œå…³é—­GzipåŠŸèƒ½")]),t._v(" "),n("ul",[n("li",[t._v('gzip_disable "~^Mozilla/5.0.*$";')])])]),t._v(" "),n("li",[n("p",[t._v("==gzip_http_version==ï¼šé’ˆå¯¹ä¸åŒçš„HTTPåè®®ç‰ˆæœ¬ï¼Œé€‰æ‹©æ€§å¼€å¯å’Œå…³é—­GzipåŠŸèƒ½ï¼Œé»˜è®¤å³å¯")])]),t._v(" "),n("li",[n("p",[t._v("==gzip_min_length==ï¼šå¯¹ä¼ è¾“æ•°æ®å¤§å°åšè¦æ±‚ï¼Œä¸èƒ½å°äºæŒ‡å®šçš„")]),t._v(" "),n("ul",[n("li",[t._v("gzip_min_length 252874;")])])]),t._v(" "),n("li",[n("p",[t._v("==gzip_proxied==ï¼šæ˜¯å¦å¯¹==æœåŠ¡å™¨è¿”å›çš„ç»“æœ==è¿›è¡ŒGzipå‹ç¼©ï¼Œåå‘ä»£ç†æ–¹é¢çš„")]),t._v(" "),n("ul",[n("li",[t._v("offï¼šå…³é—­")]),t._v(" "),n("li",[t._v('expiredï¼šheaderå¤´ä¸­åŒ…å«"Expires"ï¼Œå¯ç”¨å‹ç¼©')]),t._v(" "),n("li",[t._v('no-cacheï¼šheaderå¤´ä¸­åŒ…å«"Cache-Control:no-cache"ï¼Œå¯ç”¨å‹ç¼©')]),t._v(" "),n("li",[t._v('no-storeï¼šheaderå¤´ä¸­åŒ…å«"Cache-Control:no-store"ï¼Œå¯ç”¨å‹ç¼©')]),t._v(" "),n("li",[t._v('privateï¼šheaderå¤´ä¸­åŒ…å«"Cache-Control:private"ï¼Œå¯ç”¨å‹ç¼©')]),t._v(" "),n("li",[t._v('no_last_modifiedï¼šheaderå¤´ä¸­ä¸åŒ…å«"Last-Modified"ï¼Œå¯ç”¨å‹ç¼©')]),t._v(" "),n("li",[t._v('no_etagï¼šheaderå¤´ä¸­ä¸åŒ…å«"ETag"ï¼Œå¯ç”¨å‹ç¼©')]),t._v(" "),n("li",[t._v('authï¼šheaderå¤´ä¸­åŒ…å«"Authorization"ï¼Œå¯ç”¨å‹ç¼©')]),t._v(" "),n("li",[t._v("anyï¼šæ— æ¡ä»¶å¯ç”¨å‹ç¼©")])])])]),t._v(" "),n("h4",{attrs:{id:"gzipå‹ç¼©åŠŸèƒ½çš„å®ä¾‹åŒ¹é…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzipå‹ç¼©åŠŸèƒ½çš„å®ä¾‹åŒ¹é…"}},[t._v("#")]),t._v(" Gzipå‹ç¼©åŠŸèƒ½çš„å®ä¾‹åŒ¹é…")]),t._v(" "),n("blockquote",[n("p",[t._v("å¾ˆå¤šåœ°æ–¹å¯èƒ½ç”¨åˆ°è¯¥æŒ‡ä»¤ï¼ŒæŠ½å–åˆ°ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ï¼Œä½¿ç”¨çš„æ—¶å€™ä½¿ç”¨includeæŒ‡ä»¤")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('  \t#æ˜¯å¦å¼€å¯gzipå‹ç¼©\n    gzip on;\n    #é€‰æ‹©æ€§å¼€å¯gzipå‹ç¼©\n    gzip_types application/javascript;\n    #å‹ç¼©çš„ç¨‹åº¦ï¼Œ1~9ï¼Œ9å‹ç¼©ç¨‹åº¦é«˜ï¼Œä½†è´¹æ—¶é—´ï¼Œå½±å“æ•ˆç‡\n    gzip_comp_level 6;\n    #å‘Šè¯‰æ¥æ”¶æ–¹ï¼Œè‡ªå·±ä½¿ç”¨äº†gzipå‹ç¼©\n    gzip_vary   on;\n    #é’ˆå¯¹ä¸åŒç§ç±»å®¢æˆ·ç«¯å¼€å¯gzipï¼Œä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼\n    gzip_disable "MSIE [1-6]\\."; #å¯¹IE6ä»¥ä¸‹çš„ç‰ˆæœ¬éƒ½ä¸è¿›è¡Œå‹ç¼©\n    #è®¾ç½®æœ€å°å‹ç¼©å¤§å°\n    gzip_min_length 252874;\n    gzip_buffers 4 16K;\t  #ç¼“å­˜ç©ºé—´å¤§å°\n    gzip_http_version 1.1; #æŒ‡å®šå‹ç¼©å“åº”æ‰€éœ€è¦çš„æœ€ä½HTTPè¯·æ±‚ç‰ˆæœ¬\n    gzip_proxied  off; #nginxä½œä¸ºåå‘ä»£ç†å‹ç¼©æœåŠ¡ç«¯è¿”å›æ•°æ®çš„æ¡ä»¶\n')])])]),n("h4",{attrs:{id:"gzipå’Œsendfileå…±å­˜é—®é¢˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzipå’Œsendfileå…±å­˜é—®é¢˜"}},[t._v("#")]),t._v(" Gzipå’Œsendfileå…±å­˜é—®é¢˜")]),t._v(" "),n("blockquote",[n("p",[t._v("sendfileä¸ç»è¿‡ç”¨æˆ·è¿›ç¨‹ï¼Œä½†æ˜¯Gzipéœ€è¦ç»è¿‡ç”¨æˆ·è¿›ç¨‹")]),t._v(" "),n("p",[t._v("è§£å†³æ–¹æ³•ï¼šä½¿ç”¨==ngx_gzip_static_module==æ¨¡å—çš„==gzip_static==æŒ‡ä»¤è§£å†³")])]),t._v(" "),n("h5",{attrs:{id:"gzip-staticæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzip-staticæŒ‡ä»¤"}},[t._v("#")]),t._v(" gzip_staticæŒ‡ä»¤")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("gzip_staticï¼šæ£€æŸ¥ä¸==è®¿é—®èµ„æºåŒåçš„.gzæ–‡ä»¶==")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("é»˜è®¤å€¼ï¼šoffï¼Œå¯é€‰onã€always")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112121625009.png",alt:"image-20211210220035393"}})])]),t._v(" "),n("li",[n("p",[t._v("æ·»åŠ ä¸Šè¿°å‘½ä»¤åæŠ¥é”™ï¼Œæ‰¾ä¸åˆ°gzip_staticï¼Œå› ä¸ºé…ç½®./configureæ²¡æœ‰æ·»åŠ ")])])])])]),t._v(" "),n("h5",{attrs:{id:"æ·»åŠ æ¨¡å—åˆ°nginxçš„å®ç°æ­¥éª¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ·»åŠ æ¨¡å—åˆ°nginxçš„å®ç°æ­¥éª¤"}},[t._v("#")]),t._v(" æ·»åŠ æ¨¡å—åˆ°nginxçš„å®ç°æ­¥éª¤")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("==nginx -V==")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("./configure --prefix=/usr/local/nginx \\\n--sbin-path=/usr/local/nginx/sbin/nginx \\\n--modules-path=/usr/local/nginx/modules \\\n--conf-path=/usr/local/nginx/conf/nginx.conf \\\n--error-log-path=/usr/local/nginx/logs/error.log \\\n--http-log-path=/usr/local/nginx/logs/access.log \\\n--pid-path=/usr/local/nginx/logs/nginx.pid \\\n--lock-path=/usr/local/nginx/logs/nginx.lock\n")])])])]),t._v(" "),n("li",[n("p",[t._v("==cd /usr/local/nginx/sbin==                ==mv nginx nginxold==ï¼šæ”¹åï¼ˆç›¸ç­‰äºå¤‡ä»½ï¼‰")])]),t._v(" "),n("li",[n("p",[t._v("==cd /root/nginx/core/nginx-1.16.1==")])]),t._v(" "),n("li",[n("p",[t._v("==make clean==ï¼šæ¸…ç©ºä¹‹å‰ç¼–è¯‘çš„å†…å®¹")])]),t._v(" "),n("li",[n("p",[t._v("ä½¿ç”¨configureæ¥é‡æ–°é…ç½®å‚æ•°")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("./configure --prefix=/usr/local/nginx \\\n--sbin-path=/usr/local/nginx/sbin/nginx \\\n--modules-path=/usr/local/nginx/modules \\\n--conf-path=/usr/local/nginx/conf/nginx.conf \\\n--error-log-path=/usr/local/nginx/logs/error.log \\\n--http-log-path=/usr/local/nginx/logs/access.log \\\n--pid-path=/usr/local/nginx/logs/nginx.pid \\\n--lock-path=/usr/local/nginx/logs/nginx.lock  --with-http_gzip_static_module\n")])])])]),t._v(" "),n("li",[n("p",[t._v("makeï¼šé‡æ–°ç¼–è¯‘")])]),t._v(" "),n("li",[n("p",[t._v("==mv objs/nginx /usr/local/nginx/sbin== ï¼šæŠŠè„šæœ¬ç§»åˆ°sbinç›®å½•ä¸‹")])]),t._v(" "),n("li",[n("p",[t._v("æ‰§è¡Œæ›´æ–°å‘½ä»¤ï¼š==make upgrade==")]),t._v(" "),n("p",[t._v("âœ”ï¸æ³¨æ„ï¼šæœ‰makeå¿…é¡»åœ¨MakeFileä¸‹æ‰èƒ½æ‰§è¡Œ")])])]),t._v(" "),n("h5",{attrs:{id:"gzip-staticæµ‹è¯•ä½¿ç”¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gzip-staticæµ‹è¯•ä½¿ç”¨"}},[t._v("#")]),t._v(" gzip_staticæµ‹è¯•ä½¿ç”¨")]),t._v(" "),n("p",[t._v("âœ”ï¸å‹ç¼©å‰")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112121631823.png",alt:"image-20211212163149810"}})]),t._v(" "),n("p",[t._v("âœ”ï¸å‹ç¼©åï¼š")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("cd /usr/local/nginx/html")])]),t._v(" "),n("li",[n("p",[t._v("gzip jquery.js")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112121632351.png",alt:"image-20211212163231170"}})])])]),t._v(" "),n("h2",{attrs:{id:"é™æ€èµ„æºçš„ç¼“å­˜å¤„ç†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é™æ€èµ„æºçš„ç¼“å­˜å¤„ç†"}},[t._v("#")]),t._v(" é™æ€èµ„æºçš„ç¼“å­˜å¤„ç†")]),t._v(" "),n("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯ç¼“å­˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯ç¼“å­˜"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯ç¼“å­˜")]),t._v(" "),n("blockquote",[n("p",[t._v("è®¿é—®é€Ÿåº¦æ¯”éšæœºå­˜å–å­˜å‚¨å™¨ï¼ˆRAMï¼‰å¿«")])]),t._v(" "),n("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯webç¼“å­˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯webç¼“å­˜"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯webç¼“å­˜")]),t._v(" "),n("blockquote",[n("p",[t._v("webèµ„æºå­˜åœ¨äºwebæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰ä¹‹é—´çš„å‰¯æœ¬ï¼Œä¾‹ï¼šæµè§ˆå™¨ç¼“å­˜è¿‡ç½‘ç«™çš„ç½‘é¡µï¼Œå½“å†æ¬¡è®¿é—®URLåœ°å€æ—¶ï¼Œç›´æ¥ä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„ç½‘é¡µ")])]),t._v(" "),n("h3",{attrs:{id:"webç¼“å­˜çš„ç§ç±»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#webç¼“å­˜çš„ç§ç±»"}},[t._v("#")]),t._v(" webç¼“å­˜çš„ç§ç±»")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("å®¢æˆ·ç«¯ç¼“å­˜\n\tæµè§ˆå™¨ç¼“å­˜\næœåŠ¡ç«¯ç¼“å­˜\n\tNginx/Redis/Mencachedç­‰\n")])])]),n("h3",{attrs:{id:"ä¸ºä»€ä¹ˆè¦ç”¨æµè§ˆå™¨ç¼“å­˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦ç”¨æµè§ˆå™¨ç¼“å­˜"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆè¦ç”¨æµè§ˆå™¨ç¼“å­˜")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("æˆæœ¬æœ€ä½çš„ç¼“å­˜\nå‡å°‘ç½‘ç»œå¸¦å®½æ¶ˆè€—\né™ä½æœåŠ¡å™¨å‹åŠ›\nå‡å°‘ç½‘ç»œå»¶è¿Ÿï¼ŒåŠ å¿«é¡µé¢æ‰“å¼€é€Ÿåº¦\n")])])]),n("h3",{attrs:{id:"æµè§ˆå™¨ç¼“å­˜çš„æ‰§è¡Œæµç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æµè§ˆå™¨ç¼“å­˜çš„æ‰§è¡Œæµç¨‹"}},[t._v("#")]),t._v(" æµè§ˆå™¨ç¼“å­˜çš„æ‰§è¡Œæµç¨‹")]),t._v(" "),n("p",[t._v("âœ”ï¸å’Œé¡µé¢(header)ç¼“å­˜ç›¸å…³çš„å­—æ®µï¼š")]),t._v(" "),n("ul",[n("li",[t._v("Expiresï¼šç¼“å­˜è¿‡æœŸçš„æ—¥æœŸå’Œæ—¶é—´")]),t._v(" "),n("li",[t._v("Cache-Controlï¼šå’Œ==ç¼“å­˜ç›¸å…³çš„é…ç½®ä¿¡æ¯==")]),t._v(" "),n("li",[t._v("Last-Modifiedï¼šèµ„æºæœ€åä¿®æ”¹æ—¶é—´")]),t._v(" "),n("li",[t._v("ETagï¼šè¯·æ±‚å˜é‡å®ä½“æ ‡ç­¾çš„çš„çš„å½“å‰å€¼ï¼Œæ¯”å¦‚æ–‡ä»¶çš„==MD5å€¼==")])]),t._v(" "),n("p",[n("img",{attrs:{src:s(828),alt:"image-20211212213127899"}})]),t._v(" "),n("ol",[n("li",[t._v("ç¬¬ä¸€æ¬¡è¯·æ±‚ï¼Œå‘é€requestè·å–æ•°æ®")]),t._v(" "),n("li",[t._v("æœåŠ¡ç«¯è¿”å›200çŠ¶æ€ç å¹¶ä¸”åœ¨å“åº”å¤´é™„ä¸Šå¯¹åº”èµ„æºä»¥åŠç¼“å­˜ä¿¡æ¯")]),t._v(" "),n("li",[t._v("==å†æ¬¡è®¿é—®==ï¼Œå®¢æˆ·ç«¯åœ¨æµè§ˆå™¨çš„ç¼“å­˜ä¸­æ‰¾èµ„æº")]),t._v(" "),n("li",[t._v("å¦‚æœæ²¡æœ‰ï¼Œèµ°ç¬¬äºŒæ­¥")]),t._v(" "),n("li",[t._v("æœ‰ï¼Œæ¥ä¸‹æ¥åˆ¤æ–­æ˜¯å¦è¿‡æœŸï¼Œè¿‡æœŸåˆ¤æ–­æ ‡å‡†æ˜¯Expires")]),t._v(" "),n("li",[t._v("æ²¡æœ‰==è¿‡æœŸ==ï¼Œè¿”å›æ•°æ®")]),t._v(" "),n("li",[t._v("è¿‡æœŸï¼Œåˆ¤æ–­ç¼“å­˜æ˜¯å¦å‘ç”Ÿå˜åŒ–\n"),n("ul",[n("li",[t._v("ä¸€ä¸ªæ˜¯ETagï¼Œä¸€ä¸ªæ˜¯Last-Modified")])])]),t._v(" "),n("li",[t._v("==æœªå‘ç”Ÿå˜åŒ–ï¼Œè¿”å›304==ï¼Œç›´æ¥ä»ç¼“å­˜å–æ•°æ®")]),t._v(" "),n("li",[t._v("å‘ç”Ÿå˜åŒ–ï¼Œé‡æ–°ä»æœåŠ¡ç«¯è·å–æ•°æ®")])]),t._v(" "),n("h3",{attrs:{id:"æµè§ˆå™¨ç¼“å­˜ç›¸å…³æŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æµè§ˆå™¨ç¼“å­˜ç›¸å…³æŒ‡ä»¤"}},[t._v("#")]),t._v(" æµè§ˆå™¨ç¼“å­˜ç›¸å…³æŒ‡ä»¤")]),t._v(" "),n("h4",{attrs:{id:"expiresæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#expiresæŒ‡ä»¤"}},[t._v("#")]),t._v(" expiresæŒ‡ä»¤")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("==expires==ï¼šæ§åˆ¶é¡µé¢ç¼“å­˜ï¼ŒHTTPåº”ç­”ä¸­çš„Expireså’ŒCache-Control")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("maxï¼šCache-Controlå€¼ä¸º10å¹´")])]),t._v(" "),n("li",[n("p",[t._v("timeï¼šè´Ÿæ•°ï¼ŒCache-Controlå€¼ä¸ºno-cacheï¼Œæ•´æ•°ï¼Œå€¼ä¸ºå¯¹åº”çš„æ•´æ•°")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112142240383.png",alt:"image-20211213100531204"}})])])])])]),t._v(" "),n("h4",{attrs:{id:"add-headeræŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#add-headeræŒ‡ä»¤"}},[t._v("#")]),t._v(" add_headeræŒ‡ä»¤")]),t._v(" "),n("ul",[n("li",[t._v("æŒ‡å®šå“åº”å¤´å’Œå“åº”å€¼\n"),n("ol",[n("li",[t._v("must-revalidateï¼šå¯ç¼“å­˜ä½†å¿…é¡»å‘æœåŠ¡å™¨è¿›è¡Œç¡®è®¤")]),t._v(" "),n("li",[t._v("no-cacheï¼šç¼“å­˜å‰ç¡®è®¤æœ‰æ•ˆæ€§")]),t._v(" "),n("li",[t._v("==no-store==ï¼šä¸ç¼“å­˜ä»»ä½•")]),t._v(" "),n("li",[t._v("no-transformï¼šä¸å¯æ›´æ”¹")]),t._v(" "),n("li",[t._v("publicï¼šä»»æ„éƒ½ç¼“å­˜")]),t._v(" "),n("li",[t._v("privateï¼šæŒ‡å®šç”¨æˆ·ç¼“å­˜")]),t._v(" "),n("li",[t._v("proxy-revalidateï¼šä¸­é—´æœåŠ¡å™¨å¯¹å“åº”å†è¿›è¡Œç¡®è®¤")]),t._v(" "),n("li",[t._v("max-age=<ç§’>ï¼šå“åº”æœ€å¤§Ageå€¼")]),t._v(" "),n("li",[t._v("s-maxage=<ç§’>ï¼šå…¬å…±ç¼“å­˜æœåŠ¡å™¨å“åº”çš„æœ€å¤§Ageå€¼")])])])]),t._v(" "),n("h2",{attrs:{id:"nginxçš„è·¨åŸŸé—®é¢˜è§£å†³"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxçš„è·¨åŸŸé—®é¢˜è§£å†³"}},[t._v("#")]),t._v(" Nginxçš„è·¨åŸŸé—®é¢˜è§£å†³")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("ä»€ä¹ˆæƒ…å†µä¸‹å‡ºç°è·¨åŸŸé—®é¢˜ï¼Ÿ\nå®ä¾‹æ¼”ç¤ºè·¨åŸŸé—®é¢˜\nå…·ä½“çš„è§£å†³æ–¹æ¡ˆæ˜¯ä»€ä¹ˆï¼Ÿ\n")])])]),n("h3",{attrs:{id:"åŒæºç­–ç•¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŒæºç­–ç•¥"}},[t._v("#")]),t._v(" åŒæºç­–ç•¥")]),t._v(" "),n("p",[t._v(":happy:æµè§ˆå™¨çš„ä¸€ç§çº¦å®šï¼Œæœ€æ ¸å¿ƒæœ€åŸºæœ¬çš„å®‰å…¨åŠŸèƒ½ï¼ŒåŒæºï¼š==åè®®ã€åŸŸåï¼ˆIPï¼‰ã€ç«¯å£ç›¸åŒ==å³ä¸ºåŒæº")]),t._v(" "),n("ul",[n("li",[t._v("httpå’Œhttpsï¼šä¸")]),t._v(" "),n("li",[t._v("192.168.164.129å’Œ192.168.164.128ï¼šä¸")]),t._v(" "),n("li",[t._v("192.168.164.129å’Œ192.168.164.128:8080ï¼šä¸ã€‚ä¸å†™é»˜è®¤æ˜¯80ç«¯å£ï¼Œ80å’Œ8080ç«¯å£ä¸ä¸€æ ·")]),t._v(" "),n("li",[t._v("192.168.164.129å’Œ192.168.164.128:80ï¼šæ˜¯")])]),t._v(" "),n("h3",{attrs:{id:"è·¨åŸŸé—®é¢˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸé—®é¢˜"}},[t._v("#")]),t._v(" è·¨åŸŸé—®é¢˜")]),t._v(" "),n("p",[t._v(":happy:ç®€å•æè¿°ï¼šä¸¤å°æœåŠ¡å™¨Aã€Bï¼Œ==æœåŠ¡å™¨Açš„é¡µé¢å‘é€å¼‚æ­¥è¯·æ±‚æœåŠ¡å™¨Bçš„æ•°æ®==ï¼Œå¦‚æœAå’ŒBä¸æ»¡è¶³åŒæºç­–ç•¥ï¼Œåˆ™å‡ºç°è·¨åŸŸé—®é¢˜")]),t._v(" "),n("h3",{attrs:{id:"è·¨åŸŸé—®é¢˜çš„æ¡ˆä¾‹æ¼”ç¤º"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è·¨åŸŸé—®é¢˜çš„æ¡ˆä¾‹æ¼”ç¤º"}},[t._v("#")]),t._v(" è·¨åŸŸé—®é¢˜çš„æ¡ˆä¾‹æ¼”ç¤º")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112142253813.png",alt:"image-20211214225327393"}})]),t._v(" "),n("ol",[n("li",[n("p",[t._v("nginxçš„htmlç›®å½•ä¸‹åˆ›å»ºa.html")]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("utf-8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("è·¨åŸŸé—®é¢˜æ¼”ç¤º"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n         //è¿™é‡Œå¯èƒ½è¦æ”¹\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jquery.js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}}),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n            "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#btn"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("click")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://192.168.164.129:8080/getUser'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                                "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("alert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        ")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("input")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("type")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("button"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("è·å–æ•°æ®"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("btn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n")])])])]),t._v(" "),n("li",[n("p",[t._v("nginx.confé…ç½®")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen  "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("getUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                default_type application"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("json"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//å±æ€§ä¸€å®šè¦åŠ åŒå¼•å·")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"id":1,"name":"TOM","age":18}\'')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("æµè§ˆå™¨è®¿é—®æµ‹è¯•")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112142302487.png",alt:"image-20211214230240507"}})])])]),t._v(" "),n("h3",{attrs:{id:"è§£å†³æ–¹æ¡ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" è§£å†³æ–¹æ¡ˆ")]),t._v(" "),n("p",[t._v("âœ”ï¸ä½¿ç”¨add_headeræŒ‡ä»¤æ·»åŠ ä¸€äº›å¤´ä¿¡æ¯")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("è§£å†³è·¨åŸŸé—®é¢˜çš„ä¸¤ä¸ªå¤´ä¿¡æ¯")]),t._v(" "),n("ul",[n("li",[t._v("==Access-Control-Allow-Origin==ï¼šå…è®¸è·¨åŸŸï¼Œå¤šä¸ªé€—å·åˆ†éš”ï¼Œä½¿ç”¨*ä»£è¡¨æ‰€æœ‰æº")]),t._v(" "),n("li",[t._v("==Access-Control-Allow-Methods==ï¼šå…è®¸è·¨åŸŸè®¿é—®çš„è¯·æ±‚æ–¹å¼ï¼Œå€¼ä¸ºPOST(å¢)ã€DELETE(åˆ )ã€PUT(æ”¹)ã€GET(æŸ¥)")])])]),t._v(" "),n("li",[n("p",[t._v("å…·ä½“é…ç½®")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("getUser"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    add_header Access"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Allow"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Origin "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    add_header Access"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Control"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Allow"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("Methods "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("GET")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("POST")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PUT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DELETE")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    default_type application"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("json"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"id":1,"name":"TOM","age":18}\'')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),n("h2",{attrs:{id:"é™æ€èµ„æºé˜²ç›—é“¾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é™æ€èµ„æºé˜²ç›—é“¾"}},[t._v("#")]),t._v(" é™æ€èµ„æºé˜²ç›—é“¾")]),t._v(" "),n("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯èµ„æºç›—é“¾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯èµ„æºç›—é“¾"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯èµ„æºç›—é“¾")]),t._v(" "),n("blockquote",[n("p",[t._v("èµ„æºç›—é“¾æŒ‡å†…å®¹ä¸åœ¨è‡ªå·±æœåŠ¡å™¨ä¸Šï¼Œç›—å–å¤§ç½‘ç«™ç©ºé—´å’Œæµé‡ï¼Œ==ç”¨åˆ«äººçš„ä¸œè¥¿æˆå°±è‡ªå·±çš„ç½‘ç«™==")])]),t._v(" "),n("p",[t._v("ä»ä¸‹å›¾å¯çŸ¥ï¼šç™¾åº¦é˜²æ­¢ç›—é“¾ï¼Œè€Œäº¬ä¸œæ²¡æœ‰")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112142310403.png",alt:"image-20211214231002999"}})]),t._v(" "),n("h3",{attrs:{id:"nginxé˜²ç›—é“¾çš„å®ç°åŸç†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxé˜²ç›—é“¾çš„å®ç°åŸç†"}},[t._v("#")]),t._v(" Nginxé˜²ç›—é“¾çš„å®ç°åŸç†")]),t._v(" "),n("p",[t._v("âœ”ï¸HTTPçš„å¤´ä¿¡æ¯Refererï¼Œå‘Šè¯‰æµè§ˆå™¨è¯¥ç½‘é¡µä»å“ªä¸ªé¡µé¢é“¾æ¥è¿‡æ¥çš„")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112142311478.png",alt:"image-20211214231134043"}})]),t._v(" "),n("p",[t._v(":happy:å¦‚æœæ˜¯è‡ªå·±==ä¿¡ä»»çš„ç½‘ç«™åœ°å€ï¼Œæ”¾è¡Œï¼Œå¦åˆ™è¿”å›403ï¼ˆæœåŠ¡å™¨æ‹’ç»è®¿é—®ï¼‰==çš„çŠ¶æ€ä¿¡æ¯")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112142313493.png",alt:"image-20211214231310122"}})]),t._v(" "),n("ul",[n("li",[n("p",[t._v("é˜²ç›—é“¾çš„å…·ä½“å®ç°ï¼š")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("valid_referersï¼šæŸ¥çœ‹refererå’Œè‡ªå·±å®šä¹‰çš„å†…å®¹æ˜¯å¦åŒ¹é…ï¼ŒåŒ¹é…åˆ°==valid-refererså€¼ç½®ä¸º0ï¼Œå¦åˆ™ä¸º1==")])]),t._v(" "),n("li",[n("p",[t._v("noneï¼šrefererä¸ºç©ºï¼Œå…è®¸è®¿é—®")])]),t._v(" "),n("li",[n("p",[t._v("blockedï¼šä¸å¸¦http://ã€https://ç­‰åè®®å…è®¸è®¿é—®")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112181724209.png",alt:"image-20211218172409194"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112181724772.png",alt:"image-20211218172426750"}})])])])])]),t._v(" "),n("h3",{attrs:{id:"é’ˆå¯¹ç›®å½•è¿›è¡Œé˜²ç›—é“¾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é’ˆå¯¹ç›®å½•è¿›è¡Œé˜²ç›—é“¾"}},[t._v("#")]),t._v(" é’ˆå¯¹ç›®å½•è¿›è¡Œé˜²ç›—é“¾")]),t._v(" "),n("p",[t._v("âœ”ï¸é…ç½®å¦‚ä¸‹")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("        #é˜²ç›—é“¾é—®é¢˜\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("images "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                valid_referers none blocked www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("baidu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(" $invalid_referer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("403")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                root html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("âœ”ï¸é—®é¢˜ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("refererçš„é™åˆ¶æ¯”è¾ƒç²—é²")]),t._v(" "),n("li",[t._v("è§£å†³æ–¹æ³•ï¼Œä½¿ç”¨nginxçš„ç¬¬ä¸‰æ–¹æ¨¡å—==ngx_http_accesskey_module==")])]),t._v(" "),n("h2",{attrs:{id:"rewriteåŠŸèƒ½é…ç½®"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rewriteåŠŸèƒ½é…ç½®"}},[t._v("#")]),t._v(" RewriteåŠŸèƒ½é…ç½®")]),t._v(" "),n("blockquote",[n("p",[t._v("å®ç°URLçš„é‡å†™")]),t._v(" "),n("p",[t._v("æ³¨æ„ï¼šrewriteåŠŸèƒ½ä¾èµ–äº==PCRE==çš„æ”¯æŒï¼Œnginxä½¿ç”¨==ngx_http_rewrite_module==æ¨¡å—æ¥è§£æå’Œå¤„ç†RewriteåŠŸèƒ½çš„ç›¸å…³é…ç½®")])]),t._v(" "),n("h3",{attrs:{id:"åœ°å€é‡å†™-ä¸-åœ°å€è½¬å‘"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åœ°å€é‡å†™-ä¸-åœ°å€è½¬å‘"}},[t._v("#")]),t._v(" â€œåœ°å€é‡å†™â€ä¸â€œåœ°å€è½¬å‘â€")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("é‡å†™==åœ°å€==ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè½¬å‘ä¸ä¼š")])]),t._v(" "),n("li",[n("p",[t._v("é‡å†™äº§ç”Ÿ==ä¸¤æ¬¡==è¯·æ±‚ï¼Œè€Œè½¬å‘ä¸€æ¬¡è¯·æ±‚")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112181732331.png",alt:"image-20211218173251412"}})])]),t._v(" "),n("li",[n("p",[t._v("é‡å†™çš„é¡µé¢å¿…é¡»æ˜¯ä¸€ä¸ª==å®Œæ•´çš„è·¯å¾„==ï¼Œè€Œè½¬å‘ä¸éœ€è¦")])]),t._v(" "),n("li",[n("p",[t._v("é‡å†™requestèŒƒå›´å†…å±æ€§==ä¸èƒ½ä¼ é€’ç»™æ–°é¡µé¢ï¼Œ==è€Œè½¬å‘å¯ä»¥ä¼ é€’å€¼")])]),t._v(" "),n("li",[n("p",[t._v("è½¬å‘==é€Ÿåº¦==å¿«äºé‡å†™")])])]),t._v(" "),n("h3",{attrs:{id:"rewriteè§„åˆ™"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rewriteè§„åˆ™"}},[t._v("#")]),t._v(" Rewriteè§„åˆ™")]),t._v(" "),n("h3",{attrs:{id:"setæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#setæŒ‡ä»¤"}},[t._v("#")]),t._v(" setæŒ‡ä»¤")]),t._v(" "),n("blockquote",[n("p",[t._v("è®¾ç½®ä¸€ä¸ªæ–°çš„å˜é‡")])]),t._v(" "),n("ul",[n("li",[t._v("ä¾‹ï¼š==set $name zhangsan==;")])]),t._v(" "),n("h3",{attrs:{id:"rewriteå¸¸ç”¨å…¨å±€å˜é‡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rewriteå¸¸ç”¨å…¨å±€å˜é‡"}},[t._v("#")]),t._v(" Rewriteå¸¸ç”¨å…¨å±€å˜é‡")]),t._v(" "),n("p",[t._v("âœ”ï¸å‰é¢éƒ½åŠ $")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"center"}},[t._v("å˜é‡")]),t._v(" "),n("th",{staticStyle:{"text-align":"center"}},[t._v("è¯´æ˜")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("$==args==")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("å­˜æ”¾è¯·æ±‚è·¯å¾„çš„å‚æ•°ï¼Œ192.168.164.129:8081/server?a1=2&a2=3ï¼Œå…¶ä¸­çš„a1=2&a2=3")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("http_user_agent")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("è®°å½•æµè§ˆå™¨çš„ç›¸å…³ç‰ˆæœ¬ä¿¡æ¯")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("==host==")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("æœåŠ¡å™¨çš„server_name")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("document_uri")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("URIåœ°å€")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("document_root")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("å¯¹åº”locationçš„rootå€¼ï¼Œæœªè®¾ç½®ï¼Œé»˜è®¤æ˜¯nginxè‡ªå¸¦çš„htmlä½ç½®")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("content_length")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("è¯·æ±‚å¤´ä¸­çš„content_length")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("http_cookie")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("å®¢æˆ·ç«¯çš„cookieä¿¡æ¯")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("limit_rate")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("æœåŠ¡å™¨å¯¹ç½‘ç»œè¿æ¥é€Ÿç‡çš„é™åˆ¶ï¼Œé»˜è®¤0ï¼Œä¸é™åˆ¶")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("remote_addr")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("å®¢æˆ·ç«¯çš„IPåœ°å€")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("remote_port")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯è¿æ¥çš„ç«¯å£å·")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("remote_user")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("å®¢æˆ·ç«¯çš„ç”¨æˆ·å")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("scheme")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("è®¿é—®åè®®")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("server_addr")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("æœåŠ¡ç«¯åœ°å€")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("server_name")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("æœåŠ¡å™¨çš„åç§°")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("server_port")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("æœåŠ¡å™¨çš„ç«¯å£å·")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("server_protocol")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("ç‰ˆæœ¬ï¼Œä¾‹â€HTTP/1.1â€œ")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("request_body_file")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("æœ¬åœ°æ–‡ä»¶èµ„æºçš„åç§°")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("==request_method==")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("å®¢æˆ·ç«¯çš„è¯·æ±‚æ–¹å¼ï¼Œæ¯”å¦‚ï¼šGETã€POSTç­‰")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("request_filename")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("å½“å‰è¯·æ±‚èµ„æºæ–‡ä»¶çš„è·¯å¾„å")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"center"}},[t._v("==request_uri==")]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v("å½“å‰è¯·æ±‚çš„URIï¼Œå³å…¨éƒ¨è·¯å¾„192.168.164.129:8081/server?a1=2&a2=3")])])])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112181754705.png",alt:"image-20211218175430634"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112181754247.png",alt:"image-20211218175439240"}})]),t._v(" "),n("h3",{attrs:{id:"ifæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ifæŒ‡ä»¤"}},[t._v("#")]),t._v(" ifæŒ‡ä»¤")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("å˜é‡åï¼Œå€¼ä¸ºç©ºæˆ–è€…æ˜¯0ä¸ºfalseï¼Œå…¶å®ƒä¸ºtrue")]),t._v(" "),n("div",{staticClass:"language-csharp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-csharp"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$args"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" success"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("===å’Œ!===æ¯”è¾ƒå˜é‡å’Œå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œæ»¡è¶³æ¡ä»¶ä¸ºtrueï¼Œä¸æ»¡è¶³ä¸ºfalseï¼Œæ³¨æ„å­—ç¬¦ä¸²ä¸éœ€è¦å¼•å·")]),t._v(" "),n("div",{staticClass:"language-csharp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-csharp"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token preprocessor property"}},[t._v("#"),n("span",{pre:!0,attrs:{class:"token directive keyword"}},[t._v("if")]),t._v("è¯­å¥æ‹¬å·å’Œifä¹‹é—´æœ‰ç©ºæ ¼")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$request_method "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" POST"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("405")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("ä½¿ç”¨cmdå‘é€postè¯·æ±‚ï¼š==curl -X POST åœ°å€==")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112181910095.png",alt:"image-20211212213135963"}})])])]),t._v(" "),n("ol",[n("li",[n("p",[t._v('ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¯¹å˜é‡è¿›è¡ŒåŒ¹é…ï¼Œç”¨"~","~ * ","!~","!~*"')]),t._v(" "),n("ul",[n("li",[n("p",[t._v("~ï¼šåŒºåˆ†å¤§å°å†™")])]),t._v(" "),n("li",[n("p",[t._v("~*ï¼šä¸åŒºåˆ†å¤§å°å†™")])]),t._v(" "),n("li",[n("p",[t._v("!~ï¼Œ!~*ï¼šå–å")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("    #åŠ *ä¸åŒºåˆ†å¤§å°å†™\n    if ($http_user_agent ~* safari){\n    \treturn 200 Chrome;\n    }\n")])])])])])]),t._v(" "),n("li",[n("p",[t._v("åˆ¤æ–­è¯·æ±‚çš„==æ–‡ä»¶==æ˜¯å¦å­˜åœ¨ï¼š-få’Œ!-f")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("    location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        root html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        default_type text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        #æŸ¥æ‰¾æ˜¯å¦å­˜åœ¨è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰¾ç›®å½•æ˜¯"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("d\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("f $request_filename"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1> file not found</h1>'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),n("li",[n("p",[t._v("åˆ¤æ–­==ç›®å½•==æ˜¯å¦å­˜åœ¨ï¼š-då’Œ!-d")])]),t._v(" "),n("li",[n("p",[t._v("åˆ¤æ–­==ç›®å½•æˆ–è€…æ–‡ä»¶==æ˜¯å¦å­˜åœ¨ï¼š-eå’Œ!-e")])]),t._v(" "),n("li",[n("p",[t._v("åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯æ‰§è¡Œï¼š-xå’Œ!-x")])])]),t._v(" "),n("h3",{attrs:{id:"breakæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#breakæŒ‡ä»¤"}},[t._v("#")]),t._v(" breakæŒ‡ä»¤")]),t._v(" "),n("blockquote",[n("p",[t._v("ä¸­æ–­æŒ‡ä»¤ï¼Œä½äºä»–å‰é¢çš„ç”Ÿæ•ˆï¼Œåé¢ä¸ç”Ÿæ•ˆ")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("        #æµ‹è¯•"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("testbreak "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                root html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" $username "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'luo'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("$username"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" $username "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'zhangsan'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" $username "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'lisi'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                add_header username $username"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),n("h3",{attrs:{id:"returnæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#returnæŒ‡ä»¤"}},[t._v("#")]),t._v(" returnæŒ‡ä»¤")]),t._v(" "),n("blockquote",[n("p",[t._v("å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ï¼Œç›´æ¥å‘å®¢æˆ·ç«¯è¿”å›å“åº”çš„çŠ¶æ€ä»£ç ")])]),t._v(" "),n("ul",[n("li",[t._v("codeï¼šçŠ¶æ€ç 0-999")]),t._v(" "),n("li",[t._v("textï¼šå†…å®¹")]),t._v(" "),n("li",[t._v("URLï¼šåœ°å€")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("        #æµ‹è¯•"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("testreturn "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                root html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("302")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'https://www.baidu.com/'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"rewriteæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rewriteæŒ‡ä»¤"}},[t._v("#")]),t._v(" rewriteæŒ‡ä»¤")]),t._v(" "),n("p",[t._v("âœ”ï¸URLå’ŒURIçš„åŒºåˆ«ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("URIï¼šç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦identifier")]),t._v(" "),n("li",[t._v("URLï¼šç»Ÿä¸€èµ„æºå®šä½ç¬¦location")])]),t._v(" "),n("p",[t._v("âœ”ï¸è¯­æ³•ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("rewrite regex replacement [flag]\n"),n("ul",[n("li",[t._v("regexï¼šåŒ¹é…URIçš„æ­£åˆ™è¡¨è¾¾å¼")]),t._v(" "),n("li",[t._v("replacement ï¼šæ›¿æ¢URIä¸­çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœè¯¥å­—ç¬¦ä¸²æ˜¯==ä»¥httpæˆ–httpså¼€å¤´çš„ï¼Œç›´æ¥è¿”å›è¯¥å­—ç¬¦ä¸²==ï¼Œä¸‹é¢ä¸ç®¡")])])])]),t._v(" "),n("p",[t._v("âœ”ï¸flagï¼š")]),t._v(" "),n("ol",[n("li",[t._v("lastï¼šå’Œæ­£å¸¸è¯·æ±‚ä¸€æ ·")]),t._v(" "),n("li",[t._v("breakï¼šä¸­æ–­")]),t._v(" "),n("li",[t._v("redirectï¼š==é‡å®šå‘ï¼Œåœ°å€å‘é€å˜åŒ–ï¼Œä¸¤æ¬¡è¯·æ±‚==")]),t._v(" "),n("li",[t._v("permanentï¼šæ°¸ä¹…é‡å®šå‘")])]),t._v(" "),n("p",[t._v("âœ”ï¸çŠ¶æ€ç ï¼š")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("301ï¼šæ°¸ä¹…é‡å®šå‘")])]),t._v(" "),n("li",[n("p",[t._v("302ï¼šä¸´æ—¶é‡å®šå‘")]),t._v(" "),n("p",[n("img",{attrs:{src:s(829),alt:"image-20211216214902553"}})])])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("        #æµ‹è¯•rewrite\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("rewrite "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                #å¼€å¯é‡å†™æ—¥å¿—çš„è®°å½•\n                rewrite_log on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                error_log logs"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log notice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                #åœ°å€é‡å†™ï¼Œæ°¸ä¹…é‡å†™"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("301")]),t._v("ï¼Œä¸´æ—¶é‡å†™"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("302")]),t._v("\n                rewrite "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("rewrite"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("url\\w"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("$ https"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("baidu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                rewrite "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("rewrite"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\\w"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("$ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("$1 permanent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                rewrite "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("rewrite"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("demo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\\w"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("$ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("$1 permanent"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("test "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                default_type text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("plain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test success'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("demo "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                default_type text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("plain"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'demo success'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"rewrite-logæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rewrite-logæŒ‡ä»¤"}},[t._v("#")]),t._v(" rewrite_logæŒ‡ä»¤")]),t._v(" "),n("blockquote",[n("p",[t._v("æ˜¯å¦å¼€å¯URLé‡å†™==æ—¥å¿—çš„è¾“å‡ºåŠŸèƒ½==ï¼Œå¼€å¯åï¼Œç›¸å…³æ—¥å¿—å°†ä»¥==notice==çº§åˆ«è¾“å‡º")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("    #å¼€å¯é‡å†™æ—¥å¿—çš„è®°å½•\n    rewrite_log on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    error_log logs"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("error"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("log notice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h2",{attrs:{id:"rewriteçš„æ¡ˆä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rewriteçš„æ¡ˆä¾‹"}},[t._v("#")]),t._v(" Rewriteçš„æ¡ˆä¾‹")]),t._v(" "),n("h3",{attrs:{id:"åŸŸåè·³è½¬å’ŒåŸŸåé•œåƒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŸŸåè·³è½¬å’ŒåŸŸåé•œåƒ"}},[t._v("#")]),t._v(" åŸŸåè·³è½¬å’ŒåŸŸåé•œåƒ")]),t._v(" "),n("p",[t._v("ä¾‹www.jd.comï¼Œwww.360buy.comä¸¤ä¸ªéƒ½èƒ½è®¿é—®äº¬ä¸œç½‘ç«™")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("å‡†å¤‡ä¸¤ä¸ªåŸŸå")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("vim /etc/hosts\n127.0.0.1 www.luo.com\n127.0.0.1 www.luomu.com\n")])])])]),t._v(" "),n("li",[n("p",[t._v("é…ç½®å¦‚ä¸‹ï¼šä¸¤ä¸ªserverï¼Œ==ç›‘å¬ç«¯å£å·ä¸€æ ·==")])])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("    server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("itcast"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                default_type text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>welcome to luo</h1>'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("itheima"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("itheima"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        #ä¸æºå¸¦"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URI")]),t._v("\n        #rewrite "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex"}},[n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token regex-source language-regex"}},[t._v("www.itcast.cn")]),n("span",{pre:!0,attrs:{class:"token regex-delimiter"}},[t._v("/")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        #æºå¸¦"),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("URI")]),t._v("\n        #rewrite "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("itcast"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("$1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        #é•œåƒï¼Œå³åªæä¾›useræ¨¡å—è·³è½¬\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                #åŸŸåè·³è½¬\n                rewrite "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("user"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("itcast"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("$1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("emp "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                default_type text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>employee success</h1>'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"ç‹¬ç«‹åŸŸå"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç‹¬ç«‹åŸŸå"}},[t._v("#")]),t._v(" ç‹¬ç«‹åŸŸå")]),t._v(" "),n("p",[t._v("âœ”ï¸ç‹¬ç«‹åŸŸåå’Œé•œåƒåŒºåˆ†ï¼š==é•œåƒæ˜¯æŸä¸ªåŠŸèƒ½æ¨¡å—==ï¼Œåªå…è®¸æŸä¸ªåŠŸèƒ½è®¿é—®ï¼Œè€Œ==ç‹¬ç«‹åŸŸå==æ˜¯æ¯ä¸ªåŠŸèƒ½éƒ½æœ‰è‡ªå·±çš„åœ°å€ï¼Œç«¯å£å·ä¹Ÿæ˜¯80ï¼Œå’Œåé¢http://www.itcast.cnä¿æŒä¸€è‡´")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("    #ç‹¬ç«‹åŸŸå\n    server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name search"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("luo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        rewrite "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("^")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("itcast"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cn"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("search$1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"ç›®å½•è‡ªåŠ¨æ·»åŠ "}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç›®å½•è‡ªåŠ¨æ·»åŠ "}},[t._v("#")]),t._v(" ç›®å½•è‡ªåŠ¨æ·»åŠ â€/â€œ")]),t._v(" "),n("p",[t._v(":happy:é—®é¢˜æè¿°ï¼š")]),t._v(" "),n("p",[t._v("ç›´æ¥è®¿é—®ï¼šhttp://192.168.164æˆåŠŸï¼Œæ²¡æœ‰ç›®å½•ï¼Œå’Œ/æ— å…³")]),t._v(" "),n("div",{staticClass:"language-scala extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scala"}},[n("code",[t._v("server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tlisten\t"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tserver_name localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tlocation "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\troot html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tindex index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ä¿®æ”¹å¦‚ä¸‹é…ç½®ï¼š")]),t._v(" "),n("div",{staticClass:"language-csharp extra-class"},[n("pre",{pre:!0,attrs:{class:"language-csharp"}},[n("code",[t._v("server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tlisten\t"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("server_name")]),t._v(" localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tlocation "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("luo "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("root")]),t._v(" html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tindex index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("è®¿é—®http://192.168.164/luoå¤±è´¥ï¼Œå› ä¸ºæ²¡æœ‰åŠ /ï¼Œè®¿é—®æˆlocalhostï¼Œä¸æ˜¯192.168.164.129ï¼Œ==åŠ /ä¼šåš301==æ°¸ä¹…é‡å®šå‘ï¼Œè®¿é—®æˆåŠŸ")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112182257216.png",alt:"image-20211218215007222"}})]),t._v(" "),n("p",[t._v("âœ”ï¸==server_name_in_redirect==ï¼šæ§åˆ¶æ˜¯å¦è‡ªåŠ¨åŠ /ï¼Œnginx0.8.48ä¹‹å‰ç‰ˆæœ¬é»˜è®¤æ²¡è‡ªåŠ¨åŠ ï¼Œå³onï¼Œä¹‹åç‰ˆæœ¬æ”¹ä¸ºoffï¼Œè‡ªåŠ¨åŠ ")]),t._v(" "),n("div",{staticClass:"language-powershell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-powershell"}},[n("code",[t._v("    server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen 8083"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#å¼€å¯ä¸è‡ªåŠ¨æœ«å°¾åŠ /")]),t._v("\n        server_name_in_redirect on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("luo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                root html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                index index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é…ç½®è®©ä»–è‡ªåŠ¨åŠ /")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("d "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request_filename")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#æ¯ä¸€ä¸ªå‚æ•°åé¢æƒ³ä½¿ç”¨ï¼Œå¾—åŠ ()ï¼ŒåŠ ([^/])æ˜¯å› ä¸ºåé¢æ²¡æœ‰/æ‰åŠ ï¼Œæœ‰å°±åŒ¹é…å¤±è´¥")]),t._v("\n                        rewrite ^"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("^"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("$ http:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),t._v(":"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$server_port")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"åˆå¹¶ç›®å½•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åˆå¹¶ç›®å½•"}},[t._v("#")]),t._v(" åˆå¹¶ç›®å½•")]),t._v(" "),n("p",[t._v("âœ”ï¸å¿«é€Ÿåˆ›å»ºindex.html")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202112182256017.png",alt:"image-20211218215002294"}})]),t._v(" "),n("p",[t._v("è®¿é—®http://192.168.164.129/server/11/22/33/44/20.htmlï¼Œå¤ªé•¿ï¼Œä¸åˆ©äºSEOæœç´¢å¼•æ“ä¼˜åŒ–")]),t._v(" "),n("div",{staticClass:"language-powershell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-powershell"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#åˆå¹¶ç›®å½•")]),t._v("\n    server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen 8085"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                root html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                index index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#\\.htmlä¸­çš„\\.æ˜¯è½¬ä¹‰.")]),t._v("\n                rewrite ^"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("server-"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("0-9"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("0-9"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("0-9"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("0-9"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("0-9"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\\"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html$ "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("server/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$3")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$4")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("ä¼˜åŒ–å¯ä»¥ç›´æ¥è®¿é—®http://192.168.164.129/server/11-22-33-44-20.html")]),t._v(" "),n("h3",{attrs:{id:"é˜²ç›—é“¾"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#é˜²ç›—é“¾"}},[t._v("#")]),t._v(" é˜²ç›—é“¾")]),t._v(" "),n("blockquote",[n("p",[t._v("ä½¿ç”¨rewriteç»™ä¸ªå›¾ç‰‡å‹å¥½æç¤º")])]),t._v(" "),n("p",[t._v("âœ”ï¸æ³¨æ„ï¼š==ä¸€èˆ¬rewriteåé¢åœ°å€å¼€å¤´è¦åŠ /==ï¼Œé™¤éæ˜¯http://å¼€å¤´")]),t._v(" "),n("p",[n("img",{attrs:{src:s(830),alt:"image-20211218214957203"}})]),t._v(" "),n("div",{staticClass:"language-powershell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-powershell"}},[n("code",[t._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#é˜²ç›—é“¾é—®é¢˜")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("images "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                valid_referers none blocked www"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("baidu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$invalid_referer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#return 403;")]),t._v("\n                        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#å‹å¥½æç¤ºè·³è½¬")]),t._v("\n                        rewrite ^"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("images/daotu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jpg "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                root html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h1",{attrs:{id:"nginxåå‘ä»£ç†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxåå‘ä»£ç†"}},[t._v("#")]),t._v(" nginxåå‘ä»£ç†")]),t._v(" "),n("h2",{attrs:{id:"nginxåå‘ä»£ç†æ¦‚è¿°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxåå‘ä»£ç†æ¦‚è¿°"}},[t._v("#")]),t._v(" nginxåå‘ä»£ç†æ¦‚è¿°")]),t._v(" "),n("blockquote",[n("p",[t._v("åå‘ä»£ç†ï¼šæœåŠ¡ç«¯")]),t._v(" "),n("p",[t._v("æ­£å‘ä»£ç†ï¼šå®¢æˆ·ç«¯ï¼ˆä¿æŠ¤å®¢æˆ·ï¼‰")])]),t._v(" "),n("p",[t._v("âœ”ï¸æ­£å‘ä»£ç†æ¡ˆä¾‹ï¼š")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("ä»£ç†æœåŠ¡å™¨è®¾ç½®ï¼š")]),t._v(" "),n("div",{staticClass:"language-powershell extra-class"},[n("pre",{pre:!0,attrs:{class:"language-powershell"}},[n("code",[t._v("server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen  82"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        resolver 8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                proxy_pass http:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request_uri")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201252141033.png",alt:"image-20220125213023782"}})])]),t._v(" "),n("li",[n("p",[t._v("å®¢æˆ·ç«¯é…ç½®ä»£ç†æœåŠ¡å™¨")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201252139807.png",alt:"image-20220125213944225"}})])])]),t._v(" "),n("h2",{attrs:{id:"nginxåå‘ä»£ç†çš„é…ç½®è¯­æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxåå‘ä»£ç†çš„é…ç½®è¯­æ³•"}},[t._v("#")]),t._v(" nginxåå‘ä»£ç†çš„é…ç½®è¯­æ³•")]),t._v(" "),n("blockquote",[n("p",[t._v("ngx_http_proxy_moduleï¼Œå®‰è£…nginxè‡ªåŠ¨è£…å¥½")])]),t._v(" "),n("h3",{attrs:{id:"proxy-pass"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-pass"}},[t._v("#")]),t._v(" proxy_pass")]),t._v(" "),n("blockquote",[n("p",[t._v("è®¾ç½®ä»£ç†æœåŠ¡å™¨åœ°å€ï¼Œä½ç½®location")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201252201039.png",alt:"image-20220125212957953"}})]),t._v(" "),n("h3",{attrs:{id:"proxy-set-header"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-set-header"}},[t._v("#")]),t._v(" proxy_set_header")]),t._v(" "),n("blockquote",[n("p",[t._v("æ›´æ”¹æœåŠ¡å™¨æ¥æ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚çš„è¯·æ±‚å¤´ä¿¡æ¯ï¼Œä»£ç†å°†å®¢æˆ·çš„å¤´ä¿¡æ¯ä¿®æ”¹åå†ç»™æœåŠ¡å™¨")])]),t._v(" "),n("h3",{attrs:{id:"proxy-redirect"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-redirect"}},[t._v("#")]),t._v(" proxy_redirect")]),t._v(" "),n("blockquote",[n("p",[t._v("é‡ç½®å¤´ä¿¡æ¯ä¸­çš„locationå’Œrefresh")])]),t._v(" "),n("h2",{attrs:{id:"nginxåå‘ä»£ç†å®æˆ˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxåå‘ä»£ç†å®æˆ˜"}},[t._v("#")]),t._v(" Nginxåå‘ä»£ç†å®æˆ˜")]),t._v(" "),n("ul",[n("li",[t._v("æœåŠ¡å™¨å­˜åœ¨ä¸¤ç§æƒ…å†µ\n"),n("ul",[n("li",[t._v("å†…å®¹ä¸ä¸€æ ·\n"),n("ul",[n("li",[t._v("æ ¹æ®ç”¨æˆ·è¯·æ±‚åˆ†å‘åˆ°ä¸åŒæœåŠ¡å™¨")])])]),t._v(" "),n("li",[t._v("å†…å®¹ä¸€æ ·\n"),n("ul",[n("li",[t._v("SSL")])])])])])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201260858890.png",alt:"image-20220126085803214"}})]),t._v(" "),n("div",{staticClass:"language-SAS extra-class"},[n("pre",{pre:!0,attrs:{class:"language-sas"}},[n("code",[t._v("ä»£ç†æœåŠ¡å™¨\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen          "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8082")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name     localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("server1 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                proxy_pass http:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200.146")]),t._v(":"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9001")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("server2 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                proxy_pass http:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200.146")]),t._v(":"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9002")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("server3 "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                proxy_pass http:"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200.146")]),t._v(":"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9003")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\næœåŠ¡ç«¯\nserver1\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen          "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9001")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name     localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        default_type text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>192.168.200.146:9001</h1>'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nserver2\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen          "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9002")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name     localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        default_type text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>192.168.200.146:9002</h1>'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\nserver3\nserver "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen          "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("9003")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name     localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        default_type text"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<h1>192.168.200.146:9003</h1>'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"nginxçš„å®‰å…¨æ§åˆ¶"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxçš„å®‰å…¨æ§åˆ¶"}},[t._v("#")]),t._v(" Nginxçš„å®‰å…¨æ§åˆ¶")]),t._v(" "),n("blockquote",[n("p",[t._v("å®‰å…¨éš”ç¦»ï¼šè®¾ç½®é˜²ç«å¢™ï¼Œä»…ç•™ä¸€ä¸ªå…¥å£ç»™ä»£ç†æœåŠ¡å™¨")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201260919113.png",alt:"image-20220126091925076"}})]),t._v(" "),n("h3",{attrs:{id:"å¦‚ä½•ä½¿ç”¨sslå¯¹æµé‡è¿›è¡ŒåŠ å¯†"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¦‚ä½•ä½¿ç”¨sslå¯¹æµé‡è¿›è¡ŒåŠ å¯†"}},[t._v("#")]),t._v(" å¦‚ä½•ä½¿ç”¨SSLå¯¹æµé‡è¿›è¡ŒåŠ å¯†")]),t._v(" "),n("blockquote",[n("p",[t._v("httpsï¼šæœ‰SSLå¤–å£³çš„http")])]),t._v(" "),n("ul",[n("li",[n("p",[t._v("åŸç†ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("ç»ç”±HTTPè¿›è¡Œé€šä¿¡")]),t._v(" "),n("li",[t._v("åˆ©ç”¨SSL/TLSå»ºç«‹å…¨é€šä¿¡\n"),n("ul",[n("li",[t._v("SSLï¼šå®‰å…¨å¥—æ¥å±‚")]),t._v(" "),n("li",[t._v("TLSï¼šä¼ è¾“å±‚å®‰å…¨")])])])])]),t._v(" "),n("li",[n("p",[t._v("æ€»ç»“ï¼š")]),t._v(" "),n("blockquote",[n("p",[t._v("httpsï¼šåŠ å¯†ä¼ è¾“ï¼Œç›¸å½“äºhttp+sslï¼Œé˜²æ­¢æµé‡åŠ«æŒ")])])])]),t._v(" "),n("h4",{attrs:{id:"nginxæ·»åŠ sslçš„æ”¯æŒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxæ·»åŠ sslçš„æ”¯æŒ"}},[t._v("#")]),t._v(" nginxæ·»åŠ SSLçš„æ”¯æŒ")]),t._v(" "),n("blockquote",[n("p",[t._v("nginxä½¿ç”¨æ¡ä»¶ï¼š--with-http-ssl_module+OpenSSL")])]),t._v(" "),n("p",[t._v("æ·»åŠ æ¨¡å—")]),t._v(" "),n("ol",[n("li",[t._v("å°†/sbin/nginxå¤‡ä»½")]),t._v(" "),n("li",[t._v("==nginx -V==ï¼šè·å–nginxçš„é…ç½®ä¿¡æ¯")]),t._v(" "),n("li",[t._v("åœ¨nginxçš„å®‰è£…æºç ç›®å½•ä¸‹è¿›è¡Œï¼š==./configure è·å–åˆ°çš„ä¿¡æ¯ --with-http_ssl_module==")]),t._v(" "),n("li",[t._v("==make==ï¼šç¼–è¯‘")]),t._v(" "),n("li",[t._v("æ‹·è´objsçš„nginxåˆ°/usr/local/nginx/sbin")]),t._v(" "),n("li",[t._v("==make upgrade==ï¼šå¹³æ»‘å‡çº§ï¼Œä¸åœæœº")])]),t._v(" "),n("h4",{attrs:{id:"nginxçš„sslç›¸å…³æŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxçš„sslç›¸å…³æŒ‡ä»¤"}},[t._v("#")]),t._v(" nginxçš„SSLç›¸å…³æŒ‡ä»¤")]),t._v(" "),n("ol",[n("li",[t._v("listen ï¼š443 sslï¼Œé»˜è®¤å ç”¨443ç«¯å£")]),t._v(" "),n("li",[t._v("ssl_certificateï¼šPEMæ ¼å¼çš„è¯ä¹¦è·¯å¾„")]),t._v(" "),n("li",[t._v("ssl_certificate_keyï¼šPEM secret keyè·¯å¾„")]),t._v(" "),n("li",[t._v("ssl_sesion_cacheï¼šSSLä¼šè¯çš„ç¼“å­˜\n"),n("ul",[n("li",[t._v("offï¼šç¦ç”¨")]),t._v(" "),n("li",[t._v("noneï¼šç¦ç”¨")]),t._v(" "),n("li",[t._v("builtinï¼šä»…åœ¨ä¸€ä¸ªå·¥ä½œè¿›ç¨‹ä½¿ç”¨")]),t._v(" "),n("li",[t._v("sharedï¼šæ‰€æœ‰å·¥ä½œè¿›ç¨‹å…±äº«ç¼“å­˜")])])]),t._v(" "),n("li",[t._v("ssl_session_timeoutï¼šç¼“å­˜æ—¶é—´")]),t._v(" "),n("li",[t._v("ssl_ciphersï¼šå¯†ç æ ¼å¼è¦æ±‚")]),t._v(" "),n("li",[t._v("ssl_prefer_server_ciphersï¼šæœåŠ¡å™¨å¯†ç æ˜¯å¦ä¼˜å…ˆå®¢æˆ·ç«¯å¯†ç ")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201261418247.png",alt:"image-20220126141839863"}})]),t._v(" "),n("h4",{attrs:{id:"ç”Ÿæˆè¯ä¹¦"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç”Ÿæˆè¯ä¹¦"}},[t._v("#")]),t._v(" ç”Ÿæˆè¯ä¹¦")]),t._v(" "),n("p",[t._v("âœ”ï¸æ–¹æ³•ä¸€ï¼šé˜¿é‡Œäº‘/è…¾è®¯äº‘ç­‰ç¬¬ä¸‰æ–¹æœåŠ¡è´­ä¹°")]),t._v(" "),n("p",[t._v("âœ”ï¸æ–¹æ³•äºŒï¼šopensslç”Ÿæˆè¯ä¹¦")]),t._v(" "),n("ol",[n("li",[t._v("æŸ¥çœ‹æ˜¯å¦å®‰è£…opensslï¼š==openssl version==")]),t._v(" "),n("li",[t._v("mkdir /root/cert")]),t._v(" "),n("li",[t._v("cd /root/cert")]),t._v(" "),n("li",[t._v("openssl genrsa -des3 -out server.key 1024")]),t._v(" "),n("li",[t._v("openssl req -new -key server.key -out server.csr")]),t._v(" "),n("li",[t._v("cp server.key server.key.org")]),t._v(" "),n("li",[t._v("openssl rsa -in server.key.org -out server.key")]),t._v(" "),n("li",[t._v("openssl x509 -req -days 365 -in server.csr -signkey server.key -out server.crt")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201261736205.png",alt:"image-20220126144043244"}})]),t._v(" "),n("h4",{attrs:{id:"å¼€å¯sslå®ä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å¼€å¯sslå®ä¾‹"}},[t._v("#")]),t._v(" å¼€å¯SSLå®ä¾‹")]),t._v(" "),n("div",{staticClass:"language-less extra-class"},[n("pre",{pre:!0,attrs:{class:"language-less"}},[n("code",[n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("server")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen       443 ssl"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    server_name  localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    ssl_certificate      "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("root"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("cert"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("server.crt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_certificate_key  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("root"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("cert"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("server.key"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    ssl_session_cache    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("shared")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("SSL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("1m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_session_timeout  5m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    ssl_ciphers  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("HIGH")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("!"),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("aNULL")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("!MD5"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ssl_prefer_server_ciphers  on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("location /")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        root   html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        index  index.html index.htm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"åå‘ä»£ç†ç³»ç»Ÿè°ƒä¼˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åå‘ä»£ç†ç³»ç»Ÿè°ƒä¼˜"}},[t._v("#")]),t._v(" åå‘ä»£ç†ç³»ç»Ÿè°ƒä¼˜")]),t._v(" "),n("blockquote",[n("p",[t._v("ç¼“å†²å’Œç¼“å­˜")])]),t._v(" "),n("ul",[n("li",[t._v("ç›¸åŒç‚¹ï¼š\n"),n("ul",[n("li",[t._v("IOååæ•ˆç‡ï¼Œæå‡nginxä»£ç†çš„æ€§èƒ½")])])]),t._v(" "),n("li",[t._v("ä¸åŒç‚¹ï¼š\n"),n("ul",[n("li",[t._v("ç¼“å†²ï¼šè§£å†³ä¸åŒè®¾å¤‡ä¹‹é—´==æ•°æ®ä¼ é€’==é€Ÿåº¦å¯¼è‡´æ€§èƒ½é—®é¢˜")]),t._v(" "),n("li",[t._v("ç¼“å­˜ï¼šå¤‡ä»½ï¼Œå®¢æˆ·ç«¯è·å–ç›¸åŒæ•°æ®ï¼Œä»ä»£ç†æœåŠ¡å™¨è·å–ï¼Œæ•ˆç‡é«˜")])])])]),t._v(" "),n("p",[t._v("âœ”ï¸ç›¸å…³æŒ‡ä»¤ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("proxy_bufferingï¼šå¼€å¯æˆ–è€…å…³é—­ä»£ç†æœåŠ¡å™¨çš„ç¼“å†²åŒº")]),t._v(" "),n("li",[t._v("proxy_buffersï¼š==ç¼“å­˜åŒº==çš„ä¸ªæ•°å’Œå¤§å°")]),t._v(" "),n("li",[t._v("proxy_buffer_sizeï¼šä¿æŒå’Œproxy_buffersä¸­çš„sizeä¸€è‡´å³å¯")]),t._v(" "),n("li",[t._v("proxy_busy_buffers_sizeï¼šå¤„äºBUSYçŠ¶æ€çš„ç¼“å†²æ€»å¤§å°")]),t._v(" "),n("li",[t._v("proxy_temp_pathï¼šç¼“å†²åŒºæ»¡ï¼Œä¸´æ—¶å­˜æ”¾åœ¨ç£ç›˜æ–‡ä»¶ä¸Š")]),t._v(" "),n("li",[t._v("proxy_temp_file_write_sizeï¼šç£ç›˜ç¼“å†²æ–‡ä»¶çš„å¤§å°")])]),t._v(" "),n("p",[t._v("âœ”ï¸é€šç”¨ç½‘ç«™çš„é…ç½®")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("proxy_buffering on;\nproxy_buffer_size 4 32k;\nproxy_busy_buffers_size 64k;\nproxy_temp_file_write_size 64k;\n")])])]),n("h1",{attrs:{id:"nginxè´Ÿè½½å‡è¡¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxè´Ÿè½½å‡è¡¡"}},[t._v("#")]),t._v(" nginxè´Ÿè½½å‡è¡¡")]),t._v(" "),n("h2",{attrs:{id:"è´Ÿè½½å‡è¡¡æ¦‚è¿°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡æ¦‚è¿°"}},[t._v("#")]),t._v(" è´Ÿè½½å‡è¡¡æ¦‚è¿°")]),t._v(" "),n("blockquote",[n("p",[t._v("å°†å®¢æˆ·è¯·æ±‚å‡è¡¡å‘ç»™æœåŠ¡å™¨")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201262154272.png",alt:"image-20220126215401228"}})]),t._v(" "),n("h2",{attrs:{id:"è´Ÿè½½å‡è¡¡çš„åŸç†åŠå¤„ç†æµç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡çš„åŸç†åŠå¤„ç†æµç¨‹"}},[t._v("#")]),t._v(" è´Ÿè½½å‡è¡¡çš„åŸç†åŠå¤„ç†æµç¨‹")]),t._v(" "),n("blockquote",[n("p",[t._v("çºµå‘æ‰©å±•ï¼šç¡¬ä»¶èƒ½åŠ›")]),t._v(" "),n("p",[t._v("æ¨ªå‘æ‰©å±•ï¼šæ·»åŠ æœåŠ¡å™¨")])]),t._v(" "),n("p",[t._v("âœ”ï¸ä¸¤ä¸ªè§’è‰²ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("åº”ç”¨é›†ç¾¤ï¼šåŒä¸€åº”ç”¨éƒ¨ç½²å¤šå°æœºå™¨")]),t._v(" "),n("li",[t._v("è´Ÿè½½å‡è¡¡å™¨ï¼šé€šè¿‡ç®—æ³•ï¼Œåˆ†å‘åˆ°é›†ç¾¤ä¸­çš„ä¸€ä¸ªæœåŠ¡å™¨ï¼ˆæœºå™¨ï¼‰")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201262158968.png",alt:"image-20220126215821538"}})]),t._v(" "),n("h3",{attrs:{id:"è´Ÿè½½å‡è¡¡çš„ä½œç”¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡çš„ä½œç”¨"}},[t._v("#")]),t._v(" è´Ÿè½½å‡è¡¡çš„ä½œç”¨")]),t._v(" "),n("ol",[n("li",[t._v("é«˜å¹¶å‘æ€§")]),t._v(" "),n("li",[t._v("é«˜å¯ç”¨æ€§ï¼Œæ•…éšœè½¬ç§»")]),t._v(" "),n("li",[t._v("å¯æ‰©å±•æ€§ï¼Œæ·»åŠ æœåŠ¡å™¨")]),t._v(" "),n("li",[t._v("å®‰å…¨æ€§ï¼Œè´Ÿè½½å‡è¡¡å™¨ä¸Šè¿›è¡Œè¿‡æ»¤")])]),t._v(" "),n("h2",{attrs:{id:"è´Ÿè½½å‡è¡¡å¸¸ç”¨çš„å¤„ç†æ–¹å¼"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡å¸¸ç”¨çš„å¤„ç†æ–¹å¼"}},[t._v("#")]),t._v(" è´Ÿè½½å‡è¡¡å¸¸ç”¨çš„å¤„ç†æ–¹å¼")]),t._v(" "),n("h3",{attrs:{id:"æ–¹å¼ä¸€-ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹å¼ä¸€-ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©"}},[t._v("#")]),t._v(" æ–¹å¼ä¸€ï¼šç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©")]),t._v(" "),n("blockquote",[n("p",[t._v("ç½‘ç«™æä¾›ä¸åŒçº¿è·¯ã€ä¸åŒæœåŠ¡å™¨é“¾æ¥æ–¹å¼ï¼Œç”¨æˆ·é€‰æ‹©")])]),t._v(" "),n("p",[n("img",{attrs:{src:s(831),alt:"image-20220126220723859"}})]),t._v(" "),n("h3",{attrs:{id:"æ–¹å¼äºŒ-dnsè½®è¯¢æ–¹å¼"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹å¼äºŒ-dnsè½®è¯¢æ–¹å¼"}},[t._v("#")]),t._v(" æ–¹å¼äºŒï¼šDNSè½®è¯¢æ–¹å¼")]),t._v(" "),n("blockquote",[n("p",[t._v("åŸŸåå’ŒIP")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201262214122.png",alt:"image-20220126221408993"}})]),t._v(" "),n("ul",[n("li",[t._v("æ¸…é™¤æœ¬åœ°çš„dnsç¼“å­˜ï¼šipconfig/flushdns")]),t._v(" "),n("li",[t._v("ç¼ºç‚¹ï¼š\n"),n("ul",[n("li",[t._v("å¯é æ€§ä½")]),t._v(" "),n("li",[t._v("è´Ÿè½½å‡è¡¡ä¸å‡è¡¡ï¼ˆè½®è¯¢ï¼‰")])])])]),t._v(" "),n("h3",{attrs:{id:"æ–¹å¼ä¸‰-å››-ä¸ƒå±‚è´Ÿè½½å‡è¡¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹å¼ä¸‰-å››-ä¸ƒå±‚è´Ÿè½½å‡è¡¡"}},[t._v("#")]),t._v(" æ–¹å¼ä¸‰ï¼šå››/ä¸ƒå±‚è´Ÿè½½å‡è¡¡")]),t._v(" "),n("blockquote",[n("p",[t._v("OSIï¼ˆopen system interconnectionï¼‰ï¼šå¼€æ”¾å¼ç³»ç»Ÿäº’è”æ¨¡å‹ï¼Œç½‘ç»œä½“ç³»ç»“æ„")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201272007397.png",alt:"image-20220127200737911"}})]),t._v(" "),n("ol",[n("li",[t._v("åº”ç”¨å±‚ï¼šæä¾›ç½‘ç»œç»™åº”ç”¨")]),t._v(" "),n("li",[t._v("è¡¨ç¤ºå±‚ï¼šæ•°æ®æ ¼å¼åŒ–ã€ç¼–ç ã€åŠ å¯†ã€å‹ç¼©ç­‰")]),t._v(" "),n("li",[t._v("ä¼šè¯å±‚ï¼šä¼šè¯è¿æ¥")]),t._v(" "),n("li",[t._v("ä¼ è¾“å±‚ï¼šç«¯åˆ°ç«¯è¿æ¥ï¼Œä¾‹TCP/UDP")]),t._v(" "),n("li",[t._v("ç½‘ç»œå±‚ï¼šIPå¯»å€å’Œè·¯ç”±é€‰æ‹©")]),t._v(" "),n("li",[t._v("æ•°æ®é“¾è·¯å±‚ï¼šæ§åˆ¶ç½‘ç»œå±‚å’Œç‰©ç†å±‚çš„é€šä¿¡")]),t._v(" "),n("li",[t._v("ç‰©ç†å±‚ï¼šæ¯”ç‰¹æµä¼ è¾“")])]),t._v(" "),n("p",[t._v("âœ”ï¸å››å±‚è´Ÿè½½ï¼šOSIä¸­çš„ä¼ è¾“å±‚ï¼ŒåŸºäºIP+PROTï¼ˆportï¼‰çš„è´Ÿè½½å‡è¡¡")]),t._v(" "),n("ul",[n("li",[t._v("ç¡¬ä»¶ï¼šF5ï¼ˆåå‡ wï¼‰ã€BIG-IPã€Radwareç­‰")]),t._v(" "),n("li",[t._v("è½¯ä»¶ï¼šLVSã€Nginxã€Hayproxyç­‰")])]),t._v(" "),n("p",[t._v("âœ”ï¸ä¸ƒå±‚è´Ÿè½½ï¼šOSIä¸­çš„åº”ç”¨å±‚ï¼ŒåŸºäºè™šæ‹Ÿçš„URLæˆ–ä¸»æœºIPçš„è´Ÿè½½å‡è¡¡")]),t._v(" "),n("ul",[n("li",[t._v("è½¯ä»¶ï¼šnignxã€Hayproxyç­‰")])]),t._v(" "),n("p",[t._v("âœ”ï¸åŒºåˆ«ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("æ•°æ®ï¼šå››å±‚åº•å±‚åˆ†ï¼ˆæ•ˆç‡é«˜ï¼‰ï¼Œä¸ƒå±‚æœ€é¡¶ç«¯åˆ†å‘")]),t._v(" "),n("li",[t._v("åŸŸåï¼šä¸ƒå±‚è¯†åˆ«åŸŸåï¼Œå››å±‚ä¸è¯†åˆ«")])]),t._v(" "),n("p",[t._v("âœ”ï¸å®é™…ä½¿ç”¨ï¼šå››å±‚è´Ÿè½½ï¼ˆLVSï¼‰+ä¸ƒå±‚è´Ÿè½½ï¼ˆNginxï¼‰")]),t._v(" "),n("h2",{attrs:{id:"nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡"}},[t._v("#")]),t._v(" nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡")]),t._v(" "),n("blockquote",[n("p",[t._v("æ¨¡å—ï¼šproxy_pass")])]),t._v(" "),n("h3",{attrs:{id:"nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤"}},[t._v("#")]),t._v(" nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤")]),t._v(" "),n("h4",{attrs:{id:"upstreamæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#upstreamæŒ‡ä»¤"}},[t._v("#")]),t._v(" upstreamæŒ‡ä»¤")]),t._v(" "),n("blockquote",[n("p",[t._v("å®šä¹‰ä¸€ç»„æœåŠ¡å™¨ï¼Œç›‘å¬ä¸åŒæœåŠ¡å™¨ï¼ˆTCPã€Unix socketç­‰ï¼‰")])]),t._v(" "),n("h4",{attrs:{id:"serveræŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#serveræŒ‡ä»¤"}},[t._v("#")]),t._v(" serveræŒ‡ä»¤")]),t._v(" "),n("blockquote",[n("p",[t._v("æŒ‡å®šæœåŠ¡å™¨çš„åç§°")]),t._v(" "),n("ul",[n("li",[t._v("åŸŸåã€IPã€ç«¯å£æˆ–è€…unix socket")])])]),t._v(" "),n("h3",{attrs:{id:"nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„å®ç°æµç¨‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„å®ç°æµç¨‹"}},[t._v("#")]),t._v(" nginxä¸ƒå±‚è´Ÿè½½å‡è¡¡çš„å®ç°æµç¨‹")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201280823433.png",alt:"image-20220128082356409"}})]),t._v(" "),n("div",{staticClass:"language-yaml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[t._v("    upstream backend"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ç™»å½•åï¼Œè®¿é—®çš„è¿˜æ˜¯éœ€è¦ç™»å½•çš„æœåŠ¡å™¨")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ip_hash;")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è¯·æ±‚ç»™è¿æ¥æ¬¡æ•°è¾ƒå°‘çš„æœåŠ¡å™¨")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#least_conn;")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#è¯·æ±‚èµ„æºï¼Œæœ‰ç¼“å­˜çš„æœåŠ¡å™¨")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#hash $request_uri;")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#fairï¼šæ™ºèƒ½åŒ–æŠŠè¯·æ±‚ç»™éœ€è¦çš„æœåŠ¡å™¨")]),t._v("\n        fair;\n        server 192.168.164.129"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("9001;\n        server 192.168.164.129"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("9002;\n        server 192.168.164.129"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("9003;\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    server"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen 8083;\n        server_name localhost;\n        location /"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \tproxy_pass http"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//backend;\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"è´Ÿè½½å‡è¡¡çŠ¶æ€"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡çŠ¶æ€"}},[t._v("#")]),t._v(" è´Ÿè½½å‡è¡¡çŠ¶æ€")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("çŠ¶æ€")]),t._v(" "),n("th",[t._v("æ¦‚è¿°")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("down")]),t._v(" "),n("td",[t._v("ä¸å‚ä¸")])]),t._v(" "),n("tr",[n("td",[t._v("backup")]),t._v(" "),n("td",[t._v("å¤‡ä»½")])]),t._v(" "),n("tr",[n("td",[t._v("max_fails")]),t._v(" "),n("td",[t._v("è¯·æ±‚å¤±è´¥çš„æ¬¡æ•°")])]),t._v(" "),n("tr",[n("td",[t._v("fail_timeouts")]),t._v(" "),n("td",[t._v("æœ€å¤§å¤±è´¥æ¬¡æ•°åï¼ŒæœåŠ¡æš‚åœæ—¶é—´")])]),t._v(" "),n("tr",[n("td",[t._v("max_conns")]),t._v(" "),n("td",[t._v("æœ€å¤§è¿æ¥æ•°")])])])]),t._v(" "),n("h4",{attrs:{id:"down"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#down"}},[t._v("#")]),t._v(" down")]),t._v(" "),n("blockquote",[n("p",[t._v("æœåŠ¡å™¨ä¸å¯ç”¨ï¼Œåœæœºç»´æŠ¤")])]),t._v(" "),n("h4",{attrs:{id:"backup"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#backup"}},[t._v("#")]),t._v(" backup")]),t._v(" "),n("blockquote",[n("p",[t._v("ä¸»æœåŠ¡å™¨ä¸å¯ç”¨")])]),t._v(" "),n("h4",{attrs:{id:"max-conns"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#max-conns"}},[t._v("#")]),t._v(" max_conns")]),t._v(" "),n("blockquote",[n("p",[t._v("æœ€å¤§è¯·æ±‚æ•°ï¼Œé˜²æ­¢æœåŠ¡å™¨å‹è·¨")])]),t._v(" "),n("h4",{attrs:{id:"max-failså’Œfail-timeout"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#max-failså’Œfail-timeout"}},[t._v("#")]),t._v(" max_failså’Œfail_timeout")]),t._v(" "),n("blockquote",[n("p",[t._v("è¯·æ±‚å¤±è´¥æ¬¡æ•°ï¼Œæ¬¡æ•°åæœåŠ¡æš‚åœæ—¶é—´")])]),t._v(" "),n("h3",{attrs:{id:"è´Ÿè½½å‡è¡¡ç­–ç•¥"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡ç­–ç•¥"}},[t._v("#")]),t._v(" è´Ÿè½½å‡è¡¡ç­–ç•¥")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("ç®—æ³•")]),t._v(" "),n("th",[t._v("è¯´æ˜")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("è½®è¯¢")]),t._v(" "),n("td",[t._v("é»˜è®¤")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("weight")]),t._v(" "),n("td",[t._v("æƒé‡")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("ip_hash")]),t._v(" "),n("td",[t._v("ip")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("least_conn")]),t._v(" "),n("td",[t._v("æœ€å°‘è¿æ¥")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("url_hash")]),t._v(" "),n("td",[t._v("URL")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("fair")]),t._v(" "),n("td",[t._v("å“åº”æ—¶é—´")])])])]),t._v(" "),n("h4",{attrs:{id:"è½®è¯¢"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è½®è¯¢"}},[t._v("#")]),t._v(" è½®è¯¢")]),t._v(" "),n("blockquote",[n("p",[t._v("å¹³å‡åˆ†é…è¯·æ±‚ï¼Œæ¦‚ç‡ä¸€æ ·")])]),t._v(" "),n("h4",{attrs:{id:"weightã€åŠ æƒè½®è¯¢ã€‘"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#weightã€åŠ æƒè½®è¯¢ã€‘"}},[t._v("#")]),t._v(" weightã€åŠ æƒè½®è¯¢ã€‘")]),t._v(" "),n("blockquote",[n("p",[t._v("æœ‰æ¯”ä¾‹åˆ†é…è¯·æ±‚ï¼Œæ¦‚ç‡ä¸ä¸€æ ·")])]),t._v(" "),n("h4",{attrs:{id:"ip-hash"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ip-hash"}},[t._v("#")]),t._v(" ip_hash")]),t._v(" "),n("blockquote",[n("p",[t._v("ç”¨æˆ·ç™»å½•ï¼Œä¿è¯ä¸‹æ¬¡ç™»å½•è¿˜æ˜¯åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œå› ä¸ºç™»å½•ä¿¡æ¯åœ¨è¯¥æœåŠ¡å™¨")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201280837147.png",alt:"image-20220126205513751"}})]),t._v(" "),n("h4",{attrs:{id:"least-conn"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#least-conn"}},[t._v("#")]),t._v(" least_conn")]),t._v(" "),n("blockquote",[n("p",[t._v("æŠŠè¯·æ±‚ç»™è¿æ¥å°‘çš„")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201280839751.png",alt:"image-20220128083902712"}})]),t._v(" "),n("h4",{attrs:{id:"url-hash"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#url-hash"}},[t._v("#")]),t._v(" url_hash")]),t._v(" "),n("blockquote",[n("p",[t._v("è¯·æ±‚èµ„æºï¼Œèµ„æºç¼“å­˜åœ¨æœåŠ¡å™¨ï¼Œä¸‹æ¬¡è¯·æ±‚ç›¸åŒèµ„æºï¼Œä¿è¯å»åŒä¸€ä¸ªæœåŠ¡å™¨ï¼Œå› ä¸ºæœåŠ¡å™¨æœ‰èµ„æºçš„ç¼“å­˜")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201280839544.png",alt:"image-20220128083945142"}})]),t._v(" "),n("h4",{attrs:{id:"fair"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#fair"}},[t._v("#")]),t._v(" fair")]),t._v(" "),n("blockquote",[n("p",[t._v("æ ¹æ®é¡µç å¤§å°ã€åŠ è½½æ—¶é—´é•¿çŸ­")]),t._v(" "),n("p",[t._v("æ·»åŠ nginx-upstream-fairæ¨¡å—")])]),t._v(" "),n("ol",[n("li",[n("p",[t._v("ä¸‹è½½åœ°å€ï¼šhttps://github.com/gnosek/nginx-upstream-fair")])]),t._v(" "),n("li",[n("p",[t._v("unzip nginx-upstream-fair-master.zip")])]),t._v(" "),n("li",[n("p",[t._v("./configure --add-module=/root/fair")])]),t._v(" "),n("li",[n("p",[t._v("make")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("æŠ¥é”™ï¼šå› ä¸ºngx_http_upstream_srv_confç¼ºå°‘default_port")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201281130763.png",alt:"image-20220128113037964"}})])]),t._v(" "),n("li",[n("p",[t._v("è§£å†³æ–¹æ¡ˆï¼š")]),t._v(" "),n("ul",[n("li",[t._v("nginxæºç srcç›®å½•ä¸‹ï¼švim src/htttp/ngx_http_upstream.h")]),t._v(" "),n("li",[t._v("æ‰¾ï¼šngx_http_upstream_srv_conf_s\n"),n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201281133352.png",alt:"image-20220128113321820"}})])])])])]),t._v(" "),n("li",[n("p",[t._v("make upgrade")])])]),t._v(" "),n("h3",{attrs:{id:"è´Ÿè½½å‡è¡¡æ¡ˆä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡æ¡ˆä¾‹"}},[t._v("#")]),t._v(" è´Ÿè½½å‡è¡¡æ¡ˆä¾‹")]),t._v(" "),n("h4",{attrs:{id:"å®ç°å¸¦æœ‰urlé‡å†™çš„è´Ÿè½½å‡è¡¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®ç°å¸¦æœ‰urlé‡å†™çš„è´Ÿè½½å‡è¡¡"}},[t._v("#")]),t._v(" å®ç°å¸¦æœ‰URLé‡å†™çš„è´Ÿè½½å‡è¡¡")]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#å…·æœ‰rewriteçš„è´Ÿè½½å‡è¡¡\n    server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen 8084"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("location /file/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            #é‡å†™åˆ°/serveråœ°å€\n            rewrite ^"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/file/.*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" /server/"),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" last"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#/serveråœ°å€\n        location /server/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            proxy_pass "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("http")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//backend;")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"nginxå››å±‚è´Ÿè½½å‡è¡¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxå››å±‚è´Ÿè½½å‡è¡¡"}},[t._v("#")]),t._v(" nginxå››å±‚è´Ÿè½½å‡è¡¡")]),t._v(" "),n("blockquote",[n("p",[t._v("å››å±‚è´Ÿè½½å‡è¡¡ï¼šstream=>upstream=>server")]),t._v(" "),n("p",[t._v("upstreamæ·»åŠ å¤šä¸ªåç«¯æœåŠ¡")])]),t._v(" "),n("h3",{attrs:{id:"æ·»åŠ streamæ¨¡å—çš„æ”¯æŒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ·»åŠ streamæ¨¡å—çš„æ”¯æŒ"}},[t._v("#")]),t._v(" æ·»åŠ streamæ¨¡å—çš„æ”¯æŒ")]),t._v(" "),n("blockquote",[n("p",[t._v("æ·»åŠ æ¨¡å—streamï¼š./configure ä¹‹å‰çš„é…ç½® --with-stream")])]),t._v(" "),n("h3",{attrs:{id:"nginxå››å±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxå››å±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤"}},[t._v("#")]),t._v(" nginxå››å±‚è´Ÿè½½å‡è¡¡çš„æŒ‡ä»¤")]),t._v(" "),n("h4",{attrs:{id:"streamæŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#streamæŒ‡ä»¤"}},[t._v("#")]),t._v(" streamæŒ‡ä»¤")]),t._v(" "),n("blockquote",[n("p",[t._v("å’ŒhttpæŒ‡ä»¤åŒçº§")])]),t._v(" "),n("h4",{attrs:{id:"upstreamæŒ‡ä»¤-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#upstreamæŒ‡ä»¤-2"}},[t._v("#")]),t._v(" upstreamæŒ‡ä»¤")]),t._v(" "),n("blockquote",[n("p",[t._v("å’Œhttpé‡Œçš„upstreamç±»ä¼¼")])]),t._v(" "),n("h3",{attrs:{id:"å››å±‚è´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å››å±‚è´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹"}},[t._v("#")]),t._v(" å››å±‚è´Ÿè½½å‡è¡¡çš„æ¡ˆä¾‹")]),t._v(" "),n("h4",{attrs:{id:"éœ€æ±‚åˆ†æ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éœ€æ±‚åˆ†æ"}},[t._v("#")]),t._v(" éœ€æ±‚åˆ†æ")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201281140392.png",alt:"image-20220128114039062"}})]),t._v(" "),n("p",[t._v("å®ç°æ­¥éª¤")]),t._v(" "),n("p",[t._v("âœ”ï¸RedisæœåŠ¡å™¨")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("å‡†å¤‡redisæœåŠ¡å™¨ï¼Œç«¯å£6379ï¼ˆé»˜è®¤ï¼‰ï¼Œ6378")])]),t._v(" "),n("li",[n("p",[t._v("tar -zxf redis-4.0.14.tar.gz")])]),t._v(" "),n("li",[n("p",[t._v("make PREFIX=/usr/local/redis/redis01 install")]),t._v(" "),n("ul",[n("li",[t._v("ç¼–è¯‘å’Œå®‰è£…")])])]),t._v(" "),n("li",[n("p",[t._v("cp redis.conf /usr/local/redis/redis01/bin")])]),t._v(" "),n("li",[n("p",[t._v("ä¿®æ”¹redis.confé…ç½®æ–‡ä»¶")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("/æœç´¢ï¼Œnä¸‹ä¸€ä¸ª")])]),t._v(" "),n("li",[n("p",[t._v("port 6379")])]),t._v(" "),n("li",[n("p",[t._v("daemonize yes")])])])]),t._v(" "),n("li",[n("p",[t._v("å¤åˆ¶redis01ä¸ºredis02")]),t._v(" "),n("ul",[n("li",[t._v("cd  /usr/local/redis")]),t._v(" "),n("li",[t._v("==cp -r redis01 redis02==")])])]),t._v(" "),n("li",[n("p",[t._v("å¯åŠ¨ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("åˆ‡æ¢åˆ°binï¼šcd bin")]),t._v(" "),n("li",[t._v("./redis-server ../redis.conf")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201281147898.png",alt:"image-20220128111647702"}})])])]),t._v(" "),n("p",[t._v("âœ”ï¸tomcatæœåŠ¡å™¨")]),t._v(" "),n("ol",[n("li",[t._v("tar -zxf apache-tomcat-8.5.56.tar.gz")]),t._v(" "),n("li",[t._v("cd apache-tomcat-8.5.56/bin")]),t._v(" "),n("li",[t._v("./startup")])]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#å››å±‚è´Ÿè½½å‡è¡¡ï¼šstream===>upstream===>server\nstream")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("upstream redisbackend")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        server 192.168.164."),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("129")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server 192.168.164."),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("129")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("6378"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("upstream tomcatbackend")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        server 192.168.164."),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("129")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8080"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#rediså››å±‚è´Ÿè½½å‡è¡¡\n    server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen 81"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_pass redisbackend"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#tomcatçš„å››å±‚è´Ÿè½½å‡è¡¡\n    server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen 82"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        proxy_pass tomcatbackend"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h1",{attrs:{id:"nginxç¼“å­˜é›†æˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxç¼“å­˜é›†æˆ"}},[t._v("#")]),t._v(" nginxç¼“å­˜é›†æˆ")]),t._v(" "),n("h2",{attrs:{id:"ç¼“å­˜çš„æ¦‚å¿µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¼“å­˜çš„æ¦‚å¿µ"}},[t._v("#")]),t._v(" ç¼“å­˜çš„æ¦‚å¿µ")]),t._v(" "),n("blockquote",[n("p",[t._v("æŠŠæ²¡æœ‰çš„æ•°æ®ç¼“å­˜ï¼Œä¸‹æ¬¡è®¿é—®é€Ÿåº¦æé«˜")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201281649326.png",alt:"image-20220128164941392"}})]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",{staticStyle:{"text-align":"left"}},[t._v("åœºæ™¯")]),t._v(" "),n("th",[t._v("ä½œç”¨")])])]),t._v(" "),n("tbody",[n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("ç£ç›˜ç¼“å­˜")]),t._v(" "),n("td",[t._v("å‡å°‘ç£ç›˜æ“ä½œ")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("æ•°æ®åº“ç¼“å­˜")]),t._v(" "),n("td",[t._v("å‡å°‘æ–‡ä»¶ç³»ç»ŸIOæ“ä½œ")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("åº”ç”¨ç¨‹åºç¼“å­˜")]),t._v(" "),n("td",[t._v("å‡å°‘å¯¹æ•°æ®åº“æŸ¥è¯¢")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("webæœåŠ¡å™¨ç¼“å­˜")]),t._v(" "),n("td",[t._v("å‡å°‘è¯·æ±‚æ¬¡æ•°")])]),t._v(" "),n("tr",[n("td",{staticStyle:{"text-align":"left"}},[t._v("æµè§ˆå™¨ç¼“å­˜")]),t._v(" "),n("td",[t._v("å‡å°‘åå°äº¤äº’æ¬¡æ•°")])])])]),t._v(" "),n("p",[t._v("âœ”ï¸ä¼˜ç‚¹ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("å‡å°‘æ•°æ®ä¼ è¾“ï¼ŒåŠ å¿«å“åº”ï¼Œæå‡ä½“éªŒ")]),t._v(" "),n("li",[t._v("å‡è½»æœåŠ¡å™¨å‹åŠ›")])]),t._v(" "),n("p",[t._v("âœ”ï¸ç¼ºç‚¹ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("æ•°æ®ä¸åŒæ­¥")]),t._v(" "),n("li",[t._v("å¢åŠ æˆæœ¬")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201281656975.png",alt:"image-20220128165634184"}})]),t._v(" "),n("p",[t._v("nginxä½œä¸ºwebç¼“å­˜æœåŠ¡å™¨ï¼Œæé«˜è®¿é—®çš„å“åº”é€Ÿåº¦")]),t._v(" "),n("h2",{attrs:{id:"nginxçš„webç¼“å­˜æœåŠ¡"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxçš„webç¼“å­˜æœåŠ¡"}},[t._v("#")]),t._v(" nginxçš„webç¼“å­˜æœåŠ¡")]),t._v(" "),n("blockquote",[n("p",[t._v("åŸç†ï¼šæŠŠâ€˜URLåŠç›¸å…³ç»„åˆä¸ºkeyï¼ŒMD5åŠ keyå¾—åˆ°ç›®å½•è·¯å¾„ï¼ŒæŠŠç¼“å­˜å†…å­˜ä¿å­˜åœ¨ç›®å½•")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201281658842.png",alt:"image-20220128165841163"}})]),t._v(" "),n("h2",{attrs:{id:"nginxç¼“å­˜è®¾ç½®çš„ç›¸å…³æŒ‡ä»¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxç¼“å­˜è®¾ç½®çš„ç›¸å…³æŒ‡ä»¤"}},[t._v("#")]),t._v(" nginxç¼“å­˜è®¾ç½®çš„ç›¸å…³æŒ‡ä»¤")]),t._v(" "),n("blockquote",[n("p",[t._v("æ¨¡å—ï¼šngx_http_proxy_module")])]),t._v(" "),n("h3",{attrs:{id:"proxy-cache-path"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-cache-path"}},[t._v("#")]),t._v(" proxy_cache_path")]),t._v(" "),n("blockquote",[n("p",[t._v("è®¾ç½®å­˜æ”¾ç¼“å­˜çš„åœ°å€")])]),t._v(" "),n("p",[t._v("âœ”ï¸å‚æ•°")]),t._v(" "),n("ul",[n("li",[t._v("pathï¼šç¼“å­˜åœ°å€")]),t._v(" "),n("li",[t._v("levelsï¼šç›®å½•å±‚çº§")]),t._v(" "),n("li",[t._v("keys_zoneï¼šç›®å½•åç§°å’Œå¤§å°")]),t._v(" "),n("li",[t._v("inactiveï¼šå¤šä¹…ç¼“å­˜æ²¡æœ‰è¢«è®¿é—®å°†åˆ é™¤")]),t._v(" "),n("li",[t._v("max_sizeï¼šæœ€å¤§ç¼“å­˜ç©ºé—´")])]),t._v(" "),n("h3",{attrs:{id:"proxy-cache"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-cache"}},[t._v("#")]),t._v(" proxy_cache")]),t._v(" "),n("blockquote",[n("p",[t._v("å¼€å¯æˆ–å…³é—­ç¼“å­˜")])]),t._v(" "),n("h3",{attrs:{id:"proxy-cache-key"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-cache-key"}},[t._v("#")]),t._v(" proxy_cache_key")]),t._v(" "),n("blockquote",[n("p",[t._v("è®¾ç½®webç¼“å­˜çš„keyå€¼")])]),t._v(" "),n("h3",{attrs:{id:"proxy-cache-valid"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-cache-valid"}},[t._v("#")]),t._v(" proxy_cache_valid")]),t._v(" "),n("blockquote",[n("p",[t._v("è®¾ç½®çŠ¶æ€ç çš„ç¼“å­˜æ—¶é—´")])]),t._v(" "),n("h3",{attrs:{id:"proxy-cache-min-uses"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-cache-min-uses"}},[t._v("#")]),t._v(" proxy_cache_min_uses")]),t._v(" "),n("blockquote",[n("p",[t._v("è®¾ç½®èµ„æºè¢«è®¿é—®å¤šå°‘æ¬¡åå¼€å§‹ç¼“å­˜")])]),t._v(" "),n("h3",{attrs:{id:"proxy-cache-methods"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#proxy-cache-methods"}},[t._v("#")]),t._v(" proxy_cache_methods")]),t._v(" "),n("blockquote",[n("p",[t._v("è®¾ç½®ç¼“å­˜å“ªäº›HTTPæ–¹æ³•")])]),t._v(" "),n("h2",{attrs:{id:"nginxç¼“å­˜è®¾ç½®æ¡ˆä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxç¼“å­˜è®¾ç½®æ¡ˆä¾‹"}},[t._v("#")]),t._v(" nginxç¼“å­˜è®¾ç½®æ¡ˆä¾‹")]),t._v(" "),n("h3",{attrs:{id:"éœ€æ±‚åˆ†æ-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éœ€æ±‚åˆ†æ-2"}},[t._v("#")]),t._v(" éœ€æ±‚åˆ†æ")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201281952888.png",alt:" "}})]),t._v(" "),n("h3",{attrs:{id:"æ­¥éª¤å®ç°"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ­¥éª¤å®ç°"}},[t._v("#")]),t._v(" æ­¥éª¤å®ç°")]),t._v(" "),n("div",{staticClass:"language-typescript extra-class"},[n("pre",{pre:!0,attrs:{class:"language-typescript"}},[n("code",[t._v("        #ç¼“å­˜è·¯å¾„ï¼Œç›®å½•ï¼Œåç§°\n        proxy_cache_path "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("proxy_cache levels"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" keys_zone"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("luo"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v("200m inactive"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("1d max_size"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("20g"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        upstream backend"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                server "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v(".164")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v(".129")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        server "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                listen "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8081")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                server_name localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                location "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        proxy_cache luo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        #ç¼“å­˜çš„MD5key\n                        proxy_cache_key luomu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        #"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("çŠ¶æ€ç ç¼“å­˜æ—¶é—´\n                        proxy_cache_valid "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" 5d"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        #"),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v("ç¼“å­˜æ—¶é—´\n                        proxy_cache_valid "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),t._v(" 30s"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        #å…¶å®ƒçŠ¶æ€ç ç¼“å­˜æ—¶é—´\n                        proxy_cache_valid "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("any")]),t._v(" 1m"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        #æœ€å°å¼€å§‹ç¼“å­˜æ¬¡æ•°\n                        proxy_cache_min_uses "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        #æŸ¥çœ‹ç¼“å­˜ä¿¡æ¯\n                        add_header nginx"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cache "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"$upstream_cache_status"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        proxy_pass http"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("backend"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("js"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201290928605.png",alt:"image-20220128135201983"}})]),t._v(" "),n("h2",{attrs:{id:"nginxç¼“å­˜æ¸…é™¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxç¼“å­˜æ¸…é™¤"}},[t._v("#")]),t._v(" nginxç¼“å­˜æ¸…é™¤")]),t._v(" "),n("h3",{attrs:{id:"æ–¹å¼ä¸€-åˆ é™¤ç¼“å­˜ç›®å½•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹å¼ä¸€-åˆ é™¤ç¼“å­˜ç›®å½•"}},[t._v("#")]),t._v(" æ–¹å¼ä¸€ï¼šåˆ é™¤ç¼“å­˜ç›®å½•")]),t._v(" "),n("blockquote",[n("p",[t._v("rm -rf /usr/local/proxy_cache")])]),t._v(" "),n("h3",{attrs:{id:"æ–¹å¼äºŒ-ç¬¬ä¸‰æ–¹æ‰©å±•æ¨¡å—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ–¹å¼äºŒ-ç¬¬ä¸‰æ–¹æ‰©å±•æ¨¡å—"}},[t._v("#")]),t._v(" æ–¹å¼äºŒï¼šç¬¬ä¸‰æ–¹æ‰©å±•æ¨¡å—")]),t._v(" "),n("h4",{attrs:{id:"ngx-cache-purge"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ngx-cache-purge"}},[t._v("#")]),t._v(" ngx_cache_purge")]),t._v(" "),n("ol",[n("li",[t._v("tar -zxf ngx_cache_purge-2.3.tar.gz")]),t._v(" "),n("li",[t._v("./configure --add-module=/root/nginx/module/purge")]),t._v(" "),n("li",[t._v("make")]),t._v(" "),n("li",[t._v("make upgrade")])]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[t._v("    location ~ /"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("purge")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/.*"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        #æ¸…é™¤ç¼“å­˜\n        proxy_cache_purge luo luomu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"nginxè®¾ç½®èµ„æºä¸ç¼“å­˜"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxè®¾ç½®èµ„æºä¸ç¼“å­˜"}},[t._v("#")]),t._v(" nginxè®¾ç½®èµ„æºä¸ç¼“å­˜")]),t._v(" "),n("p",[t._v("âœ”ï¸proxy_no_cache")]),t._v(" "),n("blockquote",[n("p",[t._v("ä¸å°†æ•°æ®ç¼“å­˜çš„æ¡ä»¶ï¼ˆæ²¡ç¼“å­˜è¿‡ï¼‰")]),t._v(" "),n("p",[t._v("é…ç½®å®ä¾‹ï¼šproxy_no_cache $cookie_mocache $arg_nocache $arg_comment")])]),t._v(" "),n("p",[t._v("âœ”ï¸proxy_cache_bypass")]),t._v(" "),n("blockquote",[n("p",[t._v("è®¾ç½®ä¸ä»ç¼“å­˜ä¸­è·å–æ•°æ®çš„æ¡ä»¶ï¼ˆå·²ç»ç¼“å­˜è¿‡ï¼‰")]),t._v(" "),n("p",[t._v("é…ç½®å®ä¾‹ï¼šproxy_cache_bypass $cookie_nocache $arg_nocache $arg_comment")])]),t._v(" "),n("p",[t._v("æ³¨æ„ï¼šæ¡ä»¶æœ‰ä¸€ä¸ªä¸ä¸º0å°±ç”Ÿæ•ˆ")]),t._v(" "),n("h3",{attrs:{id:"cookie-nocacheã€-arg-nocacheã€-arg-comment"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#cookie-nocacheã€-arg-nocacheã€-arg-comment"}},[t._v("#")]),t._v(" $cookie_nocacheã€$arg_nocacheã€$arg_comment")]),t._v(" "),n("ul",[n("li",[t._v("cookie_nocacheï¼š==é”®==nocacheå¯¹åº”çš„å€¼")]),t._v(" "),n("li",[t._v("arg_nocacheå’Œarg_commentï¼š==å‚æ•°==çš„åä¸ºnocacheå’Œcommentå¯¹åº”çš„å€¼")])]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[t._v("    #æ¼”ç¤ºè®¾ç½®ä¸ç¼“å­˜\n    log_format params "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$cookie_nocache")]),t._v(" | "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$arg_nocache")]),t._v(" | "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$arg_comment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen  8083"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("location /")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            access_log logs/access_params.log params"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            #add_header Set-Cookie "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'nocache=999'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            root html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            index index.html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"æ¡ˆä¾‹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ¡ˆä¾‹"}},[t._v("#")]),t._v(" æ¡ˆä¾‹")]),t._v(" "),n("blockquote",[n("p",[t._v("å¸¸è§çš„è®¾ç½®èµ„æºä¸ç¼“å­˜æ–¹æ¡ˆ")])]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#è®¾ç½®ä¸ç¼“å­˜ä¸¤ç§æ–¹æ³•ç»“åˆï¼ˆæµè¡Œï¼‰\n    server")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen 8084"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("location /")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            if "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request_uri")]),t._v(" ~ /.*.\\js$"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                set "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$nocache")]),t._v(" 1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            proxy_cache_bypass "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$cookie_nocache")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$arg_nocache")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$arg_comment")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$nocache")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            proxy_no_cache "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$cookie_nocache")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$arg_nocache")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$arg_comment")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$nocache")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h1",{attrs:{id:"nginxå®ç°æœåŠ¡å™¨ç«¯é›†ç¾¤æ­å»º"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxå®ç°æœåŠ¡å™¨ç«¯é›†ç¾¤æ­å»º"}},[t._v("#")]),t._v(" nginxå®ç°æœåŠ¡å™¨ç«¯é›†ç¾¤æ­å»º")]),t._v(" "),n("h2",{attrs:{id:"nginxä¸tomcatéƒ¨ç½²"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxä¸tomcatéƒ¨ç½²"}},[t._v("#")]),t._v(" nginxä¸tomcatéƒ¨ç½²")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201300839130.png",alt:"image-20220130083948128"}})]),t._v(" "),n("h3",{attrs:{id:"ç¯å¢ƒå‡†å¤‡tomcat"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¯å¢ƒå‡†å¤‡tomcat"}},[t._v("#")]),t._v(" ç¯å¢ƒå‡†å¤‡tomcat")]),t._v(" "),n("ol",[n("li",[t._v("å®‰è£…tomcat")]),t._v(" "),n("li",[t._v("å°†é¡¹ç›®æ‰“waræ”¾åˆ°webappsä¸‹")])]),t._v(" "),n("h3",{attrs:{id:"ç¯å¢ƒå‡†å¤‡nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¯å¢ƒå‡†å¤‡nginx"}},[t._v("#")]),t._v(" ç¯å¢ƒå‡†å¤‡nginx")]),t._v(" "),n("blockquote",[n("p",[t._v("åå‘ä»£ç†å°†è¯·æ±‚å‘é€ç»™tomcat")])]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#tomcatçš„é›†ç¾¤\n    upstream myWeb")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        server 192.168.164."),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("129")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8080 weight=10"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server 192.168.164."),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("129")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8180 weight=10"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server 192.168.164."),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("129")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8280 weight=10"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("server ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen       80"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name  localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("location / ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            root   html/web"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            index  index.html index.htm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#åŠ¨æ€èµ„æº\n        location /demo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                proxy_pass "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("http")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//myWeb;")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"nginxå®ç°åŠ¨é™åˆ†ç¦»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxå®ç°åŠ¨é™åˆ†ç¦»"}},[t._v("#")]),t._v(" nginxå®ç°åŠ¨é™åˆ†ç¦»")]),t._v(" "),n("blockquote",[n("p",[t._v("åŠ¨é™åˆ†ç¦»ï¼šé™æ€èµ„æºç›¸å…³çš„å†…å®¹äº¤ç»™nginx")])]),t._v(" "),n("p",[t._v("âœ”ï¸ä¸ºä»€ä¹ˆéœ€è¦åŠ¨é™åˆ†ç¦»ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("nginxå¤„ç†é™æ€èµ„æºæ•ˆç‡é«˜")]),t._v(" "),n("li",[t._v("å‡è½»tomcatæœåŠ¡å™¨å‹åŠ›")]),t._v(" "),n("li",[t._v("æé«˜é™æ€èµ„æºçš„è®¿é—®é€Ÿåº¦")]),t._v(" "),n("li",[t._v("åŠ¨æ€èµ„æºå®•æœºä¸å½±å“é™æ€èµ„æº")])]),t._v(" "),n("p",[t._v("åŠ¨ï¼šéƒ¨ç½²tomcatã€weblogicæˆ–è€…websphere")]),t._v(" "),n("p",[t._v("é™ï¼šéƒ¨ç½²åˆ°CDNã€nginxç­‰")]),t._v(" "),n("h3",{attrs:{id:"éœ€æ±‚åˆ†æ-3"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éœ€æ±‚åˆ†æ-3"}},[t._v("#")]),t._v(" éœ€æ±‚åˆ†æ")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201301524216.png",alt:"image-20220130152448591"}})]),t._v(" "),n("h3",{attrs:{id:"åŠ¨é™åˆ†ç¦»å®ç°æ­¥éª¤"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åŠ¨é™åˆ†ç¦»å®ç°æ­¥éª¤"}},[t._v("#")]),t._v(" åŠ¨é™åˆ†ç¦»å®ç°æ­¥éª¤")]),t._v(" "),n("ul",[n("li",[t._v("é¦–é¡µ")])]),t._v(" "),n("div",{staticClass:"language-html extra-class"},[n("pre",{pre:!0,attrs:{class:"language-html"}},[n("code",[n("span",{pre:!0,attrs:{class:"token doctype"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),n("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Title"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("js/jquery.min.js"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}}),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token script"}},[n("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n        "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           $"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://192.168.164.129/demo/getAddress'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n               "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("$")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"#msg"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n           "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("images/logo.png"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Nginxå¦‚ä½•å°†è¯·æ±‚è½¬å‘åˆ°åç«¯æœåŠ¡å™¨"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("h3")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("msg"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("h3")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("images/mv.png"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("ul",[n("li",[t._v("nginxçš„é…ç½®")])]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#tomcatçš„é›†ç¾¤\n    upstream myWeb")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        server 192.168.164."),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("129")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8080 weight=10"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server 192.168.164."),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("129")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8180 weight=10"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server 192.168.164."),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("129")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8280 weight=10"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("server ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen       80"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name  localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("location / ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            root   html/web"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            index  index.html index.htm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#åŠ¨æ€èµ„æº\n        location /demo")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                proxy_pass "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("http")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//myWeb;")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        #é™æ€èµ„æº\n        location ~/.*\\."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("js|png|jpg|gif"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                root html/web"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201301535657.png",alt:"image-20220129180704547"}})]),t._v(" "),n("h2",{attrs:{id:"nginxå®ç°tomcaté›†ç¾¤æ­å»º"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxå®ç°tomcaté›†ç¾¤æ­å»º"}},[t._v("#")]),t._v(" nginxå®ç°tomcaté›†ç¾¤æ­å»º")]),t._v(" "),n("blockquote",[n("p",[t._v("å¦‚æœtomcatå®•æœºäº†ï¼Œéƒ¨ç½²å¤šå°tomcatï¼Œæé«˜å¯ç”¨æ€§")])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201301535294.png",alt:"image-20220130153538496"}})]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201301536887.png",alt:"image-20220129180701896"}})]),t._v(" "),n("h2",{attrs:{id:"nginxé«˜å¯ç”¨è§£å†³æ–¹æ¡ˆ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxé«˜å¯ç”¨è§£å†³æ–¹æ¡ˆ"}},[t._v("#")]),t._v(" nginxé«˜å¯ç”¨è§£å†³æ–¹æ¡ˆ")]),t._v(" "),n("blockquote",[n("p",[t._v("nginxå®•æœºï¼Ÿä¸¤ä¸ªnginxï¼Œç”¨æˆ·è®¿é—®å“ªä¸ªï¼Ÿ")])]),t._v(" "),n("h3",{attrs:{id:"keepalived"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#keepalived"}},[t._v("#")]),t._v(" keepalived")]),t._v(" "),n("blockquote",[n("p",[t._v("é€šå‘ŠVRRPåè®®å®ç°é«˜å¯ç”¨åŠŸèƒ½")])]),t._v(" "),n("h3",{attrs:{id:"vrrpä»‹ç»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vrrpä»‹ç»"}},[t._v("#")]),t._v(" VRRPä»‹ç»")]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201301539003.png",alt:"image-20220130153950716"}})]),t._v(" "),n("p",[t._v("âœ”ï¸VRRPï¼ˆvirtual route redundancy protocolï¼‰ï¼Œè™šæ‹Ÿè·¯ç”±å†—ä½™åè®®")]),t._v(" "),n("blockquote",[n("p",[t._v("å°†ä¸¤å°æˆ–å¤šå°è·¯ç”±å™¨è™šæ‹Ÿæˆä¸€ä¸ªè®¾å¤‡ï¼Œå¯¹å¤–æé«˜è™šæ‹Ÿè·¯ç”±å™¨IPï¼Œmasterï¼ˆMASTER)å¯¹æ¥IP")])]),t._v(" "),n("p",[t._v("ä½œç”¨ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("é€‰æ‹©åè®®\n"),n("ul",[n("li",[t._v("è·¯ç”±ä¹‹é—´ç«é€‰masterï¼Œå‰©ä¸‹çš„å°±æ˜¯backup")])])]),t._v(" "),n("li",[t._v("è·¯ç”±å®¹é”™åè®®\n"),n("ul",[n("li",[t._v("masterè·¯ç”±å®•æœºåï¼Œç”±backupæ›¿ä»£æˆä¸ºæ–°çš„master")])])])]),t._v(" "),n("p",[n("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/202201301551336.png",alt:"image-20220130155141302"}})]),t._v(" "),n("h3",{attrs:{id:"ç¯å¢ƒæ­å»º"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¯å¢ƒæ­å»º"}},[t._v("#")]),t._v(" ç¯å¢ƒæ­å»º")]),t._v(" "),n("ol",[n("li",[t._v("å®˜ç½‘ä¸‹è½½ç‰ˆæœ¬ï¼šhttps://keepalived.org/")]),t._v(" "),n("li",[t._v("å®‰è£…keepalived")]),t._v(" "),n("li",[t._v("cd keepalived/keepalived-2.0.20")]),t._v(" "),n("li",[t._v("./configure --sysconf=/etc --prefix=/usr/local")]),t._v(" "),n("li",[t._v("make && make install")])]),t._v(" "),n("blockquote",[n("p",[t._v("å®‰è£…åï¼š")]),t._v(" "),n("ul",[n("li",[t._v("ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼š/etc/keepalived/keepalived.conf")]),t._v(" "),n("li",[t._v("å¯åŠ¨å’Œå…³é—­keepalivedï¼š/usr/local/sbin")])])]),t._v(" "),n("h3",{attrs:{id:"keepalivedé…ç½®æ–‡ä»¶ä»‹ç»"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#keepalivedé…ç½®æ–‡ä»¶ä»‹ç»"}},[t._v("#")]),t._v(" keepalivedé…ç½®æ–‡ä»¶ä»‹ç»")]),t._v(" "),n("p",[t._v("âœ”ï¸keepalived.confé…ç½®æ–‡ä»¶")]),t._v(" "),n("ul",[n("li",[t._v("globalå…¨å±€é…ç½®")]),t._v(" "),n("li",[t._v("vrrpç›¸å…³é…ç½®")])]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("! Configuration File for keepalived\n#å…¨å±€æ¨¡å—\nglobal_defs ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#åˆ‡æ¢é€šçŸ¥ç›®çš„åœ°é‚®ç®±\n   notification_email ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        tom"),n("span",{pre:!0,attrs:{class:"token atrule"}},[n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@qq")]),t._v(".com\n        jack"),n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@qq")]),t._v(".com\n   "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n   #å‘ä»¶äººé‚®ç®±\n   notification_email_from wangwu"),n("span",{pre:!0,attrs:{class:"token rule"}},[t._v("@qq")]),t._v(".com\n   #é‚®ç®±æœåŠ¡åœ°å€\n   smtp_server 192.168.200.1\n   #æœåŠ¡è¿æ¥è¶…æ—¶æ—¶é—´\n   smtp_connect_timeout 30\n   #æ ‡è¯†\n   router_id LVS_DEVEL\n   #æ£€æŸ¥åœ°å€\n   vrrp_skip_check_adv_addr\n   #éµå®ˆvrrpåè®®\n   vrrp_strict\n   #å»¶è¿Ÿ\n   vrrp_garp_interval 0\n   #ç½‘å¡å»¶è¿Ÿ\n   vrrp_gna_interval 0\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#æ§åˆ¶keepalivedä»€ä¹ˆæ—¶å€™å…³é—­çš„è„šæœ¬vrrp_script\nvrrp_script ck_nginx")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        #è„šæœ¬ä½ç½®\n        script "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'usr/local/sbin/ck_nginx.sh'")]),t._v("\n        #æ‰§è¡Œæ—¶é—´é—´éš”\n        interval 3\n        #æƒé‡ï¼Œå³ä¼˜å…ˆçº§\n        weight -20\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n#å®ä¾‹ï¼ŒVI_1å®ä¾‹åç§°\nvrrp_instance VI_1")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#MASTERæˆ–BACKUP masterä¸» backupå¤‡\n    state BACKUP\n    #ç½‘å¡åç§°\n    interface ens33\n    #å®ä¾‹IDï¼ŒèŒƒå›´0~255\n    virtual_router_id 51\n    #ä¼˜å…ˆçº§\n    priority 100\n    #å‘é€vrrpé€šå‘Šé—´éš”æ—¶é—´\n    advert_int 1\n    #é€šä¿¡è®¤è¯æ¨¡å—\n    authentication ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        #å¯†ç è®¤è¯\n        auth_type PASS\n        #å…·ä½“å¯†ç \n        auth_pass 1111\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#è™šæ‹ŸIPåœ°å€\n    virtual_ipaddress ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        192.168.164.129\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"è®¿é—®æµ‹è¯•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è®¿é—®æµ‹è¯•"}},[t._v("#")]),t._v(" è®¿é—®æµ‹è¯•")]),t._v(" "),n("blockquote",[n("p",[t._v("ip aï¼šæŸ¥çœ‹IP")])]),t._v(" "),n("p",[t._v("å­˜åœ¨çš„é—®é¢˜ï¼š")]),t._v(" "),n("ul",[n("li",[t._v("æƒ³è®©masteråˆ‡æ¢ï¼Œéœ€æŠŠå¯¹åº”çš„æœåŠ¡å™¨ä¸Šçš„keepalivedå…³é—­ï¼ˆæ‰‹åŠ¨ï¼‰")])]),t._v(" "),n("h3",{attrs:{id:"keepalivedä¹‹vrrp-script"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#keepalivedä¹‹vrrp-script"}},[t._v("#")]),t._v(" keepalivedä¹‹vrrp_script")]),t._v(" "),n("blockquote",[n("p",[t._v("è§£å†³éœ€æ‰‹åŠ¨å…³é—­keepalived")])]),t._v(" "),n("p",[t._v("âœ”ï¸å®ç°æ­¥éª¤")]),t._v(" "),n("ul",[n("li",[t._v("é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¯¹åº”çš„é…ç½®åƒ")])]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#æ§åˆ¶keepalivedä»€ä¹ˆæ—¶å€™å…³é—­çš„è„šæœ¬vrrp_script\nvrrp_script ck_nginx")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        #è„šæœ¬ä½ç½®\n        script "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'usr/local/sbin/ck_nginx.sh'")]),t._v("\n        #æ‰§è¡Œæ—¶é—´é—´éš”\n        interval 3\n        #æƒé‡ï¼Œå³ä¼˜å…ˆçº§\n        weight -20\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("ul",[n("li",[t._v("è„šæœ¬\n"),n("ul",[n("li",[t._v("-Cï¼šæŒ‡å®šå‘½ä»¤çš„æ‰€æœ‰è¿›ç¨‹")]),t._v(" "),n("li",[t._v("--no-headerï¼šæ’é™¤æ ‡é¢˜")])])])]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[t._v("#!/bin/bash\nnginxå¼€å¯çš„ä¸ªæ•°\nnum=`ps -C nginx --no-header | wc -l`\nif [ "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$num")]),t._v(" -eq 0 ]"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("then\n /usr/local/nginx/sbin/nginx\n sleep 2\n if [ `ps -C nginx --no-header | wc -l` -eq 0 ]"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" then\n\tå¦‚æœnginxä¸º0ï¼Œå…³é—­keepalived\n  killall keepalived\n fi\nfi\n")])])]),n("ul",[n("li",[t._v("æ³¨æ„ï¼šè®¾ç½®masterå’ŒbackupçŠ¶æ€æ—¶ï¼Œéƒ½è®¾ä¸ºbackupï¼Œå¯é€šè¿‡ä¼˜å…ˆçº§ï¼ˆpriorityï¼‰ç«äº‰")])]),t._v(" "),n("h2",{attrs:{id:"nginxåˆ¶ä½œä¸‹è½½ç«™ç‚¹"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxåˆ¶ä½œä¸‹è½½ç«™ç‚¹"}},[t._v("#")]),t._v(" nginxåˆ¶ä½œä¸‹è½½ç«™ç‚¹")]),t._v(" "),n("blockquote",[n("p",[t._v("æ¨¡å—ï¼šngx_http_autoindex_module")])]),t._v(" "),n("p",[t._v("ä¾‹ï¼š")]),t._v(" "),n("p",[n("img",{attrs:{src:s(832),alt:"image-20220130161744226"}})]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("location /download")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        root /usr/local"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        #å¼€å¯èµ„æºåˆ—è¡¨\n        autoindex on"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        #èµ„æºå¤§å°è¯¦ç»†ä¿¡æ¯\n        autoindex_exact_size off"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        #èµ„æºå±•ç¤ºçš„æ ¼å¼\n        autoindex_format html"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        #ç›®å½•çš„èµ„æºå±•ç¤ºæ—¶é—´\n        autoindex_localtime off"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"nginxçš„ç”¨æˆ·è®¤è¯æ¨¡å—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxçš„ç”¨æˆ·è®¤è¯æ¨¡å—"}},[t._v("#")]),t._v(" nginxçš„ç”¨æˆ·è®¤è¯æ¨¡å—")]),t._v(" "),n("blockquote",[n("p",[t._v("è®¾ç½®èµ„æºå…è®¸è°è®¿é—®")])]),t._v(" "),n("p",[t._v("âœŒï¸auth_basic string|offï¼šå¼€å¯åï¼Œæç¤ºç”¨æˆ·éœ€è¦ç”¨æˆ·åå’Œå¯†ç éªŒè¯")]),t._v(" "),n("p",[t._v("âœŒï¸auth_basic_user_fileï¼šç”¨æˆ·åå’Œå¯†ç è·¯å¾„ï¼Œå¯ä»¥ä½¿ç”¨å·¥å…·"),n("code",[t._v("htpasswd")]),t._v("ç”Ÿäº§")]),t._v(" "),n("ul",[n("li",[t._v("yum install -y httpd-tools")])]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("htpasswd -c /usr/local/nginx/conf/htpasswd username //åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶è®°å½•ç”¨æˆ·åå’Œå¯†ç \nhtpasswd -b /usr/local/nginx/conf/htpasswd username password //åœ¨æŒ‡å®šæ–‡ä»¶æ–°å¢ä¸€ä¸ªç”¨æˆ·åå’Œå¯†ç \nhtpasswd -D /usr/local/nginx/conf/htpasswd username //ä»æŒ‡å®šæ–‡ä»¶åˆ é™¤ä¸€ä¸ªç”¨æˆ·ä¿¡æ¯\nhtpasswd -v /usr/local/nginx/conf/htpasswd username //éªŒè¯ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦æ­£ç¡®\n")])])]),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("location /download{\n    root /usr/local;\n    autoindex on;\n    autoindex_exact_size on;\n    autoindex_format html;\n    autoindex_localtime on;\n    auth_basic 'please input your auth';\n    auth_basic_user_file htpasswd;\n}\n")])])]),n("h1",{attrs:{id:"nginxçš„æ‰©å±•æ¨¡å—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginxçš„æ‰©å±•æ¨¡å—"}},[t._v("#")]),t._v(" nginxçš„æ‰©å±•æ¨¡å—")]),t._v(" "),n("h2",{attrs:{id:"lua"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#lua"}},[t._v("#")]),t._v(" Lua")]),t._v(" "),n("h3",{attrs:{id:"æ¦‚å¿µ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ¦‚å¿µ"}},[t._v("#")]),t._v(" æ¦‚å¿µ")]),t._v(" "),n("blockquote",[n("p",[t._v("è„šæœ¬è¯­è¨€ï¼Œçµæ´»æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½")])]),t._v(" "),n("h3",{attrs:{id:"ç‰¹æ€§"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç‰¹æ€§"}},[t._v("#")]),t._v(" ç‰¹æ€§")]),t._v(" "),n("ol",[n("li",[t._v("è½»é‡çº§ï¼šæ–¹ä¾¿åµŒå…¥")]),t._v(" "),n("li",[t._v("å¯æ‰©å±•")]),t._v(" "),n("li",[t._v("æ”¯æŒé¢å‘è¿‡ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹")])]),t._v(" "),n("h3",{attrs:{id:"åº”ç”¨åœºæ™¯"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#åº”ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" åº”ç”¨åœºæ™¯")]),t._v(" "),n("blockquote",[n("p",[t._v("æ¸¸æˆå¼€å‘ã€webè„šæœ¬ã€ç‹¬ç«‹åº”ç”¨è„šæœ¬ç­‰")])]),t._v(" "),n("h3",{attrs:{id:"luaçš„å®‰è£…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#luaçš„å®‰è£…"}},[t._v("#")]),t._v(" Luaçš„å®‰è£…")]),t._v(" "),n("ul",[n("li",[t._v("å®˜ç½‘ï¼šhttps://www.lua.org")])]),t._v(" "),n("ol",[n("li",[t._v("wget https://www.lua.org/ftp/lua-5.4.1.tar.gz")]),t._v(" "),n("li",[t._v("cd lua-5.4.1")]),t._v(" "),n("li",[t._v("make linux test")]),t._v(" "),n("li",[t._v("make install")])]),t._v(" "),n("h3",{attrs:{id:"ç¬¬ä¸€ä¸ªluaç¨‹åº"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ç¬¬ä¸€ä¸ªluaç¨‹åº"}},[t._v("#")]),t._v(" ç¬¬ä¸€ä¸ªLuaç¨‹åº")]),t._v(" "),n("ol",[n("li",[t._v("lua")]),t._v(" "),n("li",[t._v("print('hello world')")])]),t._v(" "),n("h3",{attrs:{id:"æ³¨é‡Š"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#æ³¨é‡Š"}},[t._v("#")]),t._v(" æ³¨é‡Š")]),t._v(" "),n("ul",[n("li",[t._v("å•è¡Œæ³¨é‡Šï¼š--")]),t._v(" "),n("li",[t._v("å¤šè¡Œæ³¨é‡Šï¼š--[[        æ³¨é‡Šå†…å®¹      --]]")])]),t._v(" "),n("h3",{attrs:{id:"è¯­æ³•"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#è¯­æ³•"}},[t._v("#")]),t._v(" è¯­æ³•")]),t._v(" "),n("p",[t._v("âœŒï¸è¿ç®—ç¬¦ï¼š")]),t._v(" "),n("ol",[n("li",[t._v("^ï¼šå¹‚")]),t._v(" "),n("li",[t._v("~=ï¼šä¸ç­‰")]),t._v(" "),n("li",[t._v("..ï¼šè¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²\n"),n("ul",[n("li",[t._v('ä¾‹ï¼š"hello".."world"===>helloworld')])])]),t._v(" "),n("li",[t._v("äº•å·ï¼šè¿”å›å­—ç¬¦ä¸²æˆ–è¡¨çš„é•¿åº¦")])]),t._v(" "),n("p",[t._v("âœŒï¸å˜é‡")]),t._v(" "),n("ol",[n("li",[t._v("é»˜è®¤å˜é‡ä¸ºå…¨å±€ï¼Œå±€éƒ¨å®šä¹‰å‰é¢åŠ local")])]),t._v(" "),n("p",[t._v("âœŒï¸æ•°æ®ç±»å‹")]),t._v(" "),n("ol",[n("li",[t._v("nilï¼šç©º")]),t._v(" "),n("li",[t._v("numberï¼šæ•°å€¼")]),t._v(" "),n("li",[t._v("tableï¼šè¡¨\n"),n("ul",[n("li",[t._v('ä¾‹ï¼šarr={"java","lisi","wangwu"}')])])]),t._v(" "),n("li",[t._v("userdataï¼šç”¨æˆ·æ•°æ®")])]),t._v(" "),n("p",[t._v("ã€‹ä¾‹ï¼šprint(type(12))===>number")]),t._v(" "),n("p",[t._v("âœŒï¸æ§åˆ¶ç»“æ„")]),t._v(" "),n("ol",[n("li",[t._v("if elseif else\n"),n("ul",[n("li",[t._v("ä¾‹ï¼šif (5>3) then elseif (4>3) then else  end")]),t._v(" "),n("li",[t._v("æ³¨æ„ï¼šelseåé¢æ²¡æœ‰thenï¼Œå…¶ä»–éƒ½æœ‰")])])]),t._v(" "),n("li",[t._v("whille æ¡ä»¶ do å¾ªç¯ end")]),t._v(" "),n("li",[t._v("for k,v in ipairs(x) do end\n"),n("ul",[n("li",[t._v("xï¼šè¡¨ï¼ˆJavaä¸­çš„æ•°æ®ï¼‰")])])])]),t._v(" "),n("h2",{attrs:{id:"ngx-luaæ¨¡å—"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ngx-luaæ¨¡å—"}},[t._v("#")]),t._v(" ngx_luaæ¨¡å—")]),t._v(" "),n("h3",{attrs:{id:"openresty"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#openresty"}},[t._v("#")]),t._v(" OpenResty")]),t._v(" "),n("blockquote",[n("p",[t._v("åŸºäºnginxä¸Luaï¼ˆé›†æˆä¸¤è€…ï¼‰çš„é«˜æ€§èƒ½webå¹³å°")])]),t._v(" "),n("h3",{attrs:{id:"å®‰è£…"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…"}},[t._v("#")]),t._v(" å®‰è£…")]),t._v(" "),n("ol",[n("li",[t._v("wget https://openresty.org/download/openresty-1.15.8.2.tar.gz")]),t._v(" "),n("li",[t._v("tar -zxf openresty-1.15.8.2.tar.gz")]),t._v(" "),n("li",[t._v("cd openresty-1.15.8.2")]),t._v(" "),n("li",[t._v("./configure")]),t._v(" "),n("li",[t._v("make && make install")]),t._v(" "),n("li",[t._v("cd /usr/local/openresty/nginx/")])]),t._v(" "),n("h2",{attrs:{id:"ngx-luaçš„ä½¿ç”¨"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ngx-luaçš„ä½¿ç”¨"}},[t._v("#")]),t._v(" ngx_luaçš„ä½¿ç”¨")]),t._v(" "),n("p",[t._v("âœ”ï¸æŒ‡ä»¤æ‰§è¡Œé¡ºåº")]),t._v(" "),n("p",[n("img",{attrs:{src:s(833),alt:"image-20220204221208361"}})]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("*ï¼ˆxxx_by_luaï¼‰ï¼šè¡¨ç¤ºæŒ‡ä»¤\n*ï¼ˆxxx_by_lua_blockï¼‰ï¼šè¡¨ç¤ºæ–‡ä»¶\n")])])]),n("ol",[n("li",[t._v("==init_by_lua==*ï¼šåˆå§‹åŒ–çš„å…¨å±€é…ç½®")]),t._v(" "),n("li",[t._v("init_worker_by_lua*ï¼šå®šæ—¶ä»»åŠ¡")]),t._v(" "),n("li",[t._v("==set_by_lua*==ï¼šç»™å˜é‡èµ‹å€¼")]),t._v(" "),n("li",[t._v("rewrite_by_lua*ï¼šé‡å†™")]),t._v(" "),n("li",[t._v("access_by_lua*ï¼šè®¿é—®æ§åˆ¶")]),t._v(" "),n("li",[t._v("==content_by_lua*==ï¼ˆå¸¸ç”¨ï¼‰ï¼šè¿™ä¸ªé˜¶æ®µå¤§éƒ¨åˆ†ä»»åŠ¡å®Œæˆï¼Œå…¶ä»–é˜¶æ®µæ˜¯å‡†å¤‡")]),t._v(" "),n("li",[t._v("header_fiter_by_lua*ï¼šè®¾ç½®å¤´éƒ¨ä¿¡æ¯")]),t._v(" "),n("li",[t._v("body_filter_by_lua&ï¼šå¯¹å“åº”æ•°æ®è¿‡æ»¤")])]),t._v(" "),n("h3",{attrs:{id:"éœ€æ±‚"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#éœ€æ±‚"}},[t._v("#")]),t._v(" éœ€æ±‚")]),t._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("http://192.168.111.130?name=zhangsan&gender=1\ngenderï¼š1è¾“å‡ºåå­—åŠ å…ˆç”Ÿï¼Œ0è¾“å‡ºå¥³å£«\n")])])]),n("p",[t._v("âœŒï¸ä»£ç ")]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[t._v("\t"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("#åœ°å€å‚æ•°ï¼Œgenderï¼ˆ1æ˜¯å…ˆç”Ÿï¼Œ0æ˜¯å¥³å£«ï¼‰ï¼Œname\n\tlocation /getGender")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tdefault_type "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'text/html'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tset_by_lua "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$name")]),t._v(' "\n\t\t\tlocal msg=ngx.req.get_uri_'),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("args")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\tgender = msg["),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'gender'")]),t._v("]\n\t\t\tname = msg["),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name'")]),t._v("]\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("if")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gender=="),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" then\n\t\t\t\treturn name.."),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å…ˆç”Ÿ'")]),t._v("\n\t\t\t"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("elseif")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gender=="),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" then\n\t\t\t\treturn name.."),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'å¥³å£«'")]),t._v('\n\t\t\telse\n\t\t\t\treturn name\n\t\t\tend\n\t\t"'),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\treturn 200 "),n("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$name")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[n("img",{attrs:{src:s(834),alt:"image-20220204123425989"}})]),t._v(" "),n("h2",{attrs:{id:"ngx-luaæ“ä½œredis"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ngx-luaæ“ä½œredis"}},[t._v("#")]),t._v(" ngx_luaæ“ä½œredis")]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("location / ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    default_type "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/html"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("content_by_lua_block")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        local redis = require "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resty.redis"')]),t._v(" -- å¼•å…¥Redis\n        local redisObj = "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("redis")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  --åˆ›å»ºRediså¯¹è±¡\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("redisObj")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("set_"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("1000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" --è®¾ç½®è¶…æ—¶æ•°æ®ä¸º1s\n        local ok"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("err = "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("redisObj")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.200.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("6379"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" --è®¾ç½®redisè¿æ¥ä¿¡æ¯\n        if "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("not")]),t._v(" ok then --åˆ¤æ–­æ˜¯å¦è¿æ¥æˆåŠŸ\n         ngx."),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("say")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"failed to connection redis"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n         return\n        end\n        ok"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("err = "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("redisObj")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"username"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TOM"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("--å­˜å…¥æ•°æ®\n        if "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("not")]),t._v(" ok then --åˆ¤æ–­æ˜¯å¦å­˜å…¥æˆåŠŸ\n         ngx."),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("say")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"failed to set username"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n         return\n        end\n        local res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("err = "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("redisObj")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"username"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" --ä»redisä¸­è·å–æ•°æ®\n        ngx."),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("say")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\t--å°†æ•°æ®å†™ä¼šæ¶ˆæ¯ä½“ä¸­\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("redisObj")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h2",{attrs:{id:"ngx-luaæ“ä½œmysql"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#ngx-luaæ“ä½œmysql"}},[t._v("#")]),t._v(" ngx_luaæ“ä½œmysql")]),t._v(" "),n("blockquote",[n("p",[t._v("æ³¨æ„ï¼šæ³¨é‡Šæ˜¯--ï¼Œä¸æ˜¯#")])]),t._v(" "),n("p",[t._v("è¿æ¥ä¸åˆ°æœ¬åœ°æ•°æ®åº“åŸå› ")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("IPé—®é¢˜ï¼šå…³é—­é˜²ç«å¢™ï¼Œæˆ–è€…ç»™å¯¹åº”IPé˜²ç«å¢™æ”¾è¡Œadd-port")])]),t._v(" "),n("li",[n("p",[t._v("æ•°æ®åº“é—®é¢˜ï¼šmysqlæ²¡æœ‰å¯¹ä½ ç™»å½•çš„ç”¨æˆ·å¼€å¯è¿œç¨‹ç™»å½•çš„æƒé™ã€‚")]),t._v(" "),n("div",{staticClass:"language-mysql extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("mysql -u root -p å¯†ç \nuse mysql\nupdate user set host = '%' where user='root'\n")])])])])]),t._v(" "),n("div",{staticClass:"language-scss extra-class"},[n("pre",{pre:!0,attrs:{class:"language-scss"}},[n("code",[t._v("\t"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("init_by_lua_block")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t    redis = require "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resty.redis"')]),t._v("\n\t    mysql = require "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"resty.mysql"')]),t._v("\n\t    cjson = require "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cjson"')]),t._v("\n\t"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("server ")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        listen       80"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        server_name  localhost"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        #charset koi8-r"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        #access_log  logs/host.access.log  main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        \n\t"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("location /")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tdefault_type "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text/html"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    \t"),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("content_by_lua_block")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        --åˆ›å»ºæ•°æ®åº“å¯¹è±¡\n        local db = "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("mysql")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("new")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token selector"}},[t._v("local ok,err = db:connect")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        host="),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"192.168.111.1"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        port=3306"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        user="),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        password="),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        database="),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nginx_db"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        max_packet_size=1024"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        compact_arrays="),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        --è¾“å‡ºé”™è¯¯ä¿¡æ¯\n\t    ngx."),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("say")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("db")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("set_"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("1000"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        --åˆ é™¤\n        local res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("errcode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sqlstate = "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("db")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"delete from users where id=3"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        --local sql="),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"update users set username='lisi' where id = 3\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t--local res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("err"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("errcode"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sqlstate="),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("db")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("query")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        --æ•°æ®è½¬æ¢ä¸ºjsonæ ¼å¼\n\t\tngx."),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("say")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("cjson."),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("encode")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v("db")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=e.exports}}]);