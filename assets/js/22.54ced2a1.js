(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{913:function(t,a,s){"use strict";s.r(a);var n=s(17),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"基础篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基础篇"}},[t._v("#")]),t._v(" 基础篇")]),t._v(" "),s("blockquote",[s("p",[t._v("算法、设计模式、八股文")])]),t._v(" "),s("h2",{attrs:{id:"二分查找"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二分查找"}},[t._v("#")]),t._v(" 二分查找")]),t._v(" "),s("blockquote",[s("p",[t._v("奇数二分取中间，"),s("code",[t._v("偶数")]),t._v("二分取中间靠"),s("code",[t._v("左")])])]),t._v(" "),s("ul",[s("li",[t._v("中间值：\n"),s("ul",[s("li",[s("code",[t._v("left +")]),t._v(" (right - left) / 2\n"),s("ul",[s("li",[t._v("减法，避免超出")])])]),t._v(" "),s("li",[t._v("(left + right) "),s("code",[t._v(">>>")]),t._v(" 1\n"),s("ul",[s("li",[t._v("无符号右移")])])])])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("49")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 二分查找")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" index "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("binarySearch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("index"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("binarySearch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" right "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法一")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// int mid = left + (right - left) / 2;")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法二")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" mid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                right "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" mid "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" mid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"冒泡排序-找最大到末尾"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#冒泡排序-找最大到末尾"}},[t._v("#")]),t._v(" 冒泡排序（找最大到末尾）")]),t._v(" "),s("blockquote",[s("p",[t._v("记录最后一次交换位置，即下次结束位置")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("49")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 冒泡排序（一次冒泡，一个最大值在末尾排好）")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bubblingSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("print")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('" "')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bubblingSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认没有交换")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" last "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    last "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只需到末尾最大值前一个元素即可")]),t._v("\n            n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" last"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("n "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" temp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" temp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"选择排序-找最小放开头"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选择排序-找最小放开头"}},[t._v("#")]),t._v(" 选择排序（找最小放开头）")]),t._v(" "),s("blockquote",[s("p",[t._v("选择不稳定，"),s("code",[t._v("冒泡稳定")])]),t._v(" "),s("p",[t._v("稳定：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("相同值")]),t._v("顺序不被打乱")]),t._v(" "),s("li",[t._v("例：打牌，相同的2，不同花色")])]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("[[♠7], [♠2], [♠4], [♠5], [♥2], [♥5]]\n[[♠7], [♠5], [♥5], [♠4], [♥2], [♠2]]\n")])])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("49")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 选择排序，找最小放到开头")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("selectSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" min "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 找最小")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("min"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    min "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("min "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" min"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" min"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" temp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("min"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("min"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" temp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"插入排序-边放最小到开头边插入"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插入排序-边放最小到开头边插入"}},[t._v("#")]),t._v(" 插入排序（边放最小到开头边插入）")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("49")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插入排序，边找最小边插入到开头")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 目标值")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 已插入（已排序）的末尾元素")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 遍历之前已插入（已排序）")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前元素比排序好末尾元素小")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    j"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"希尔排序-间隔分后插入排序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#希尔排序-间隔分后插入排序"}},[t._v("#")]),t._v(" 希尔排序(间隔分后插入排序)")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("49")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 希尔排序，按间隔查找，大的在左边，小的在右边")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hillSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hillSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" len "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 间隔gap")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" gap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" len "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" gap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" gap "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 插入排序")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" len"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 需要插入的 值")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" k "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 和 k 有关，j 没有关系")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("k "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" gap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" gap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" gap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                        k "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),t._v(" gap"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("break")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("k"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"快速排序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#快速排序"}},[t._v("#")]),t._v(" 快速排序")]),t._v(" "),s("h3",{attrs:{id:"单边循环快排"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单边循环快排"}},[t._v("#")]),t._v(" 单边循环快排")]),t._v(" "),s("blockquote",[s("p",[t._v("指针i,j初始 left")]),t._v(" "),s("ul",[s("li",[t._v("j变化找最小")]),t._v(" "),s("li",[s("code",[t._v("i")]),t._v("负责"),s("code",[t._v("交换")]),t._v("找到的值（下标没换）")])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("49")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 单边循环快速排序，分左右，基准值 默认从最右边")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("quickSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("quickSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" partition "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("partition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("quickSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" partition "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("quickSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" partition "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("partition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" target "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指针i,j初始 left")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" j"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" target"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 值 交换，下标没变")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 值交换")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回下标（下一次的分界值）")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" temp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" temp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"双边循环快排"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#双边循环快排"}},[t._v("#")]),t._v(" 双边循环快排")]),t._v(" "),s("blockquote",[s("p",[t._v("分左右，两个指针，一个在左边，一个在右边")])]),t._v(" "),s("p",[t._v("⚒注意：")]),t._v(" "),s("ul",[s("li",[t._v("先"),s("code",[t._v("右往左")]),t._v("，找"),s("code",[t._v("小")]),t._v("的，其次"),s("code",[t._v("左往右")]),t._v("，找"),s("code",[t._v("大")]),t._v("的")]),t._v(" "),s("li",[t._v("不能颠倒顺序")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("31")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("48")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("49")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 双边循环快速排序，分左右，两个指针，一个在左边，一个在右边")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("quickSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("quickSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" partition "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("partition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("quickSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" partition "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("quickSort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" partition "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("partition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" base "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" left"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("j"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 右往左，找小的")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" right "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                right"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 左往右，找大的")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" right "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<=")]),t._v(" base"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                left"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 找到")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("swap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" temp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("left"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("right"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" temp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"arraylist"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#arraylist"}},[t._v("#")]),t._v(" ArrayList")]),t._v(" "),s("blockquote",[s("p",[t._v("扩容")])]),t._v(" "),s("ol",[s("li",[s("code",[t._v("无参")]),t._v("构造：容量为零")]),t._v(" "),s("li",[t._v("有参构造：指定容量数组")]),t._v(" "),s("li",[s("code",[t._v("add")]),t._v("：首次容量"),s("code",[t._v("10")]),t._v("，下次"),s("code",[t._v("1.5倍")])]),t._v(" "),s("li",[t._v("addAll：\n"),s("ul",[s("li",[t._v("没有元素：Math.max(10，实际元素个数)")]),t._v(" "),s("li",[t._v("有元素：Math.max(原容量1.5倍，实际元素个数)")])])])]),t._v(" "),s("h2",{attrs:{id:"iterator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#iterator"}},[t._v("#")]),t._v(" Iterator")]),t._v(" "),s("blockquote",[s("p",[t._v("fail-fast、fail-safe")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("fail-fast")]),t._v("（ArrayList）：遍历同时不能修改，"),s("code",[t._v("立刻报错")])]),t._v(" "),s("li",[s("code",[t._v("fail-safe")]),t._v("（CopyOnWriteArrayList）：遍历同时可以修改，但本次遍历数据还是使用之前")])]),t._v(" "),s("h2",{attrs:{id:"linkedlist"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#linkedlist"}},[t._v("#")]),t._v(" LinkedList")]),t._v(" "),s("blockquote",[s("p",[t._v("LinkedList和ArrayList区别")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("LinkedList")]),t._v("：\n"),s("ul",[s("li",[t._v("双向"),s("code",[t._v("链表")])]),t._v(" "),s("li",[t._v("随机访问慢（遍历链表，沿着路线）")]),t._v(" "),s("li",[t._v("占用内存多（记录前后节点）")])])]),t._v(" "),s("li",[s("code",[t._v("ArrayList")]),t._v("：\n"),s("ul",[s("li",[s("code",[t._v("数组")])]),t._v(" "),s("li",[t._v("随机访问快（下标）")]),t._v(" "),s("li",[t._v("利用"),s("code",[t._v("cpu缓存")]),t._v("，局部性原理（例：1 2 3 4 5 6 7 8）")])])])]),t._v(" "),s("h2",{attrs:{id:"hashmap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hashmap"}},[t._v("#")]),t._v(" HashMap")]),t._v(" "),s("blockquote",[s("p",[t._v("null 作为键只能有一个，null 作为值可以有多个")])]),t._v(" "),s("h3",{attrs:{id:"数据结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据结构"}},[t._v("#")]),t._v(" 数据结构")]),t._v(" "),s("ul",[s("li",[t._v("1.7(头插法)："),s("code",[t._v("数组+链表")])]),t._v(" "),s("li",[t._v("1.8(尾插法)："),s("code",[t._v("数组+（链表 | 红黑树）")])])]),t._v(" "),s("h3",{attrs:{id:"树化和退化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#树化和退化"}},[t._v("#")]),t._v(" 树化和退化")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("树化")]),t._v("意义：\n"),s("ul",[s("li",[t._v("红黑树避免"),s("code",[t._v("DDOS")]),t._v("攻击，防止链表超长")]),t._v(" "),s("li",[t._v("负载因子"),s("code",[t._v("0.75")]),t._v(" "),s("ul",[s("li",[t._v("16*3/4=12")]),t._v(" "),s("li",[t._v("超过12，扩容，即32（原来的一倍）")])])]),t._v(" "),s("li",[t._v("链表超过8概率：0.000000006")])])]),t._v(" "),s("li",[t._v("树化规则：\n"),s("ul",[s("li",[t._v("链表"),s("code",[t._v("长度超过8")]),t._v("：\n"),s("ul",[s("li",[t._v("先"),s("code",[t._v("扩容")]),t._v("减少链表长度")]),t._v(" "),s("li",[t._v("数组容量"),s("code",[t._v(">=64")]),t._v("，树化")])])])])]),t._v(" "),s("li",[t._v("退化规则：\n"),s("ul",[s("li",[t._v("情况1："),s("code",[t._v("扩容")]),t._v("时，导致红黑树个数<=6")]),t._v(" "),s("li",[t._v("情况2："),s("code",[t._v("remove")]),t._v("树节点，以下当中有一个为null\n"),s("ul",[s("li",[t._v("root")]),t._v(" "),s("li",[t._v("root.left")]),t._v(" "),s("li",[t._v("root.right")]),t._v(" "),s("li",[t._v("root.left.left")])])])])])]),t._v(" "),s("h3",{attrs:{id:"索引计算"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#索引计算"}},[t._v("#")]),t._v(" 索引计算")]),t._v(" "),s("blockquote",[s("p",[t._v("Hashtable")])]),t._v(" "),s("ul",[s("li",[t._v("计算方法：\n"),s("ol",[s("li",[s("code",[t._v("hashcode")]),t._v("()")]),t._v(" "),s("li",[t._v("二次哈希：HashMap的"),s("code",[t._v("hash")]),t._v("()方法\n"),s("ul",[s("li",[t._v("作用：哈希分布均匀")])])]),t._v(" "),s("li",[t._v("索引："),s("code",[t._v("& (capacity-1)")])])])]),t._v(" "),s("li",[t._v("数组容量2的n次幂：\n"),s("ul",[s("li",[t._v("没扩容计算索引：位运算 替代 &")]),t._v(" "),s("li",[t._v("扩容计算索引位置：\n"),s("ul",[s("li",[t._v("不变：hash & oldCap=0")]),t._v(" "),s("li",[t._v("变：新=老+oldCap")])])])])])]),t._v(" "),s("h3",{attrs:{id:"put与扩容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#put与扩容"}},[t._v("#")]),t._v(" put与扩容")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("put：")]),t._v(" "),s("ol",[s("li",[t._v("首次使用才创建数组")]),t._v(" "),s("li",[t._v("计算索引（桶下标）")]),t._v(" "),s("li",[t._v("没有占用，创建node占位")]),t._v(" "),s("li",[t._v("被占用：\n"),s("ul",[s("li",[t._v("TreeNode，走红黑树")]),t._v(" "),s("li",[t._v("普通Node，走链表，如果链表长度超过阈值（即8），走树化或扩容（<=64）")])])]),t._v(" "),s("li",[t._v("返回前检测容量超过阈值，超过扩容")])])]),t._v(" "),s("li",[s("p",[t._v("1.7和1.8：")]),t._v(" "),s("ul",[s("li",[t._v("插入节点：\n"),s("ul",[s("li",[t._v("1.7："),s("code",[t._v("头")]),t._v("插法")]),t._v(" "),s("li",[t._v("1.8："),s("code",[t._v("尾")]),t._v("插法")])])]),t._v(" "),s("li",[t._v("扩容：\n"),s("ul",[s("li",[t._v("1.7：大于阈值"),s("code",[t._v("没有空位才扩容")]),t._v("，即不能在节点下添加节点形成链表")]),t._v(" "),s("li",[t._v("1.8：大于阈值就扩容")])])]),t._v(" "),s("li",[t._v("1.8扩容计算索引有优化\n"),s("ul",[s("li",[t._v("不变：hash & oldCap=0")]),t._v(" "),s("li",[t._v("变：新=老+oldCap")])])])])]),t._v(" "),s("li",[s("p",[t._v("扩容加载因子默认0.75：")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("空间")]),t._v("占用和查询"),s("code",[t._v("时间")]),t._v("权衡")]),t._v(" "),s("li",[s("code",[t._v("大于")]),t._v("：空间节省，时间长")]),t._v(" "),s("li",[s("code",[t._v("小于")]),t._v("：扩容频繁，空间占用多")])])])]),t._v(" "),s("h3",{attrs:{id:"并发问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#并发问题"}},[t._v("#")]),t._v(" 并发问题")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("初始状态：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220415084335031.png",alt:"image-20220415084335031"}})])]),t._v(" "),s("li",[s("p",[t._v("线程二执行：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220415084443029.png",alt:"image-20220415084443029"}})])]),t._v(" "),s("li",[s("p",[t._v("线程1执行：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220415084632751.png",alt:"image-20220415084632751"}})])])]),t._v(" "),s("h3",{attrs:{id:"key设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#key设计"}},[t._v("#")]),t._v(" key设计")]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("HashMap")]),t._v("的key可以为"),s("code",[t._v("null")]),t._v("，其他Map实现不行")])]),t._v(" "),s("li",[s("p",[t._v("key是对象（特殊），例student：")]),t._v(" "),s("ul",[s("li",[t._v("必须实现"),s("code",[t._v("hashCode")]),t._v("和"),s("code",[t._v("equals")])]),t._v(" "),s("li",[t._v("key的内容不可变，例年龄不可变")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMapMutableKey")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" map "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("HashMap")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),t._v(" stu "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"张三"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意：不可变")]),t._v("\n        stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stu"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" o"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" o"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("o "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" o"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),t._v(" student "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Student")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" o"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" age "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" student"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("age "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Objects")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" student"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hashCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Objects")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hash")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),s("p",[t._v("String对象的hashCode()")]),t._v(" "),s("ul",[s("li",[t._v("均匀散列")]),t._v(" "),s("li",[t._v("计算：$32*h$----\x3e$h≪5$")])]),t._v(" "),s("h2",{attrs:{id:"单例模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单例模式"}},[t._v("#")]),t._v(" 单例模式")]),t._v(" "),s("h3",{attrs:{id:"饿汉式-runtime"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#饿汉式-runtime"}},[t._v("#")]),t._v(" 饿汉式（Runtime）")]),t._v(" "),s("blockquote",[s("ul",[s("li",[s("code",[t._v("private")]),t._v("Singleton1()：\n"),s("ul",[s("li",[t._v("抛出异常防止反射破坏单例")])])]),t._v(" "),s("li",[s("code",[t._v("readResolve()")]),t._v("：\n"),s("ul",[s("li",[t._v("防止反序列化")])])])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Serializable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("INSTANCE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RuntimeException")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"单例对象不能重复创建"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"private Singleton1()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton1")]),t._v(" INSTANCE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" INSTANCE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("otherMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"otherMethod()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("readResolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" INSTANCE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"枚举饿汉式-naturalordercomparator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#枚举饿汉式-naturalordercomparator"}},[t._v("#")]),t._v(" 枚举饿汉式（NaturalOrderComparator）")]),t._v(" "),s("blockquote",[s("p",[t._v("天然防反射、序列化")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    INSTANCE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"private Singleton2()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toHexString")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hashCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" INSTANCE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("otherMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"otherMethod()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"懒汉式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#懒汉式"}},[t._v("#")]),t._v(" 懒汉式")]),t._v(" "),s("blockquote",[s("p",[t._v("public static synchronized Singleton3 getInstance()：")]),t._v(" "),s("ul",[s("li",[t._v("理想：首次创建单例对象才需要同步")]),t._v(" "),s("li",[t._v("实际：每次调用都同步（synchronized 笨重）")]),t._v(" "),s("li",[t._v("解决：双检锁懒汉式")])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Serializable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"private Singleton3()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton3")]),t._v(" INSTANCE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Singleton3.class")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("INSTANCE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            INSTANCE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" INSTANCE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("otherMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"otherMethod()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"双检锁懒汉式-console"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#双检锁懒汉式-console"}},[t._v("#")]),t._v(" 双检锁懒汉式（Console）")]),t._v(" "),s("blockquote",[s("p",[t._v("解决懒汉式问题")]),t._v(" "),s("p",[t._v("必须加volatile：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("INSTANCE = new Singleton4()")]),t._v(" 不是原子的")]),t._v(" "),s("li",[t._v("加volatile顺序：\n"),s("ol",[s("li",[s("code",[t._v("创建")]),t._v("对象")]),t._v(" "),s("li",[t._v("调用"),s("code",[t._v("构造")])]),t._v(" "),s("li",[t._v("静态遍历"),s("code",[t._v("赋值")])])])]),t._v(" "),s("li",[t._v("不加volatile顺序：\n"),s("ul",[s("li",[t._v("可能"),s("code",[t._v("先赋值")]),t._v("，再调用"),s("code",[t._v("构造")]),t._v("（成员变量赋值）")])])]),t._v(" "),s("li",[t._v("结果：\n"),s("ul",[s("li",[t._v("线程1赋值")]),t._v(" "),s("li",[t._v("线程2\n"),s("ul",[s("li",[t._v("第一个if (INSTANCE == null) ，不为null")]),t._v(" "),s("li",[t._v("返回未完全赋值对象，即"),s("code",[t._v("静态变量有值，而成员变量没有")])])])])])])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Serializable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"private Singleton4()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("volatile")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton4")]),t._v(" INSTANCE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可见性，有序性")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("INSTANCE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("synchronized")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("INSTANCE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    INSTANCE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" INSTANCE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("otherMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"otherMethod()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"内部类懒汉式-集合"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内部类懒汉式-集合"}},[t._v("#")]),t._v(" 内部类懒汉式（集合）")]),t._v(" "),s("blockquote",[s("p",[t._v("内部类可以调用该类的私有方法，原因内部类在该类中")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Serializable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"private Singleton5()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Holder")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton5")]),t._v(" INSTANCE "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Singleton5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Holder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("INSTANCE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("otherMethod")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"otherMethod()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"jdk中的单例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jdk中的单例"}},[t._v("#")]),t._v(" JDK中的单例")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("Runtime")]),t._v("：饿汉式")]),t._v(" "),s("li",[s("code",[t._v("Console")]),t._v("：双检锁懒汉式")]),t._v(" "),s("li",[t._v("Collections."),s("code",[t._v("EmptyNavigableSet")]),t._v("：内部类懒汉式")]),t._v(" "),s("li",[t._v("Collections.ReverseComparator."),s("code",[t._v("REVERSE_ORDER")]),t._v("：内部类懒汉式")]),t._v(" "),s("li",[t._v("Comparators."),s("code",[t._v("NaturalOrderComparator")]),t._v(".INSTANCE：枚举饿汉式")])]),t._v(" "),s("h1",{attrs:{id:"并发篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#并发篇"}},[t._v("#")]),t._v(" 并发篇")]),t._v(" "),s("h2",{attrs:{id:"线程状态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#线程状态"}},[t._v("#")]),t._v(" 线程状态")]),t._v(" "),s("blockquote",[s("p",[t._v("五种和六种区别")]),t._v(" "),s("p",[t._v("interrupt、park、unpark：：打断等待、有限等待，恢复成可运行")])]),t._v(" "),s("p",[t._v("🔨六种：")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("新建")]),t._v("：\n"),s("ul",[s("li",[t._v("对象被创建，未调用start方法")]),t._v(" "),s("li",[t._v("未与操作系统底层关联")])])]),t._v(" "),s("li",[s("code",[t._v("可运行")]),t._v("：\n"),s("ul",[s("li",[t._v("调用start方法，进入可运行")]),t._v(" "),s("li",[t._v("与底层关联")])])]),t._v(" "),s("li",[s("code",[t._v("终结")]),t._v("：\n"),s("ul",[s("li",[t._v("代码执行完毕")]),t._v(" "),s("li",[t._v("取消与底层线程关联")])])]),t._v(" "),s("li",[s("code",[t._v("阻塞")]),t._v("：\n"),s("ul",[s("li",[t._v("获取"),s("code",[t._v("锁失败")]),t._v("：可运行->阻塞，不占用cpu时间")]),t._v(" "),s("li",[t._v("持锁线程释放锁，阻塞线程进入可运行")])])]),t._v(" "),s("li",[s("code",[t._v("等待")]),t._v("：\n"),s("ul",[s("li",[t._v("获取"),s("code",[t._v("锁")]),t._v("，"),s("code",[t._v("条件不满足")]),t._v("，调用"),s("code",[t._v("wait")])]),t._v(" "),s("li",[t._v("持锁线程调用"),s("code",[t._v("notify")]),t._v("或notifyall，唤醒等待线程")])])]),t._v(" "),s("li",[s("code",[t._v("有限时等待")]),t._v("：\n"),s("ul",[s("li",[t._v("情况一：\n"),s("ul",[s("li",[t._v("获取锁后，条件不满足，调用"),s("code",[t._v("wait(long)")]),t._v("，有时限等待")]),t._v(" "),s("li",[t._v("持锁线程调用"),s("code",[t._v("notify")]),t._v("、notifyall或等待"),s("code",[t._v("超时")]),t._v("，唤醒等待线程")])])]),t._v(" "),s("li",[t._v("情况二：\n"),s("ul",[s("li",[s("code",[t._v("sleep(long)")])])])])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220415224823686.png",alt:"image-20220415224823686"}})]),t._v(" "),s("p",[t._v("🔨五种：")]),t._v(" "),s("blockquote",[s("p",[t._v("参考操作系统划分")])]),t._v(" "),s("ol",[s("li",[t._v("运行：执行代码")]),t._v(" "),s("li",[t._v("就绪："),s("code",[t._v("有资格")]),t._v("分到cpu，但未轮到它")]),t._v(" "),s("li",[t._v("阻塞："),s("code",[t._v("没资格")]),t._v("分到cpu\n"),s("ul",[s("li",[t._v("阻塞、等待、有限等待")]),t._v(" "),s("li",[t._v("阻塞I/o")])])]),t._v(" "),s("li",[t._v("新建和终结：和六种中的一样")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220416110721954.png",alt:"image-20220416110721954"}})]),t._v(" "),s("h2",{attrs:{id:"线程池"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#线程池"}},[t._v("#")]),t._v(" 线程池")]),t._v(" "),s("blockquote",[s("p",[t._v("7大参数")]),t._v(" "),s("p",[t._v("核心->队列->救急->策略")]),t._v(" "),s("p",[t._v("模式")]),t._v(" "),s("ul",[s("li",[t._v("核心：正式员工")]),t._v(" "),s("li",[t._v("救急：外包员工")]),t._v(" "),s("li",[t._v("生存时间：项目完成，外包回家")]),t._v(" "),s("li",[t._v("策略：没有外包了")])])]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("corePoolSize")]),t._v("：核心线程数目")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("maximunPoolSize")]),t._v("：总线程数目，即核心+救急")])]),t._v(" "),s("li",[s("p",[t._v("救急：")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("keepAliveTime")]),t._v("：救急生存时间")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("unit")]),t._v("：救急时间单位，例秒、毫秒")])])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("workQueue")]),t._v("：没有核心线程，新任务到此队列")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("threadFactory")]),t._v("：设置线程名字")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("handler")]),t._v("：核心+队列+救急慢后策略：")]),t._v(" "),s("ul",[s("li",[t._v("抛异常 java.util.concurrent.ThreadPoolExecutor."),s("code",[t._v("AbortPolicy")])]),t._v(" "),s("li",[t._v("调用者执行任务 java.util.concurrent.ThreadPoolExecutor."),s("code",[t._v("CallerRunsPolicy")])]),t._v(" "),s("li",[t._v("丢弃任务 java.util.concurrent.ThreadPoolExecutor."),s("code",[t._v("DiscardPolicy")])]),t._v(" "),s("li",[t._v("丢弃最早排队任务 java.util.concurrent.ThreadPoolExecutor."),s("code",[t._v("DiscardOldestPolicy")])])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220416153917590.png",alt:"image-20220416153917590"}})]),t._v(" "),s("h2",{attrs:{id:"wait和sleep"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#wait和sleep"}},[t._v("#")]),t._v(" wait和sleep")]),t._v(" "),s("ul",[s("li",[t._v("共同：\n"),s("ul",[s("li",[t._v("wait()、wait(long)、sleep(long)，放弃cpu，进入阻塞")])])]),t._v(" "),s("li",[t._v("不同：\n"),s("ul",[s("li",[t._v("方法归属：\n"),s("ul",[s("li",[t._v("sleep(long)："),s("code",[t._v("Thread")]),t._v("静态方法")]),t._v(" "),s("li",[t._v("wait()、wait(long)："),s("code",[t._v("Object")]),t._v("成员方法")])])]),t._v(" "),s("li",[t._v("醒来时机：\n"),s("ul",[s("li",[t._v("sleep(long)、wait(long)：时间过期后")]),t._v(" "),s("li",[t._v("wait()"),s("code",[t._v("不唤醒，一直等")])])])]),t._v(" "),s("li",[t._v("锁特性（"),s("code",[t._v("重点")]),t._v("）：\n"),s("ul",[s("li",[t._v("调用"),s("code",[t._v("wait")]),t._v("方法，需要"),s("code",[t._v("对象的锁")]),t._v("，sleep不需要")]),t._v(" "),s("li",[s("code",[t._v("wait方法释放锁")]),t._v("，其他线程可以用锁")])])])])])]),t._v(" "),s("h2",{attrs:{id:"lock和synchronized"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lock和synchronized"}},[t._v("#")]),t._v(" lock和synchronized")]),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("lock和synchronized的区别")]),t._v(" "),s("li",[t._v("reentrantLock的公平、非公平锁")]),t._v(" "),s("li",[t._v("reentrantLock条件变量")])])]),t._v(" "),s("p",[t._v("🔨区别：")]),t._v(" "),s("ul",[s("li",[t._v("语法：\n"),s("ul",[s("li",[t._v("synchronized关键字：\n"),s("ul",[s("li",[s("code",[t._v("c++")]),t._v("实现")]),t._v(" "),s("li",[t._v("退出自动释放")])])]),t._v(" "),s("li",[t._v("Lock"),s("code",[t._v("接口")]),t._v("：\n"),s("ul",[s("li",[s("code",[t._v("Java")]),t._v("实现")]),t._v(" "),s("li",[t._v("手动调用"),s("code",[t._v("unlock")]),t._v("释放")])])])])]),t._v(" "),s("li",[t._v("功能：\n"),s("ul",[s("li",[t._v("两者属于"),s("code",[t._v("悲观锁")]),t._v("，互斥、同步、锁重入")]),t._v(" "),s("li",[t._v("Lock：\n"),s("ul",[s("li",[t._v("获取等待状态")]),t._v(" "),s("li",[t._v("公平锁")]),t._v(" "),s("li",[t._v("可打断")]),t._v(" "),s("li",[t._v("可超时")]),t._v(" "),s("li",[t._v("多条件变量")])])]),t._v(" "),s("li",[t._v("Lock场景：\n"),s("ul",[s("li",[t._v("xReentrantLock")]),t._v(" "),s("li",[t._v("ReentrantReadWriteLock")])])])])]),t._v(" "),s("li",[t._v("性能：\n"),s("ul",[s("li",[t._v("没有竞争：synchronized（偏向锁、轻量级锁）")]),t._v(" "),s("li",[t._v("有竞争：Lock")])])])]),t._v(" "),s("p",[t._v("🔨公平、非公平锁：")]),t._v(" "),s("ul",[s("li",[t._v("公平锁：指未处于阻塞队列线程竞争锁，老实排队")]),t._v(" "),s("li",[s("code",[t._v("非公平锁")]),t._v("：指未处于阻塞队列线程竞争锁，和"),s("code",[t._v("队列头唤醒")]),t._v("的竞争")]),t._v(" "),s("li",[t._v("注意："),s("code",[t._v("公平锁（不用）")]),t._v("降低吞吐量")])]),t._v(" "),s("p",[t._v("🔨条件变量：")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("reentrantLock")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220417112548809.png",alt:"image-20220417112548809"}})])])]),t._v(" "),s("h2",{attrs:{id:"volatile"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#volatile"}},[t._v("#")]),t._v(" volatile")]),t._v(" "),s("blockquote",[s("p",[t._v("线程安全三个问题：")]),t._v(" "),s("ul",[s("li",[t._v("原子性")]),t._v(" "),s("li",[t._v("可见性")]),t._v(" "),s("li",[t._v("有序性")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220416213335407.png",alt:"image-20220416213335407"}})]),t._v(" "),s("p",[t._v("✔️原子性：")]),t._v(" "),s("ul",[s("li",[t._v("问题："),s("code",[t._v("多线程")]),t._v("下指令发生交错，共享变量读写混乱")]),t._v(" "),s("li",[t._v("解决：悲观锁和乐观锁，"),s("code",[t._v("volatile不能")])])]),t._v(" "),s("p",[t._v("✔️可见性：")]),t._v(" "),s("ul",[s("li",[t._v("问题："),s("code",[t._v("编译器")]),t._v("优化、"),s("code",[t._v("缓存")]),t._v("优化或"),s("code",[t._v("CPU指令重排")]),t._v("序优化，导致共享变量修改其他"),s("code",[t._v("不可见")])]),t._v(" "),s("li",[t._v("解决：volatile修饰变量")])]),t._v(" "),s("p",[t._v("✔️有序性：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("问题：编译器优化、缓存优化或CPU指令重排序优化，指令"),s("code",[t._v("顺序")]),t._v("不一致")])]),t._v(" "),s("li",[s("p",[t._v("解决：volatile修饰变量读写加入屏障")])]),t._v(" "),s("li",[s("p",[t._v("注意：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("写：volatile修饰的放到"),s("code",[t._v("最后写")]),t._v("，其他变量不能向下越")])]),t._v(" "),s("li",[s("p",[t._v("读：volatile修饰的放到"),s("code",[t._v("开头读")]),t._v("，其他变量不能向上越")])]),t._v(" "),s("li",[s("p",[t._v("只能防止同一个线程指令重排")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220417211229488.png",alt:"image-20220417211229488"}})])])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220417211240588.png",alt:"image-20220417211240588"}})]),t._v(" "),s("h2",{attrs:{id:"悲观锁和乐观锁"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#悲观锁和乐观锁"}},[t._v("#")]),t._v(" 悲观锁和乐观锁")]),t._v(" "),s("ul",[s("li",[t._v("悲观锁："),s("code",[t._v("synchronized")]),t._v("、"),s("code",[t._v("lock")]),t._v(" "),s("ul",[s("li",[t._v("核心：线程占有锁，才能修改共享变量")]),t._v(" "),s("li",[t._v("运行-阻塞-唤醒，"),s("code",[t._v("线程上下文切换")])])])]),t._v(" "),s("li",[t._v("乐观锁："),s("code",[t._v("atomicInteger")]),t._v(" "),s("ul",[s("li",[t._v("核心："),s("code",[t._v("无需加锁")]),t._v("，只能一个线程修改共享变量，其他失败"),s("code",[t._v("不断重试")]),t._v("（很乐观）")]),t._v(" "),s("li",[s("code",[t._v("cas")]),t._v("保证原子性")]),t._v(" "),s("li",[t._v("一直运行，"),s("code",[t._v("不涉及阻塞")]),t._v("，不需要线程上下文切换")]),t._v(" "),s("li",[t._v("需要"),s("code",[t._v("多核cpu支持")])])])])]),t._v(" "),s("h2",{attrs:{id:"hashtable和concurrenthashmap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hashtable和concurrenthashmap"}},[t._v("#")]),t._v(" Hashtable和ConcurrentHashMap")]),t._v(" "),s("blockquote",[s("p",[t._v("区别")]),t._v(" "),s("p",[t._v("ConcurrentHashMap不同版本实现")])]),t._v(" "),s("p",[t._v("✔️区别：")]),t._v(" "),s("ul",[s("li",[t._v("线程"),s("code",[t._v("安全")]),t._v("的Map集合")]),t._v(" "),s("li",[s("code",[t._v("Hashtable")]),t._v("并发度低：一把锁，同一时刻只有一个线程")]),t._v(" "),s("li",[s("code",[t._v("ConcurrentHashMap")]),t._v("并发度高，多把锁")])]),t._v(" "),s("p",[t._v("✔️ConcurrentHashMap1.7：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("结构："),s("code",[t._v("Segment")]),t._v("（大数组）+"),s("code",[t._v("HashEntry")]),t._v("（小数组）+链表，每个segment对应一把锁")])]),t._v(" "),s("li",[s("p",[t._v("并发度(segment大小)："),s("code",[t._v("segment数组不能扩容")]),t._v("，意味并发度创建时固定")])]),t._v(" "),s("li",[s("p",[t._v("索引：")]),t._v(" "),s("ul",[s("li",[t._v("大数组(Segment)$2^m$，key的二次hash值的高m位")]),t._v(" "),s("li",[t._v("小数组$2^n$，key的二次hash值的低n位")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220420183115633.png",alt:"image-20220420183115633"}})])]),t._v(" "),s("li",[s("p",[t._v("扩容：小数组(HashEntry)超过扩容因子("),s("code",[t._v("3/4")]),t._v(")，"),s("code",[t._v("扩容翻倍")]),t._v("。不影响其他小数组")])]),t._v(" "),s("li",[s("p",[t._v("segment[0]原型：")]),t._v(" "),s("ul",[s("li",[t._v("创建小数组，以原型为依据")]),t._v(" "),s("li",[t._v("例：数组大小、扩容因子")])])])]),t._v(" "),s("p",[t._v("✔️ConcurrentHashMap1.8：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("结构："),s("code",[t._v("Node 数组+链表或红黑树")]),t._v("，锁冲突，利用cas非synchronized")])]),t._v(" "),s("li",[s("p",[t._v("并发度：Node数组多大并发度多大，区别在于"),s("code",[t._v("Node可以扩容")])])]),t._v(" "),s("li",[s("p",[t._v("扩容：Node满"),s("code",[t._v("3/4")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("并发get：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ForwardingNode")]),t._v("：决定在新数组或旧数组查找")]),t._v(" "),s("li",[t._v("链表长度"),s("code",[t._v("超过1")]),t._v("，对节点复制，怕节点迁移后"),s("code",[t._v("指向")]),t._v("发生变化")]),t._v(" "),s("li",[t._v("扩容后索引不变，节点无需复制")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220420195041794.png",alt:"image-20220420195041794"}})])]),t._v(" "),s("li",[s("p",[t._v("并发put：")]),t._v(" "),s("ul",[s("li",[t._v("操作同一个，put"),s("code",[t._v("阻塞")])]),t._v(" "),s("li",[t._v("头节点不是"),s("code",[t._v("ForwardingNode")]),t._v("，并发执行")]),t._v(" "),s("li",[t._v("头节点是ForwardingNode，"),s("code",[t._v("协助")]),t._v("扩容")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220420195742955.png",alt:"image-20220420195742955"}})])])])]),t._v(" "),s("li",[s("p",[t._v("扩容单位："),s("code",[t._v("后往前")]),t._v("前移链表，处理过(迁移)的标记"),s("code",[t._v("ForwardingNode")])])]),t._v(" "),s("li",[s("p",[t._v("容量(贴近$2^n$)：capacity(需要放的容量)/factory(因子)")])]),t._v(" "),s("li",[s("p",[t._v("懒惰初始化")])])]),t._v(" "),s("h2",{attrs:{id:"threadlocal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#threadlocal"}},[t._v("#")]),t._v(" ThreadLocal")]),t._v(" "),s("blockquote",[s("p",[t._v("作用和原理")]),t._v(" "),s("p",[t._v("内存释放时机")])]),t._v(" "),s("p",[t._v("✔️作用：")]),t._v(" "),s("ul",[s("li",[t._v("每个线程各用各的"),s("code",[t._v("资源对象(value)")])]),t._v(" "),s("li",[t._v("线程内"),s("code",[t._v("资源共享(Map中)")])])]),t._v(" "),s("p",[t._v("✔️原理：")]),t._v(" "),s("ul",[s("li",[t._v("ThreadLocalMap存储资源对象")]),t._v(" "),s("li",[t._v("set：\n"),s("ul",[s("li",[t._v("key：ThreadLocal")]),t._v(" "),s("li",[t._v("value：资源对象")]),t._v(" "),s("li",[t._v("放到ThreadLocalMap")])])]),t._v(" "),s("li",[t._v("get和remove：和Map使用一样，例：get(ThreadLocal)和remove(ThreadLocal)")])]),t._v(" "),s("p",[t._v("✔️"),s("code",[t._v("ThreadLocalMap")]),t._v("特点：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("key：")]),t._v(" "),s("ul",[s("li",[t._v("hash值统一分配")]),t._v(" "),s("li",[t._v("弱引用，GC释放内存")])])]),t._v(" "),s("li",[s("p",[t._v("容量"),s("code",[t._v("16")]),t._v("，扩容因子"),s("code",[t._v("2/3")]),t._v("，扩容后容量"),s("code",[t._v("翻倍")])])]),t._v(" "),s("li",[s("p",[t._v("key索引冲突后用"),s("code",[t._v("开放寻址法")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220420182321795.png",alt:"image-20220420182321795"}})])])]),t._v(" "),s("p",[t._v("✔️内存释放时机：")]),t._v(" "),s("ul",[s("li",[t._v("GC释放key：\n"),s("ul",[s("li",[t._v("释放key，value不释放")])])]),t._v(" "),s("li",[t._v("释放value：\n"),s("ul",[s("li",[s("code",[t._v("get")]),t._v("key：key为空，释放value")]),t._v(" "),s("li",[s("code",[t._v("set")]),t._v("key：清除"),s("code",[t._v("附近")]),t._v("的null key的value值")])])]),t._v(" "),s("li",[s("code",[t._v("remove")]),t._v("释放key和value(推荐)：\n"),s("ul",[s("li",[t._v("也会清除附近的"),s("code",[t._v("null key的value值")])])])])]),t._v(" "),s("h1",{attrs:{id:"虚拟机篇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机篇"}},[t._v("#")]),t._v(" 虚拟机篇")]),t._v(" "),s("h2",{attrs:{id:"jvm内存结构"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jvm内存结构"}},[t._v("#")]),t._v(" JVM内存结构")]),t._v(" "),s("blockquote",[s("ul",[s("li",[s("p",[t._v("内存结构划分")])]),t._v(" "),s("li",[s("p",[t._v("方法区、永久代、元空间关系")])])])]),t._v(" "),s("p",[t._v("🔨内存结构划分：")]),t._v(" "),s("ul",[s("li",[t._v("javac：源代码(source)->字节码(class)")]),t._v(" "),s("li",[t._v("执行\n"),s("ol",[s("li",[t._v("类加载子系统：加载class")]),t._v(" "),s("li",[s("code",[t._v("方法区")]),t._v("："),s("code",[t._v("类")]),t._v("的信息、静态变量")]),t._v(" "),s("li",[t._v("JVM虚拟机"),s("code",[t._v("栈")]),t._v("：执行main，局部"),s("code",[t._v("变量")]),t._v("、"),s("code",[t._v("方法参数")]),t._v("、对象引用等")]),t._v(" "),s("li",[s("code",[t._v("堆")]),t._v("：存储"),s("code",[t._v("对象")])]),t._v(" "),s("li",[t._v("垃圾回收器："),s("strong",[t._v("回收不用的对象")])]),t._v(" "),s("li",[t._v("解释器：字节码->机器码")]),t._v(" "),s("li",[t._v("程序计数器：线程切换，恢复后继续")]),t._v(" "),s("li",[t._v("本地方法栈：非Java实现的方法调用")]),t._v(" "),s("li",[t._v("JIT即时编译器：将频繁使用代码->机器码缓存")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421200532160.png",alt:"image-20220421200532160"}})]),t._v(" "),s("p",[t._v("🔨内存溢出：")]),t._v(" "),s("ul",[s("li",[t._v("不会：程序计数器")]),t._v(" "),s("li",[s("code",[t._v("OutOfMemoryError")]),t._v("：\n"),s("ul",[s("li",[s("code",[t._v("堆")]),t._v("耗尽：对象越来越多，一直用")]),t._v(" "),s("li",[s("code",[t._v("方法区")]),t._v("耗尽：加载类越来越多，框架运行期间动态生成类")]),t._v(" "),s("li",[t._v("虚拟机栈：线程个数")])])]),t._v(" "),s("li",[s("code",[t._v("StackOverflowError")]),t._v("：\n"),s("ul",[s("li",[t._v("方法递归未结束")])])])]),t._v(" "),s("p",[t._v("🔨方法区、永久代、元空间：")]),t._v(" "),s("ul",[s("li",[t._v("方法区：存类、方法字节码")]),t._v(" "),s("li",[t._v("永久代：1.8之前")]),t._v(" "),s("li",[t._v("元空间：1.8之后")]),t._v(" "),s("li",[t._v("执行流程：\n"),s("ul",[s("li",[t._v("类加载器将class加载并存储到元空间")]),t._v(" "),s("li",[t._v("元空间无法直接访问，X.class，Y.class间接访问")]),t._v(" "),s("li",[t._v("不用时，GC释放")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421204128650.png",alt:"image-20220421204128650"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421205454681.png",alt:"image-20220421205454681"}})]),t._v(" "),s("h2",{attrs:{id:"jvm内存参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jvm内存参数"}},[t._v("#")]),t._v(" JVM内存参数")]),t._v(" "),s("blockquote",[s("p",[t._v("熟悉和大小相关的JVM参数")])]),t._v(" "),s("p",[t._v("🔨堆内存，大小：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("-Xms")]),t._v("：最小堆内存（新时代和老年代)")]),t._v(" "),s("li",[s("code",[t._v("-Xmx")]),t._v("：最大堆内存（新时代和老年代)")]),t._v(" "),s("li",[t._v("建议-Xms和-Xmx相等")]),t._v(" "),s("li",[t._v("-XX:NewSize和-XX:MaxNewSize（默认，无需修改）：新生代最小和最大值")]),t._v(" "),s("li",[s("code",[t._v("-Xmn")]),t._v("：新生代大小，即设置最大和最小相等")]),t._v(" "),s("li",[t._v("保留：指一开始不占用过多")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421205625549.png",alt:"image-20220421205625549"}})]),t._v(" "),s("p",[t._v("🔨比例：")]),t._v(" "),s("ul",[s("li",[t._v("-XX:NewRatio=2:1\n"),s("ul",[s("li",[t._v("老：2")]),t._v(" "),s("li",[t._v("新：1")])])]),t._v(" "),s("li",[t._v("-XX:SurvivorRatio=4:1\n"),s("ul",[s("li",[t._v("伊甸园：4")]),t._v(" "),s("li",[t._v("form或to：1")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421210153192.png",alt:"image-20220421210153192"}})]),t._v(" "),s("p",[t._v("🔨元空间内存：")]),t._v(" "),s("ul",[s("li",[t._v("class space：类的基本信息")]),t._v(" "),s("li",[t._v("non-class space：基本之外（方法字节码、注解）")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421211347476.png",alt:"image-20220421211347476"}})]),t._v(" "),s("h2",{attrs:{id:"jvm垃圾回收"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jvm垃圾回收"}},[t._v("#")]),t._v(" JVM垃圾回收")]),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("掌握算法")]),t._v(" "),s("li",[t._v("掌握思想")]),t._v(" "),s("li",[t._v("理解三色标记及漏标")]),t._v(" "),s("li",[t._v("了解常见垃圾回收器")])])]),t._v(" "),s("p",[t._v("🔨算法")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("标记"),s("code",[t._v("清除")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("找GC Root（一定不会回收）")]),t._v(" "),s("li",[t._v("标记：沿着根标记")]),t._v(" "),s("li",[t._v("清除：除去未标记")]),t._v(" "),s("li",[t._v("缺点：内存碎片")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421211812744.png",alt:"image-20220421211812744"}})])]),t._v(" "),s("li",[s("p",[t._v("标记"),s("code",[t._v("整理")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("缺点：性能慢，多了整理")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421212032510.png",alt:"image-20220421212032510"}})])]),t._v(" "),s("li",[s("p",[t._v("标记"),s("code",[t._v("复制")]),t._v("：")]),t._v(" "),s("ol",[s("li",[t._v("内存分两块\n"),s("ul",[s("li",[t._v("to：总是空闲")]),t._v(" "),s("li",[t._v("from：存新对象")])])]),t._v(" "),s("li",[t._v("复制：from活的到to")]),t._v(" "),s("li",[t._v("交换from和to，保证to一直空")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421212130369.png",alt:"image-20220421212130369"}})])])]),t._v(" "),s("p",[t._v("🔨GC和分代回收")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("GC：实现内存自动释放，减少碎片")])]),t._v(" "),s("li",[s("p",[t._v("GC要点：")]),t._v(" "),s("ul",[s("li",[t._v("区域："),s("code",[t._v("堆内存")])]),t._v(" "),s("li",[t._v("判断对象存活："),s("code",[t._v("可达性")]),t._v("分析、"),s("code",[t._v("三色")]),t._v("标记法")]),t._v(" "),s("li",[t._v("思想：分代回收\n"),s("ul",[s("li",[t._v("新生代：标记复制")]),t._v(" "),s("li",[t._v("老年代：标记整理")])])]),t._v(" "),s("li",[t._v("方法：\n"),s("ul",[s("li",[t._v("Minor GC：新生代，时间短")]),t._v(" "),s("li",[t._v("Mixed GC(G1)：新生代+老年代（部分）")]),t._v(" "),s("li",[t._v("Full GC：新生代+老年代（完整），时间长")])])])])]),t._v(" "),s("li",[s("p",[t._v("分代回收：")]),t._v(" "),s("ol",[s("li",[s("p",[s("code",[t._v("新生代")]),t._v("：伊甸园和幸存区")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421223458496.png",alt:"image-20220421223458496"}})])]),t._v(" "),s("li",[s("p",[t._v("伊甸园内存不足，标记Eden和from存活对象")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421223809619.png",alt:"image-20220421223809619"}})])]),t._v(" "),s("li",[s("p",[t._v("复制存活对象到to")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421223823147.png",alt:"image-20220421223823147"}})])]),t._v(" "),s("li",[s("p",[t._v("from和to交换位置")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421223723303.png",alt:"image-20220421223723303"}})])]),t._v(" "),s("li",[s("p",[t._v("老年代：幸存区内存不足或大对象导致提前晋升")])])])])]),t._v(" "),s("p",[t._v("🔨三色标记：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("黑色-已标记")])]),t._v(" "),s("li",[s("p",[t._v("灰色-标记中")])]),t._v(" "),s("li",[s("p",[t._v("白色-未标记")])]),t._v(" "),s("li",[s("p",[t._v("步骤：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("起始")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421224445665.png",alt:"image-20220421224445665"}})])]),t._v(" "),s("li",[s("p",[t._v("黑色引用的对象变为灰色")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421224531761.png",alt:"image-20220421224531761"}})])]),t._v(" "),s("li",[s("p",[t._v("依次类推，白色为垃圾：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421224618906.png",alt:"image-20220421224618906"}})])])])])]),t._v(" "),s("p",[t._v("🔨并发漏标问题：")]),t._v(" "),s("ol",[s("li",[t._v("标记还未完成阶段")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421224816405.png",alt:"image-20220421224816405"}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("用户线程修改对象之间引用")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421224938571.png",alt:"image-20220421224938571"}})])]),t._v(" "),s("li",[s("p",[t._v("其他用户线程"),s("strong",[t._v("建立新的引用")]),t._v("，因为之前默认处理过，产生漏标")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421225118738.png",alt:"image-20220421225118738"}})])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("新增对象")]),t._v("，一样漏标")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220421225305180.png",alt:"image-20220421225305180"}})])])]),t._v(" "),s("p",[t._v("🔨解决漏标：")]),t._v(" "),s("ol",[s("li",[s("code",[t._v("incremental update")]),t._v(" 增量更新法(CMS)：\n"),s("ul",[s("li",[t._v("监听赋值动作")])])]),t._v(" "),s("li",[s("code",[t._v("snapshot at the beginning")]),t._v("(SATB，G1) 原始快照法\n"),s("ul",[s("li",[t._v("新加对象记录")]),t._v(" "),s("li",[t._v("被删除引用记录")]),t._v(" "),s("li",[t._v("监听赋值动作")])])])]),t._v(" "),s("p",[t._v("🔨垃圾回收器：")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("Parallel")]),t._v("GC：")]),t._v(" "),s("ul",[s("li",[t._v("Eden：minor GC")]),t._v(" "),s("li",[t._v("old：Full GC")]),t._v(" "),s("li",[t._v("吞吐量")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("ConcurrentMarkSweep")]),t._v("GC(并发标记清除)：")]),t._v(" "),s("ul",[s("li",[t._v("回收跟不上创建，Full GC")]),t._v(" "),s("li",[t._v("响应时间")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("G1")]),t._v("GC：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("响应和吞吐量兼顾")])]),t._v(" "),s("li",[s("p",[t._v("每个区域：Eden、survivor、old、humongous（大对象）")])]),t._v(" "),s("li",[s("p",[t._v("阶段："),s("strong",[t._v("新生代回收、并发标记、混合收集")])])]),t._v(" "),s("li",[s("p",[t._v("回收跟不上创建，Full GC")])]),t._v(" "),s("li",[s("p",[t._v("新生代回收步骤：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("创建对象")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422162746605.png",alt:"image-20220422162746605"}})])]),t._v(" "),s("li",[s("p",[t._v("内存不够，标记复制")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422162944435.png",alt:"image-20220422162944435"}})])]),t._v(" "),s("li",[s("p",[t._v("复制完成，释放Eden")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422163024883.png",alt:"image-20220422163024883"}})])]),t._v(" "),s("li",[s("p",[t._v("老的晋升老年代")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422163151346.png",alt:"image-20220422163151346"}})])])])]),t._v(" "),s("li",[s("p",[t._v("G1并发标记和混合收集")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("老年代过多，触发并发标记")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422163445443.png",alt:"image-20220422163445443"}})])]),t._v(" "),s("li",[s("p",[t._v("并发标记之后进入"),s("code",[t._v("混合收集")]),t._v("（收集部分老年代）")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422163621291.png",alt:"image-20220422163621291"}})])]),t._v(" "),s("li",[s("p",[t._v("复制")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422163658138.png",alt:"image-20220422163658138"}})])]),t._v(" "),s("li",[s("p",[t._v("复制完成，内存释放")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422163718436.png",alt:"image-20220422163718436"}})])])])])])])]),t._v(" "),s("h2",{attrs:{id:"内存溢出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内存溢出"}},[t._v("#")]),t._v(" 内存溢出")]),t._v(" "),s("ul",[s("li",[t._v("误用线程池")]),t._v(" "),s("li",[t._v("查询数据量太大")]),t._v(" "),s("li",[t._v("动态生成类")])]),t._v(" "),s("h2",{attrs:{id:"类加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类加载"}},[t._v("#")]),t._v(" 类加载")]),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("类加载阶段")]),t._v(" "),s("li",[t._v("类加载器")]),t._v(" "),s("li",[t._v("双亲委派")])])]),t._v(" "),s("p",[t._v("🔨类加载阶段：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("加载")]),t._v(" "),s("ul",[s("li",[t._v("类的字节码载入"),s("code",[t._v("方法区")])]),t._v(" "),s("li",[t._v("先加载父类")]),t._v(" "),s("li",[t._v("懒惰执行")])])]),t._v(" "),s("li",[s("p",[t._v("链接")]),t._v(" "),s("ul",[s("li",[t._v("验证：类合法性")]),t._v(" "),s("li",[t._v("准备："),s("code",[t._v("空间")]),t._v("，其中final修饰的变量完成赋值")]),t._v(" "),s("li",[t._v("解析：常量池的符号引用->直接引用")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422174409882.png",alt:"image-20220422174409882"}})])]),t._v(" "),s("li",[s("p",[t._v("初始化")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("<cinit>")]),t._v("：静态代码块、static变量赋值、static final"),s("code",[t._v("引用")]),t._v("类型赋值")]),t._v(" "),s("li",[t._v("懒惰执行")])])])]),t._v(" "),s("blockquote",[s("p",[t._v("验证：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("jps")]),t._v("：查看进程号")]),t._v(" "),s("li",[s("code",[t._v("jhsdb")]),t._v("：\n"),s("ul",[s("li",[t._v("命令："),s("code",[t._v("jhsdb.exe hsdb")])]),t._v(" "),s("li",[t._v("class browser：查看jvm加载的类")]),t._v(" "),s("li",[t._v("universe：堆内存范围")]),t._v(" "),s("li",[t._v("g1regiondetails ：region详情")]),t._v(" "),s("li",[t._v("scanoops start end 对象类型：查找对象地址")]),t._v(" "),s("li",[t._v("inspect 地址：地址对应的对象详情")])])]),t._v(" "),s("li",[s("code",[t._v("javap")]),t._v("：查看类字节码")])])]),t._v(" "),s("p",[t._v("🔨1.8类加载器：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("名称")]),t._v(" "),s("th",[t._v("加载类")]),t._v(" "),s("th",[t._v("描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("Bootstrap ClassLoader")]),t._v(" "),s("td",[t._v("JAVA_HOME/jre/lib")]),t._v(" "),s("td",[t._v("无法直接访问")])]),t._v(" "),s("tr",[s("td",[t._v("Extension ClassLoader")]),t._v(" "),s("td",[t._v("JAVA_HOME/jre/lib/ext")]),t._v(" "),s("td",[t._v("上级Bootstrap")])]),t._v(" "),s("tr",[s("td",[t._v("Application ClassLoader")]),t._v(" "),s("td",[t._v("classpath")]),t._v(" "),s("td",[t._v("上级Extension")])]),t._v(" "),s("tr",[s("td",[t._v("自定义类加载器")]),t._v(" "),s("td",[t._v("自定义")]),t._v(" "),s("td",[t._v("上级Application")])])])]),t._v(" "),s("p",[t._v("🔨双亲委派：")]),t._v(" "),s("ol",[s("li",[t._v("上级对下级共享，即类依赖jdk核心类")]),t._v(" "),s("li",[t._v("保证核心类优先加载")]),t._v(" "),s("li",[s("strong",[t._v("上级找不到，下级接着找")])]),t._v(" "),s("li",[s("code",[t._v("上到下")])]),t._v(" "),s("li",[t._v("注意：不能自己编写类加载器\n"),s("ul",[s("li",[t._v("假冒的不会执行，优先执行底层（真正）")]),t._v(" "),s("li",[t._v("不用双亲委派，加载假冒，还是需要找到父类"),s("code",[t._v("java.lang.Object")]),t._v("（没有委派）找不到")])])])]),t._v(" "),s("h2",{attrs:{id:"四种引用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四种引用"}},[t._v("#")]),t._v(" 四种引用")]),t._v(" "),s("blockquote",[s("p",[t._v("强引用、软引用、弱引用、虚引用")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("强引用：")]),t._v(" "),s("ul",[s("li",[t._v("变量赋值，例A a=new A()")]),t._v(" "),s("li",[t._v("回收：GC Root从根找不到")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422204636864.png",alt:"image-20220422204636864"}})])]),t._v(" "),s("li",[s("p",[t._v("软引用：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("SoftReference")]),t._v("a = new SoftReference(new A())")]),t._v(" "),s("li",[t._v("回收：首次不收，"),s("code",[t._v("第二次")]),t._v("还不足才回收")]),t._v(" "),s("li",[t._v("配合引用队列释放")]),t._v(" "),s("li",[t._v("例："),s("strong",[t._v("反射")]),t._v("数据")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422204745756.png",alt:"image-20220422204745756"}})])]),t._v(" "),s("li",[s("p",[t._v("弱引用：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("WeakReference")]),t._v("a = new WeakReference(new A())")]),t._v(" "),s("li",[t._v("回收："),s("code",[t._v("立刻")]),t._v("回收")]),t._v(" "),s("li",[t._v("配合引用队列释放")]),t._v(" "),s("li",[t._v("例："),s("strong",[t._v("ThreadLocalMap中的Entry对象")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422204853456.png",alt:"image-20220422204853456"}})])]),t._v(" "),s("li",[s("p",[t._v("虚引用：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("PhantomReference")]),t._v("a = new PhantomReference(new A(), referenceQueue)")]),t._v(" "),s("li",[t._v("回收：配合引用队列，"),s("code",[t._v("Reference")]),t._v("Handler将对象入队，对回收进一步处理")]),t._v(" "),s("li",[t._v("例："),s("strong",[t._v("cleaner释放DirectByteBuffer的直接内存")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422205058275.png",alt:""}})])])]),t._v(" "),s("h2",{attrs:{id:"finalize"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#finalize"}},[t._v("#")]),t._v(" finalize")]),t._v(" "),s("blockquote",[s("p",[t._v("子类重写：垃圾回收时就会调用")]),t._v(" "),s("p",[t._v("资源释放和清理放到finalize不好，Java9后淘汰（@Deprecated）")])]),t._v(" "),s("p",[t._v("🔨原理：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("核心： java.lang.ref."),s("code",[t._v("Finalizer")]),t._v("(类似引用对象)，有"),s("code",[t._v("unfinalized")]),t._v("(双向链表)，"),s("code",[t._v("ReferenceQueue")]),t._v("(引用队列)")])]),t._v(" "),s("li",[s("p",[t._v("重写finalize对象，都会"),s("strong",[t._v("包装成Finalizer放到unfinalized")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422205652581.png",alt:"image-20220422205652581"}})])]),t._v(" "),s("li",[s("p",[t._v("垃圾回收：对象放到引用队列")])]),t._v(" "),s("li",[s("p",[t._v("对象没有立刻被回收：unfinalized->Finalizer")])]),t._v(" "),s("li",[s("p",[t._v("回收："),s("code",[t._v("FinalizerThread")]),t._v("从队列取出每个Finalizer对象，真正执行finalize方法")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220422205859571.png",alt:"image-20220422205859571"}})])])]),t._v(" "),s("p",[t._v("🔨缺点：")]),t._v(" "),s("ol",[s("li",[t._v("无法保证资源释放："),s("code",[t._v("守护")]),t._v("线程")]),t._v(" "),s("li",[t._v("无法判断错误：执行finalize方法，"),s("code",[t._v("吞掉异常")])]),t._v(" "),s("li",[t._v("内存释放慢：第一次gc不能，等FinalizerThread调用完finalize")]),t._v(" "),s("li",[t._v("finalize串行执行慢")])]),t._v(" "),s("h1",{attrs:{id:"框架"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#框架"}},[t._v("#")]),t._v(" 框架")]),t._v(" "),s("h2",{attrs:{id:"spring-refresh-概述"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-refresh-概述"}},[t._v("#")]),t._v(" spring refresh 概述")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("refresh")]),t._v("是abstractApplicationContext的方法，初始化ApplicationContext")]),t._v(" "),s("p",[t._v("步骤：")]),t._v(" "),s("ul",[s("li",[t._v("1：环境")]),t._v(" "),s("li",[t._v("2 3 4 5 6："),s("code",[t._v("BeanFactory")])]),t._v(" "),s("li",[t._v("7 8 9 10 12："),s("code",[t._v("ApplicationContext")])]),t._v(" "),s("li",[t._v("11：初始化BeanFactory的"),s("code",[t._v("非延迟Bean")])])])]),t._v(" "),s("p",[t._v("refresh：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("prepareRefresh：准备工作")])]),t._v(" "),s("li",[s("p",[t._v("obtainFreshBeanFactory：创建"),s("code",[t._v("BeanFactory")])])]),t._v(" "),s("li",[s("p",[t._v("prepareBeanFactory：准备BeanFactory")])]),t._v(" "),s("li",[s("p",[t._v("postProcessBeanFactory：子类扩展BeanFactory")])]),t._v(" "),s("li",[s("p",[t._v("invokeBeanFactoryPostProcessors：后处理器扩展BeanFactory")])]),t._v(" "),s("li",[s("p",[t._v("registerBeanPostProcessors：准备后处理器")])]),t._v(" "),s("li",[s("p",[t._v("initMessageSource：国际化")])]),t._v(" "),s("li",[s("p",[t._v("initApplicationEventMulticaster：发布器")])]),t._v(" "),s("li",[s("p",[t._v("onRefresh：子类扩展")])]),t._v(" "),s("li",[s("p",[t._v("registerListeners：监听器")])]),t._v(" "),s("li",[s("p",[t._v("finishBeanFactoryInitialization：完成所有bean初始化")])]),t._v(" "),s("li",[s("p",[t._v("finishRefresh：完成refresh，发布contextRefresh事件")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220423202613279.png",alt:"image-20220423202613279"}})]),t._v(" "),s("ol",[s("li",[s("p",[t._v("prepareRefresh")]),t._v(" "),s("ul",[s("li",[t._v("创建Environment作为Application成员变量")]),t._v(" "),s("li",[s("code",[t._v("Environment")]),t._v("：\n"),s("ul",[s("li",[s("code",[t._v("@Value")]),t._v("：赋值\n"),s("ul",[s("li",[t._v("systemProperties：Java键值")]),t._v(" "),s("li",[t._v("systemEnvironment：系统键值")]),t._v(" "),s("li",[t._v("*.properties：自定义键值")])])])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220424102704758.png",alt:"image-20220424102704758"}})])]),t._v(" "),s("li",[s("p",[t._v("obtainFreshBeanFactory")]),t._v(" "),s("ul",[s("li",[t._v("创建BeanFactory作为ApplicationContext成员变量")]),t._v(" "),s("li",[s("code",[t._v("BeanFactory")]),t._v("：\n"),s("ul",[s("li",[t._v("bean创建、依赖注入、初始化")]),t._v(" "),s("li",[s("code",[t._v("BeanDefinition")]),t._v("：\n"),s("ul",[s("li",[t._v("bean的设计蓝图：单例多例、依赖关系、初始销魂方法")]),t._v(" "),s("li",[t._v("来源：xml、配置类、组件扫描")]),t._v(" "),s("li",[t._v("去处：存入BeanFactory的"),s("code",[t._v("beanDefinitionMap")])]),t._v(" "),s("li",[t._v("BeanFactory->BeanDefinition")])])])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220424103225891.png",alt:"image-20220424103225891"}})])]),t._v(" "),s("li",[s("p",[t._v("prepareBeanFactory")]),t._v(" "),s("ul",[s("li",[t._v("完善BeanFactory")]),t._v(" "),s("li",[t._v("beanExpressionResolver：解析SpEl")]),t._v(" "),s("li",[t._v("propertyEditorRegistrars：完成${}解析")]),t._v(" "),s("li",[s("code",[t._v("registerResolvableDependency")]),t._v("：注册BeanFactory和ApplicationContext，使他们也能依赖注入")]),t._v(" "),s("li",[t._v("beanPostProcessors：bean后处理器（生命周期各个阶段）\n"),s("ul",[s("li",[t._v("ApplicationContextAwareProcessor：解析Aware接口")]),t._v(" "),s("li",[t._v("ApplicationListenerDetector：解析ListenerDetector的bean")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220424103535658.png",alt:"image-20220424103535658"}})])]),t._v(" "),s("li",[s("p",[t._v("postProcessBeanFactory")]),t._v(" "),s("ul",[s("li",[t._v("模板方法：空实现，子类扩展")]),t._v(" "),s("li",[t._v("例："),s("code",[t._v("web")]),t._v("，注册新的scope，完善BeanFactory")])])]),t._v(" "),s("li",[s("p",[t._v("invokeBeanFactoryPostProcessors")]),t._v(" "),s("ul",[s("li",[t._v("调用BeanFactory后处理器")]),t._v(" "),s("li",[t._v("BeanFactory后处理器：\n"),s("ul",[s("li",[t._v("BeanFactory扩展点")]),t._v(" "),s("li",[t._v("常见：\n"),s("ul",[s("li",[s("code",[t._v("ConfigurationClassPostProcessor")]),t._v("：解析\n"),s("ul",[s("li",[t._v("@Configuration")]),t._v(" "),s("li",[t._v("@Bean")]),t._v(" "),s("li",[t._v("@Import")]),t._v(" "),s("li",[t._v("@PropertySource")])])]),t._v(" "),s("li",[t._v("PropertySourcesPlaceHolderConfigurer：替换BeanDefinition的${}")]),t._v(" "),s("li",[s("code",[t._v("MapperSacnnerConfigurer")]),t._v("：补充Mapper对应的BeanDefinition")])])])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220424105009586.png",alt:"image-20220424105009586"}})])]),t._v(" "),s("li",[s("p",[t._v("registerBeanPostProcessors")]),t._v(" "),s("ul",[s("li",[t._v("找后处理放到beanPostProcessors\n"),s("ul",[s("li",[s("code",[t._v("AutowiredAnnotaionBeanPostProcessor")]),t._v("：解析@Autowired、@Value")]),t._v(" "),s("li",[t._v("CommonAnnotationBeanPostProcessor：解析@Resource、@PostConstruct、@preDestroy")]),t._v(" "),s("li",[t._v("AnnotationAwareAspectJAutoProxyCreator：bean自动创建代理")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220424105359623.png",alt:"image-20220424105359623"}})])]),t._v(" "),s("li",[s("p",[t._v("initMessageSource")]),t._v(" "),s("ul",[s("li",[t._v("添加messageSource，实现国际化")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220424105612604.png",alt:"image-20220424105612604"}})])]),t._v(" "),s("li",[s("p",[t._v("initApplicationEventMulticaster")]),t._v(" "),s("ul",[s("li",[t._v("广播器：applicationContextEventMulticaster")]),t._v(" "),s("li",[t._v("作用："),s("code",[t._v("发布器")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220424105812219.png",alt:"image-20220424105812219"}})])]),t._v(" "),s("li",[s("p",[t._v("onRefresh")]),t._v(" "),s("ul",[s("li",[t._v("模板方法：空实现、子类扩展")]),t._v(" "),s("li",[t._v("例：SpringBoot准备webserver（"),s("code",[t._v("内嵌web容器")]),t._v("）")])])]),t._v(" "),s("li",[s("p",[t._v("registerListeners")]),t._v(" "),s("ul",[s("li",[t._v("找监听器放到applicationEventMulticaster")]),t._v(" "),s("li",[t._v("监听器：\n"),s("ul",[s("li",[t._v("实现"),s("code",[t._v("ApplicationListener")]),t._v("接口，重写"),s("code",[t._v("onApplicationEvent")]),t._v("方法")]),t._v(" "),s("li",[t._v("@EventListener")]),t._v(" "),s("li",[t._v("容器中的Bean")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220424110039354.png",alt:"image-20220424110039354"}})])]),t._v(" "),s("li",[s("p",[t._v("finishBeanFactoryInitialization")]),t._v(" "),s("ul",[s("li",[t._v("初始化非延迟bean，即"),s("strong",[t._v("所有bean都完成")])]),t._v(" "),s("li",[t._v("conversionService：PropertyEditor补充")]),t._v(" "),s("li",[t._v("embeddedValueResolvers：内嵌值解析器，解析@Value的${}（借用Environment功能）")]),t._v(" "),s("li",[t._v("singletonObjects：缓存单例对象")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220424110447509.png",alt:"image-20220424110447509"}})])]),t._v(" "),s("li",[s("p",[t._v("finishRefresh")]),t._v(" "),s("ul",[s("li",[t._v("添加"),s("code",[t._v("lifecycleProcessor")]),t._v("（控制生命周期）")]),t._v(" "),s("li",[s("strong",[t._v("context的start")]),t._v("：触发实现LifeCycle接口bean的start")]),t._v(" "),s("li",[s("strong",[t._v("context的stop")]),t._v("：触发实现LifeCycle接口bean的stop")]),t._v(" "),s("li",[s("code",[t._v("contextRefreshed")]),t._v("：整个refresh完成")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220424112016756.png",alt:"image-20220424112016756"}})])])]),t._v(" "),s("h2",{attrs:{id:"spring-bean生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean生命周期"}},[t._v("#")]),t._v(" spring bean生命周期")]),t._v(" "),s("ol",[s("li",[t._v("名称、缓存")]),t._v(" "),s("li",[t._v("父子容器")]),t._v(" "),s("li",[t._v("dependsOn")]),t._v(" "),s("li",[t._v("scope")]),t._v(" "),s("li",[t._v("创建bean")]),t._v(" "),s("li",[t._v("类型转换处理")]),t._v(" "),s("li",[t._v("销毁bean")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img2/image-20220604121221183.png",alt:"image-20220604121221183"}})]),t._v(" "),s("ol",[s("li",[s("p",[t._v("名称、缓存")]),t._v(" "),s("ul",[s("li",[t._v("别名->实际名称")]),t._v(" "),s("li",[t._v("缓存\n"),s("ul",[s("li",[s("code",[t._v("singletonFactories")]),t._v("：三级缓存，单例"),s("strong",[t._v("工厂对象")])]),t._v(" "),s("li",[s("code",[t._v("earlySingletonObjects")]),t._v("：二级缓存，单例"),s("strong",[t._v("工厂产品(多个成品)对象")])]),t._v(" "),s("li",[s("code",[t._v("singletonObjects")]),t._v("：一级缓存，单例"),s("strong",[t._v("成品对象")])])])])])]),t._v(" "),s("li",[s("p",[t._v("父子容器")]),t._v(" "),s("ul",[s("li",[t._v("父子容器bean可以重复")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("dependsOn")])]),t._v(" "),s("ul",[s("li",[t._v("非显式依赖：bean直接不存在依赖关系")]),t._v(" "),s("li",[t._v("作用：指定非显式依赖")])])]),t._v(" "),s("li",[s("p",[t._v("scope")]),t._v(" "),s("ul",[s("li",[t._v("singleton scope：单例池获取bean")]),t._v(" "),s("li",[t._v("prototype scope：每次进入创建")]),t._v(" "),s("li",[t._v("自定义 scope：request域获取bean")])])]),t._v(" "),s("li",[s("p",[t._v("创建bean")]),t._v(" "),s("ul",[s("li",[t._v("bean实例：\n"),s("ul",[s("li",[t._v("autowiredAnnotationBeanPostProcessor\n"),s("ul",[s("li",[t._v("@Autowired")]),t._v(" "),s("li",[t._v("唯一的带参构造")])])]),t._v(" "),s("li",[t._v("默认构造")])])]),t._v(" "),s("li",[t._v("依赖注入：\n"),s("ul",[s("li",[t._v("注意：都封装成"),s("code",[t._v("InjectionMetadata")]),t._v("依赖注入")]),t._v(" "),s("li",[t._v("AutowiredAnnotationBeanPostProcessor\n"),s("ul",[s("li",[t._v("@Autowired")]),t._v(" "),s("li",[t._v("@Value")])])]),t._v(" "),s("li",[t._v("CommonAnnotationBeanPostProcessor\n"),s("ul",[s("li",[t._v("@Resource")])])]),t._v(" "),s("li",[t._v("AUTOWIRE_BY_NAME\n"),s("ul",[s("li",[t._v("propertyValues名字")])])]),t._v(" "),s("li",[t._v("AUTOWIRE_BY_TYPE\n"),s("ul",[s("li",[t._v("propertyValues类型")])])]),t._v(" "),s("li",[t._v("applyPropertyValues\n"),s("ul",[s("li",[s("code",[t._v("<property name ref|value/>")])])])])])]),t._v(" "),s("li",[t._v("初始化：\n"),s("ul",[s("li",[t._v("内置aware接口\n"),s("ul",[s("li",[t._v("BeanNameAware")]),t._v(" "),s("li",[t._v("BeanFactoryAware")])])]),t._v(" "),s("li",[t._v("扩展aware接口\n"),s("ul",[s("li",[t._v("ApplicationContextAwareProcessor")])])]),t._v(" "),s("li",[t._v("@PostConstruct\n"),s("ul",[s("li",[t._v("CommonAnnotationBeanPostProcessor")])])]),t._v(" "),s("li",[t._v("InitializingBean")]),t._v(" "),s("li",[t._v("initMethod")]),t._v(" "),s("li",[t._v("aop代理\n"),s("ul",[s("li",[t._v("AnnotationAwareAspectJAutoProxyCreator")])])])])]),t._v(" "),s("li",[t._v("销毁\n"),s("ul",[s("li",[t._v("注意：存储时都封装成"),s("code",[t._v("DisposableBeanAdapter")]),t._v("对销毁适配")]),t._v(" "),s("li",[t._v("依据：\n"),s("ul",[s("li",[t._v("实现DisposableBean或AutoCloseable接口")]),t._v(" "),s("li",[t._v("自定义destroyMethod")]),t._v(" "),s("li",[t._v("@preDestroy")])])]),t._v(" "),s("li",[t._v("销毁的bean存储位置\n"),s("ul",[s("li",[t._v("singleton scope：BeanFactory")]),t._v(" "),s("li",[t._v("自定义 scope：对象的域")]),t._v(" "),s("li",[t._v("prototype scope：不会存储")])])])])])])]),t._v(" "),s("li",[s("p",[t._v("类型转换处理")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("getBean")]),t._v("类型不匹配，尝试类型转换")])])]),t._v(" "),s("li",[s("p",[t._v("销毁bean")]),t._v(" "),s("ul",[s("li",[t._v("时机：\n"),s("ul",[s("li",[t._v("singleton bean：\n"),s("ul",[s("li",[t._v("ApplicationContext.close")]),t._v(" "),s("li",[t._v("找到所有Disposeable")])])]),t._v(" "),s("li",[t._v("自定义 scope bean：\n"),s("ul",[s("li",[t._v("生命周期结束")])])]),t._v(" "),s("li",[t._v("prototype bean：\n"),s("ul",[s("li",[t._v("手动AutowireCapableBeanFactory.destroy")])])])])]),t._v(" "),s("li",[t._v("顺序：\n"),s("ol",[s("li",[t._v("后处理器，例@PreDestroy")]),t._v(" "),s("li",[t._v("DisposableBean接口销毁")]),t._v(" "),s("li",[t._v("destroyMethod")])])])])])]),t._v(" "),s("h2",{attrs:{id:"spring事务失效"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring事务失效"}},[t._v("#")]),t._v(" spring事务失效")]),t._v(" "),s("blockquote",[s("p",[t._v("八种")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("抛异常导致事务不能回滚")]),t._v(" "),s("ul",[s("li",[t._v("问题：默认回滚非检查异常")]),t._v(" "),s("li",[t._v("解决："),s("code",[t._v("@Transactional(rollbackFor = Exception.class)")])])]),t._v(" "),s("div",{staticClass:"language-Java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Service1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AccountMapper")]),t._v(" accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileNotFoundException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" fromBalance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findBalanceBy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fromBalance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" amount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileInputStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aaa"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("自己try-catch")]),t._v(" "),s("ul",[s("li",[t._v("原因：catch自己处理异常，没有抛出")]),t._v(" "),s("li",[t._v("解决：catch：throw new RuntimeException(e)")])]),t._v(" "),s("div",{staticClass:"language-Java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Service2")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AccountMapper")]),t._v(" accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rollbackFor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" fromBalance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findBalanceBy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fromBalance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" amount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileInputStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aaa"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileNotFoundException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("aop切面顺序")]),t._v(" "),s("ul",[s("li",[t._v("原因：切面优先级最低，自定义切面在内层（捕获异常后没有抛出）")]),t._v(" "),s("li",[t._v("解决：\n"),s("ul",[s("li",[t._v("catch：throw new RuntimeException(e)")]),t._v(" "),s("li",[t._v("调整MyAspect 顺序："),s("code",[t._v("@Order(Ordered.LOWEST_PRECEDENCE - 1)")])])])])]),t._v(" "),s("div",{staticClass:"language-Java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Service3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AccountMapper")]),t._v(" accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rollbackFor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileNotFoundException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" fromBalance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findBalanceBy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fromBalance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" amount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileInputStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aaa"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Aspect")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyAspect")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Around")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"execution(* transfer(..))"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Object")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("around")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProceedingJoinPoint")]),t._v(" pjp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerUtils")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"log:{}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pjp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTarget")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" pjp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("proceed")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Throwable")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("非public")]),t._v(" "),s("ul",[s("li",[t._v("原因：spring创建代理，添加事务（前提：public）")]),t._v(" "),s("li",[t._v("解决：改为public")])]),t._v(" "),s("div",{staticClass:"language-Java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Service4")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AccountMapper")]),t._v(" accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileNotFoundException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" fromBalance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findBalanceBy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fromBalance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" amount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("父子容器")]),t._v(" "),s("ul",[s("li",[t._v("原因：\n"),s("ul",[s("li",[t._v("WebConfig子容器")]),t._v(" "),s("li",[t._v("APPConfig父容器")]),t._v(" "),s("li",[t._v("子容器扫描范围过大")])])]),t._v(" "),s("li",[t._v("解决：所有bean放同一容器，不需要父子容器")])]),t._v(" "),s("div",{staticClass:"language-Java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("day04"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("controller")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Controller")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AccountController")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Service5")]),t._v(" service"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileNotFoundException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        service"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("day04"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("service")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Service5")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AccountMapper")]),t._v(" accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rollbackFor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("transfer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileNotFoundException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" fromBalance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findBalanceBy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fromBalance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" amount "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("from"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            accountMapper"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" amount"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 父")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"day04.tx.app.service"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@EnableTransactionManagement")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppConfig")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... 有事务相关配置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 子")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Configuration")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ComponentScan")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"day04.tx.app"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("WebConfig")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... 无事务配置")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("调用本类方法导致传播行为失效")]),t._v(" "),s("ul",[s("li",[t._v("原因：本类方法调用不走代理（没有增强）")]),t._v(" "),s("li",[t._v("解决：依赖注入自己")])]),t._v(" "),s("div",{staticClass:"language-Java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Service")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Service6")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("propagation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Propagation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("REQUIRED"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" rollbackFor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("foo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileNotFoundException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerUtils")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("propagation "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Propagation")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("REQUIRES_NEW"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" rollbackFor "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bar")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileNotFoundException")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerUtils")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("@"),s("code",[t._v("transactional")]),t._v("没有原子性")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("原因：事务原子性仅包含insert、update、delete、select  ... for update")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220425174916871.png",alt:"image-20220425174916871"}})])]),t._v(" "),s("li",[s("p",[t._v("解决：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("注意：synchronized也不行，保证目标方法原子性，外层commit没有保证")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220425175045451.png",alt:"image-20220425175045451"}})])]),t._v(" "),s("li",[s("p",[t._v("解法：select …… for update替换select")])])])])])])]),t._v(" "),s("h2",{attrs:{id:"spring-mvc执行流程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-mvc执行流程"}},[t._v("#")]),t._v(" spring mvc执行流程")]),t._v(" "),s("blockquote",[s("ul",[s("li",[t._v("准备阶段")]),t._v(" "),s("li",[t._v("匹配阶段")]),t._v(" "),s("li",[t._v("执行阶段")])])]),t._v(" "),s("p",[t._v("✔️准备：")]),t._v(" "),s("ul",[s("li",[t._v("dispatcherServlet->init->refresh->组件")])]),t._v(" "),s("ol",[s("li",[t._v("dispatcherServlet：init")]),t._v(" "),s("li",[t._v("init：创建spring容器，refresh")]),t._v(" "),s("li",[t._v("refresh：组件")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220425180658283.png",alt:"image-20220425180658283"}})]),t._v(" "),s("p",[t._v("✔️匹配：")]),t._v(" "),s("ul",[s("li",[t._v("用户请求->DispatcherServlet->HandlerMapping->HandlerMethod->HandlerExecutionChain->HandlerAdapter")])]),t._v(" "),s("ol",[s("li",[t._v("匹配路径，能识别@RequestMapping优先级最高")]),t._v(" "),s("li",[t._v("HandlerMethod：控制器对象和控制器方法信息")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220425181714830.png",alt:"image-20220425181714830"}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("HandlerExecutionChain：HandlerMethod和拦截器")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220425181836155.png",alt:"image-20220425181836155"}})]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("HandlerAdapter")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220425181912296.png",alt:"image-20220425181912296"}})]),t._v(" "),s("p",[t._v("✔️调用：")]),t._v(" "),s("ol",[s("li",[t._v("拦截器preHandle")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220425182040150.png",alt:"image-20220425182040150"}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("HandlerAdapter调用HandlerMethod")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220425182116054.png",alt:"image-20220425182116054"}})]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("第二步没有异常\n"),s("ul",[s("li",[t._v("返回ModelAndView")]),t._v(" "),s("li",[t._v("拦截器postHandler")]),t._v(" "),s("li",[t._v("解析视图")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220425182315522.png",alt:"image-20220425182315522"}})]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("有异常，进入HandlerExceptionResolver")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220425182431548.png",alt:"image-20220425182431548"}})]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v("拦截器afterCompletion")]),t._v(" "),s("li",[t._v("@ResponseBody：第二步生成JSON，不走视图解析")])]),t._v(" "),s("h2",{attrs:{id:"spring注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring注解"}},[t._v("#")]),t._v(" spring注解")]),t._v(" "),s("p",[t._v("✔️事务注解：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@EnableTransactionManagement")]),t._v("：\n"),s("ul",[s("li",[t._v("事务切面类：BeanFactoryTransactionAttributeSourceAdvisor")]),t._v(" "),s("li",[t._v("解析事务属性：TransactionAttributeSource")]),t._v(" "),s("li",[t._v("事务拦截器：TransactionInterceptor")]),t._v(" "),s("li",[t._v("事务监听工厂：TransactionalEventListenerFactory")])])]),t._v(" "),s("li",[s("code",[t._v("@Transactional")])])]),t._v(" "),s("p",[t._v("✔️核心："),s("code",[t._v("@Order")])]),t._v(" "),s("p",[t._v("✔️切面：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@EnableAspectJAutoProxy")]),t._v(" "),s("ul",[s("li",[t._v("加载AnnotationAwareAspectJAutoProxyCreator：bean后处理器，创建代理")])])])]),t._v(" "),s("p",[t._v("✔️组件扫描和配置类：")]),t._v(" "),s("ul",[s("li",[t._v("@Component")]),t._v(" "),s("li",[t._v("@Controller")]),t._v(" "),s("li",[t._v("@Service")]),t._v(" "),s("li",[t._v("@Repository")]),t._v(" "),s("li",[t._v("@ComponentScan")]),t._v(" "),s("li",[t._v("@Condition")]),t._v(" "),s("li",[t._v("@Configuration\n"),s("ul",[s("li",[t._v("作用：保证@Bean互相调用")])])]),t._v(" "),s("li",[t._v("@Bean：不支持重载")]),t._v(" "),s("li",[t._v("@Import：\n"),s("ul",[s("li",[t._v("用法：\n"),s("ul",[s("li",[t._v("引入单个bean")]),t._v(" "),s("li",[t._v("引入配置类")]),t._v(" "),s("li",[t._v("Selector引入多个类")]),t._v(" "),s("li",[t._v("BeanDefinition")])])]),t._v(" "),s("li",[t._v("解析规则：\n"),s("ul",[s("li",[t._v("同一配置类："),s("code",[t._v("先@Import后@Bean")])]),t._v(" "),s("li",[t._v("问题：后面解析覆盖前面")]),t._v(" "),s("li",[t._v("解决："),s("code",[t._v("DeferredImportSelector")]),t._v("（延迟导入选择器）")])])])])]),t._v(" "),s("li",[t._v("@Lazy：\n"),s("ul",[s("li",[t._v("类延迟实例化")])])]),t._v(" "),s("li",[t._v("@PropertySource")])]),t._v(" "),s("p",[t._v("✔️依赖注入：")]),t._v(" "),s("ul",[s("li",[t._v("@Autowired")]),t._v(" "),s("li",[t._v("@Qualifier")]),t._v(" "),s("li",[t._v("@Value")])]),t._v(" "),s("p",[t._v("mvc mapping：")]),t._v(" "),s("ul",[s("li",[t._v("@RequestMapping：派生多个注解，例@GetMapping、@PutMapping等")])]),t._v(" "),s("p",[t._v("mvc rest：")]),t._v(" "),s("ul",[s("li",[t._v("@RequestBody")]),t._v(" "),s("li",[s("code",[t._v("@ResponseBody")]),t._v("=@Controller+@RestController")]),t._v(" "),s("li",[t._v("@ResponseStatus")])]),t._v(" "),s("p",[t._v("mvc 统一处理：")]),t._v(" "),s("ul",[s("li",[t._v("@ControllerAdvice=@ResponseBody+@RestControllerAdvice")]),t._v(" "),s("li",[t._v("@ExceptionHandler")])]),t._v(" "),s("p",[t._v("mvc 参数：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@PathVariable")])])]),t._v(" "),s("p",[t._v("mvc ajax：")]),t._v(" "),s("ul",[s("li",[t._v("@CrossOrigin：跨域")])]),t._v(" "),s("p",[t._v("boot auto：")]),t._v(" "),s("ul",[s("li",[t._v("@SpringBootApplication")]),t._v(" "),s("li",[t._v("@EnableAutoConfiguration")]),t._v(" "),s("li",[t._v("@SpringBootCOnfiguration")])]),t._v(" "),s("p",[t._v("boot condition：")]),t._v(" "),s("ul",[s("li",[t._v("@ConditionanlOnClass：classpath存在某个class条件成立")]),t._v(" "),s("li",[t._v("@ConditionalOnMissingBean：BeanFactory不存在bean")]),t._v(" "),s("li",[t._v("@ConditionalOnProperty：配置文件存在property")])]),t._v(" "),s("p",[t._v("boot properties：")]),t._v(" "),s("ul",[s("li",[t._v("@ConfigurationProperties：当前bean和配置文件键值绑定")]),t._v(" "),s("li",[t._v("@EnableConfigurationProperties：\n"),s("ul",[s("li",[t._v("ConfigurationPropertiesBindingPostProcessor：bean后处理器，bean初始化前调用下面binder")]),t._v(" "),s("li",[t._v("ConfigurationPropertiesBinder：真正绑定")])])])]),t._v(" "),s("h2",{attrs:{id:"springboot-自动配置原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springboot-自动配置原理"}},[t._v("#")]),t._v(" springboot 自动配置原理")]),t._v(" "),s("p",[t._v("🔨原理：")]),t._v(" "),s("ul",[s("li",[t._v("@SpringBootConfiguration=@ComponentScan+@EnableAutoConfiguration+@SpringBootConfiguration\n"),s("ol",[s("li",[t._v("@SpringBootConfiguration 和@Configuration区别：只能出现一次")]),t._v(" "),s("li",[t._v("@ComponentScan：\n"),s("ul",[s("li",[t._v("excludeFilters：排除")])])]),t._v(" "),s("li",[t._v("@EnableAutoConfiguration：\n"),s("ul",[s("li",[t._v("@AutoConfigurationPackage：扫描包")]),t._v(" "),s("li",[t._v("@Import（AutoConfigurationImportSelector.class）：加载"),s("code",[t._v("META-INF/spring.factories")]),t._v("自动配置类")])])])])])]),t._v(" "),s("p",[t._v("🔨为什么不用@Import自动配置类：")]),t._v(" "),s("ul",[s("li",[t._v("原因：\n"),s("ul",[s("li",[t._v("主配置和自动配置类"),s("code",[t._v("强耦合")])]),t._v(" "),s("li",[t._v("自动配置类优先级高，导致后面被覆盖")])])]),t._v(" "),s("li",[t._v("解决：\n"),s("ul",[s("li",[s("code",[t._v("@Import(AutoConfigurationImportSelector.class)")]),t._v("：加载"),s("code",[t._v("META-INF/spring.factories")]),t._v("自动配置类")]),t._v(" "),s("li",[t._v("实现了"),s("code",[t._v("DeferredImportSelector")]),t._v("接口，延迟")])])])]),t._v(" "),s("h2",{attrs:{id:"spring的设计模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring的设计模式"}},[t._v("#")]),t._v(" spring的设计模式")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("单例：")]),t._v(" "),s("ul",[s("li",[t._v("org.springframework.aop.TruePointcut#INSTANCE")]),t._v(" "),s("li",[t._v("org.springframework.aop.interceptor.ExposeInvocationInterceptor#ADVISOR")]),t._v(" "),s("li",[t._v("org.springframework.core.annotation.AnnotationAwareOrderComparator#INSTANCE")]),t._v(" "),s("li",[t._v("org.springframework.core.OrderComparator#INSTANCE")]),t._v(" "),s("li",[t._v("注意："),s("code",[t._v("bean不是单例")])])])]),t._v(" "),s("li",[s("p",[t._v("建造者：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("优点：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("链式调用")]),t._v("，比较爽")]),t._v(" "),s("li",[t._v("灵活构建产品对象：没有build，产品不可用")])])]),t._v(" "),s("li",[s("p",[t._v("案例：")]),t._v(" "),s("ul",[s("li",[t._v("org.springframework.beans.factory.support.BeanDefinitionBuilder")]),t._v(" "),s("li",[t._v("org.springframework.web.util.UriComponentsBuilder")]),t._v(" "),s("li",[t._v("org.springframework.http.ResponseEntity.HeadersBuilder")]),t._v(" "),s("li",[t._v("org.springframework.http.ResponseEntity.BodyBuilder")])])])])]),t._v(" "),s("li",[s("p",[t._v("工厂方法：")])])]),t._v(" "),s("ul",[s("li",[t._v("ApplicationContext和BeanFactory：\n"),s("ul",[s("li",[t._v("getBean，"),s("code",[t._v("封装")]),t._v("了bean创建过程和具体"),s("strong",[t._v("实现")])])])]),t._v(" "),s("li",[t._v("案例：\n"),s("ul",[s("li",[t._v("org.springframework.beans.factory.FactoryBean")]),t._v(" "),s("li",[t._v("@Bean 标注的静态方法及实例方法")]),t._v(" "),s("li",[t._v("ObjectFactory 及 ObjectProvider")])])])]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("适配器：")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("org.springframework.web.servlet.HandlerAdapter")]),t._v(" "),s("ul",[s("li",[t._v("不同控制器（@Controller、@RequestMapping），必须适配为"),s("code",[t._v("HandlerAdapter")]),t._v("接口")])])]),t._v(" "),s("li",[s("p",[t._v("org.springframework.beans.factory.support.DisposableBeanAdapter")]),t._v(" "),s("ul",[s("li",[t._v("适配"),s("code",[t._v("DisposableBean")]),t._v("统一调用销毁方法")])])])]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[t._v("复合：")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("作用：")]),t._v(" "),s("ul",[s("li",[t._v("统一调用入口，委托具体干活实现")])])]),t._v(" "),s("li",[s("p",[t._v("单例")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("org.springframework.web.method.support.HandlerMethodArgumentResolverComposite")])]),t._v(" "),s("li",[s("p",[t._v("org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite")])]),t._v(" "),s("li",[s("p",[t._v("org.springframework.web.servlet.handler.HandlerExceptionResolverComposite")])]),t._v(" "),s("li",[s("p",[t._v("org.springframework.web.servlet.view.ViewResolverComposite")])])])])]),t._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[t._v("装饰者：")])]),t._v(" "),s("ul",[s("li",[t._v("org.springframework.web.util.ContentCachingRequestWrapper")])]),t._v(" "),s("ol",{attrs:{start:"7"}},[s("li",[t._v("代理：")])]),t._v(" "),s("ul",[s("li",[t._v("装饰者："),s("code",[t._v("注重功能增强")]),t._v("、避免子类通过继承来扩展功能")]),t._v(" "),s("li",[t._v("代理："),s("code",[t._v("注重目标访问")])]),t._v(" "),s("li",[t._v("案例：\n"),s("ul",[s("li",[t._v("org.springframework.aop.framework.JdkDynamicAopProxy")]),t._v(" "),s("li",[t._v("org.springframework.aop.framework.ObjenesisCglibAopProxy")])])])]),t._v(" "),s("ol",{attrs:{start:"8"}},[s("li",[t._v("责任链：")])]),t._v(" "),s("ul",[s("li",[t._v("org.springframework.web.servlet.HandlerInterceptor")])]),t._v(" "),s("ol",{attrs:{start:"9"}},[s("li",[t._v("观察者：")])]),t._v(" "),s("ul",[s("li",[t._v("org.springframework.context.ApplicationListener")]),t._v(" "),s("li",[t._v("org.springframework.context.event.ApplicationEventMulticaster")]),t._v(" "),s("li",[t._v("org.springframework.context.ApplicationEvent")])]),t._v(" "),s("ol",{attrs:{start:"10"}},[s("li",[t._v("策略模式：")])]),t._v(" "),s("ul",[s("li",[t._v("org.springframework.beans.factory.support.InstantiationStrategy")]),t._v(" "),s("li",[t._v("org.springframework.core.annotation.MergedAnnotations.SearchStrategy")]),t._v(" "),s("li",[t._v("org.springframework.boot.autoconfigure.condition.SearchStrategy")])]),t._v(" "),s("ol",{attrs:{start:"11"}},[s("li",[t._v("模板方法：")])]),t._v(" "),s("ul",[s("li",[t._v("JdbcTemplate，TransactionTemplate")]),t._v(" "),s("li",[t._v("AbstractApplicationContext")])]),t._v(" "),s("h2",{attrs:{id:"spring-bean-循环依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring-bean-循环依赖"}},[t._v("#")]),t._v(" spring bean 循环依赖")]),t._v(" "),s("h3",{attrs:{id:"解决set循环依赖的原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决set循环依赖的原理"}},[t._v("#")]),t._v(" 解决set循环依赖的原理")]),t._v(" "),s("p",[t._v("🔨一级缓存：")]),t._v(" "),s("ul",[s("li",[t._v("第一次getBean：放入singletonObjects一级缓存")]),t._v(" "),s("li",[t._v("后续getBean：缓存有，无需创建")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220428151711996.png",alt:"image-20220428151711996"}})]),t._v(" "),s("ul",[s("li",[s("p",[t._v("问题：")]),t._v(" "),s("ul",[s("li",[t._v("a获取b，b获取a：\n"),s("ul",[s("li",[t._v("由于没put，缓存不存在bean")]),t._v(" "),s("li",[t._v("陷入死循环")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220428151919648.png",alt:"image-20220428151919648"}})])])]),t._v(" "),s("p",[t._v("🔨二级缓存：")]),t._v(" "),s("ul",[s("li",[t._v("解决一级缓存问题：增加singletonFactories缓存")]),t._v(" "),s("li",[t._v("把半成品（未依赖注入和初始化）放到singletonFactories")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220428152151857.png",alt:"image-20220428152151857"}})]),t._v(" "),s("ul",[s("li",[s("p",[t._v("问题：")]),t._v(" "),s("ul",[s("li",[t._v("b拿到a的bean：\n"),s("ul",[s("li",[t._v("a半成品没有完成代理增强")]),t._v(" "),s("li",[t._v("拿到原始对象")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220427201431530.png",alt:"image-20220427201431530"}})])])]),t._v(" "),s("p",[t._v("🔨三级缓存：")]),t._v(" "),s("ul",[s("li",[t._v("解决二级缓存问题：将代理放在依赖注入之前（工厂判断是否提前创建代理）")]),t._v(" "),s("li",[t._v("b获取a的bean后，工厂把a的代理提前创建好放到earlySingletonObejcts")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220428153025363.png",alt:"image-20220428153025363"}})]),t._v(" "),s("h3",{attrs:{id:"三级缓存不能解决的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三级缓存不能解决的问题"}},[t._v("#")]),t._v(" 三级缓存不能解决的问题")]),t._v(" "),s("blockquote",[s("p",[t._v("构造方法上的参数")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220428154004253.png",alt:"image-20220428154004253"}})]),t._v(" "),s("blockquote",[s("p",[t._v("bean流程：创建、注入、初始化")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220428154111002.png",alt:"image-20220428154111002"}})]),t._v(" "),s("blockquote",[s("p",[t._v("解决：四种")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("a注入b的代理对象，b的真实对象，通过代理访问：")]),t._v(" "),s("ul",[s("li",[t._v("@Lazy")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220428154227500.png",alt:"image-20220428154227500"}})]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" log "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Lazy")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A(B b) {}"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getClass")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostConstruct")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"init()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("注入b的工厂，b的实例对象延迟创建：")]),t._v(" "),s("ul",[s("li",[t._v("ObjectProvider：延迟对象创建")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220428154353720.png",alt:"image-20220428154353720"}})]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" log "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjectProvider")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ObjectProvider")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A({})"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostConstruct")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"init()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("@Scope生成代理：")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Scope")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("proxyMode "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ScopedProxyMode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("TARGET_CLASS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Component")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" log "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"B"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"B({})"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostConstruct")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"init()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),s("li",[s("p",[t._v("加入Provider依赖：原理和ObjectProvider一样")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("javax.inject"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("javax.inject"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Logger")]),t._v(" log "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LoggerFactory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Provider")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("A")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Provider")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("B")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"A({}})"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("b "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@PostConstruct")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("init")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            log"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("debug")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"init()"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),s("h3",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("ul",[s("li",[t._v("单例set方法循环依赖：\n"),s("ul",[s("li",[t._v("一级缓存：存放成品对象")]),t._v(" "),s("li",[t._v("二级缓存：存放原始bean，也可能是代理bean")]),t._v(" "),s("li",[t._v("三级缓存：存放工厂对象")]),t._v(" "),s("li",[t._v("需要代理：工厂提前创建代理")])])]),t._v(" "),s("li",[t._v("构造方法和多例循环依赖解决：\n"),s("ul",[s("li",[t._v("@Lazy")]),t._v(" "),s("li",[t._v("@Scope")]),t._v(" "),s("li",[t._v("ObjectProvider")]),t._v(" "),s("li",[t._v("Provider")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220427204214007.png",alt:"image-20220427204214007"}})]),t._v(" "),s("h1",{attrs:{id:"javaguide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javaguide"}},[t._v("#")]),t._v(" JavaGuide")]),t._v(" "),s("h2",{attrs:{id:"java特点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java特点"}},[t._v("#")]),t._v(" Java特点")]),t._v(" "),s("ul",[s("li",[t._v("面向对象（封装、继承、多态）")]),t._v(" "),s("li",[t._v("生态强")]),t._v(" "),s("li",[t._v("可靠、安全")]),t._v(" "),s("li",[t._v("编译和解释并存（JIT即时编译器）")]),t._v(" "),s("li",[t._v("Java9：AOT（ahead of time）")])]),t._v(" "),s("h2",{attrs:{id:"jvm、jre、jdk"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jvm、jre、jdk"}},[t._v("#")]),t._v(" JVM、JRE、JDK")]),t._v(" "),s("ul",[s("li",[t._v("JVM：运行Java字节码的虚拟机，Hotspot VM")]),t._v(" "),s("li",[t._v("JRE：运行时环境，包含JVM、Java类库、Java命令等")]),t._v(" "),s("li",[t._v("JDK：创建和编译程序，包含JRE、javac(编译器)、javadoc(工具)")])]),t._v(" "),s("h2",{attrs:{id:"内部类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#内部类"}},[t._v("#")]),t._v(" 内部类")]),t._v(" "),s("blockquote",[s("p",[t._v("四种")])]),t._v(" "),s("ol",[s("li",[t._v("成员内部类")]),t._v(" "),s("li",[t._v("局部内部类（方法里有类）")]),t._v(" "),s("li",[t._v("静态内部类")]),t._v(" "),s("li",[t._v("匿名内部类\n"),s("ul",[s("li",[t._v("定义接口")]),t._v(" "),s("li",[t._v("接口下有一个方法")]),t._v(" "),s("li",[t._v("new 接口（必须实现方法）")]),t._v(" "),s("li",[t._v("底层案例：创建线程（Thread，内部有run方法）")])])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v(" \t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 局部内部类（方法内部类）")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dispaly")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" temp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// JDK8形参变为隐式final声明")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Inner")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法内部类即嵌套在方法里面, 不能使用修饰符public protected private")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// public static int age = 10; // 不能定义静态属性")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// public static void method2() { // 不能定义静态方法")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//     System.out.println(" ");')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// }")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以使用外部类的非静态属性 & 方法")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("age"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以使用外部的静态属性 & 方法")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Call method"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// temp++; // 不能改变final类型的值")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("temp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 但是可以调用")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法内部类在方法里面创建")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Inner")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"jdbc连接数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jdbc连接数据库"}},[t._v("#")]),t._v(" jdbc连接数据库")]),t._v(" "),s("blockquote",[s("p",[t._v("6步")]),t._v(" "),s("p",[t._v("jdbc:mysql://localhost:3306/数据库名")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("注册驱动（使用什么连接）")])]),t._v(" "),s("li",[s("p",[t._v("获取连接（账号、密码、数据库名）")])]),t._v(" "),s("li",[s("p",[t._v("获取传输器")])]),t._v(" "),s("li",[s("p",[t._v("通过传输器写SQL执行")])]),t._v(" "),s("li",[s("p",[t._v("处理数据")])]),t._v(" "),s("li",[s("p",[t._v("关闭连接")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",[s("code",[t._v(" \t\t\t\t\t\t\t\thttp://luocode.top/\n")])])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220505194123810.png",alt:"image-20220505194123810"}})]),t._v(" "),s("h2",{attrs:{id:"java-编译和解释并存"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-编译和解释并存"}},[t._v("#")]),t._v(" Java 编译和解释并存")]),t._v(" "),s("ul",[s("li",[t._v("编译：一次性编译")]),t._v(" "),s("li",[t._v("解释：一句一句解释")]),t._v(" "),s("li",[t._v("Java：先编译后解释")])]),t._v(" "),s("h2",{attrs:{id:"方法类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#方法类型"}},[t._v("#")]),t._v(" 方法类型")]),t._v(" "),s("ol",[s("li",[t._v("无返回值无参数")]),t._v(" "),s("li",[t._v("无返回值有参数")]),t._v(" "),s("li",[t._v("有返回值无参数")]),t._v(" "),s("li",[t._v("有返回值有参数")])]),t._v(" "),s("h2",{attrs:{id:"静态方法为什么不能调用非静态"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#静态方法为什么不能调用非静态"}},[t._v("#")]),t._v(" 静态方法为什么不能调用非静态")]),t._v(" "),s("blockquote",[s("p",[t._v("类加载时就创建静态，非静态需要等待实例化")])]),t._v(" "),s("h2",{attrs:{id:"重载和重写"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重载和重写"}},[t._v("#")]),t._v(" 重载和重写")]),t._v(" "),s("ul",[s("li",[t._v("重载：\n"),s("ul",[s("li",[t._v("概述：方法名相同，参数一定不同，其他可同可不同")])])]),t._v(" "),s("li",[t._v("重写：\n"),s("ul",[s("li",[t._v("概述：子类重写父类方法")]),t._v(" "),s("li",[t._v("两同两小一大：\n"),s("ul",[s("li",[t._v("两同：方法名、参数")]),t._v(" "),s("li",[t._v("两小：异常、返回值类型")]),t._v(" "),s("li",[t._v("一大：访问修饰符")])])])])])]),t._v(" "),s("h2",{attrs:{id:"可变参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#可变参数"}},[t._v("#")]),t._v(" 可变参数")]),t._v(" "),s("blockquote",[s("p",[t._v("String ... args")]),t._v(" "),s("p",[t._v("底层：转为数组")])]),t._v(" "),s("h2",{attrs:{id:"基本类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本类型"}},[t._v("#")]),t._v(" 基本类型")]),t._v(" "),s("p",[t._v("byte short int long boolean char float double")]),t._v(" "),s("p",[t._v("1         2      4      8       1           2       4       8")]),t._v(" "),s("h2",{attrs:{id:"包装类型的常量池"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#包装类型的常量池"}},[t._v("#")]),t._v(" 包装类型的常量池")]),t._v(" "),s("ul",[s("li",[t._v("Byte，Short、Integer、Long：【-128，127】")]),t._v(" "),s("li",[t._v("Character：【0，127】")]),t._v(" "),s("li",[t._v("Float、Double：没有常量池")]),t._v(" "),s("li",[t._v("建议：都有equals比较")]),t._v(" "),s("li",[t._v("装箱和拆箱：Integer\n"),s("ul",[s("li",[t._v("Integer i=Integer.valueOf(10)")]),t._v(" "),s("li",[t._v("i.intValue()")])])])]),t._v(" "),s("h2",{attrs:{id:"面向过程和面向对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#面向过程和面向对象"}},[t._v("#")]),t._v(" 面向过程和面向对象")]),t._v(" "),s("ul",[s("li",[t._v("过程：问题拆分成一个个方法")]),t._v(" "),s("li",[t._v("对象：先抽象出对象，然后问题拆分成一个个方法")])]),t._v(" "),s("h2",{attrs:{id:"成员变量和局部变量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#成员变量和局部变量"}},[t._v("#")]),t._v(" 成员变量和局部变量")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("成员")]),t._v(" "),s("th",[t._v("局部")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("语法")]),t._v(" "),s("td",[t._v("类")]),t._v(" "),s("td",[t._v("方法里，方法的参数")])]),t._v(" "),s("tr",[s("td",[t._v("存储")]),t._v(" "),s("td",[t._v("实例，堆")]),t._v(" "),s("td",[t._v("栈")])]),t._v(" "),s("tr",[s("td",[t._v("默认值")]),t._v(" "),s("td",[t._v("有")]),t._v(" "),s("td",[t._v("没有")])]),t._v(" "),s("tr",[s("td",[t._v("生存时间")]),t._v(" "),s("td",[t._v("实例")]),t._v(" "),s("td",[t._v("调用结束消失")])])])]),t._v(" "),s("h2",{attrs:{id:"类的构造方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类的构造方法"}},[t._v("#")]),t._v(" 类的构造方法")]),t._v(" "),s("blockquote",[s("p",[t._v("完成对象的初始化")]),t._v(" "),s("p",[t._v("注意：不能被重写，但可以重载（多个名字一样，方法参数不同）")])]),t._v(" "),s("h2",{attrs:{id:"面向对象三大特征"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#面向对象三大特征"}},[t._v("#")]),t._v(" 面向对象三大特征")]),t._v(" "),s("ul",[s("li",[t._v("封装：\n"),s("ul",[s("li",[t._v("空调\n"),s("ul",[s("li",[t._v("里面零件：属性")]),t._v(" "),s("li",[t._v("空调遥控器：方法")])])])])]),t._v(" "),s("li",[t._v("继承：\n"),s("ul",[s("li",[t._v("子类不能访问父类私有方法和属性")])])]),t._v(" "),s("li",[t._v("多态：\n"),s("ul",[s("li",[t._v("父类引用指向子类")]),t._v(" "),s("li",[t._v("体现：继承、实现\n"),s("ul",[s("li",[t._v("类只能单继承，但接口可以继承多个接口")]),t._v(" "),s("li",[t._v("实现多个接口")])])])])])]),t._v(" "),s("h2",{attrs:{id:"接口和抽象类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接口和抽象类"}},[t._v("#")]),t._v(" 接口和抽象类")]),t._v(" "),s("ul",[s("li",[t._v("接口：\n"),s("ul",[s("li",[t._v("成员变量（public static final）不可变")]),t._v(" "),s("li",[t._v("被实现")])])]),t._v(" "),s("li",[t._v("抽象类：\n"),s("ul",[s("li",[t._v("成员可变")]),t._v(" "),s("li",[t._v("被继承")])])])]),t._v(" "),s("h2",{attrs:{id:"equals和hashcode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#equals和hashcode"}},[t._v("#")]),t._v(" equals和hashCode")]),t._v(" "),s("blockquote",[s("p",[t._v("注意：String的equals（比较值）被底层重写过了，不是父类Object方法（比较内存地址）")])]),t._v(" "),s("p",[t._v("先hashCode在equals：")]),t._v(" "),s("ul",[s("li",[t._v("作用：效率提高")]),t._v(" "),s("li",[t._v("例：HashSet添加\n"),s("ul",[s("li",[t._v("hashCode判断值不同，直接判定两者不是同一个对象")]),t._v(" "),s("li",[t._v("hashCode相同不一定是同对象")]),t._v(" "),s("li",[t._v("同对象：hashCode相同、equals相等")]),t._v(" "),s("li",[t._v("即：equals被重写，hashCode也需被重写")])])])]),t._v(" "),s("h2",{attrs:{id:"string、stringbuffer、stringbuilder"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#string、stringbuffer、stringbuilder"}},[t._v("#")]),t._v(" String、StringBuffer、StringBuilder")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("String：操作少量数据")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("StringBuilder")]),t._v("（不安全）：单线程操作大量数据")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("StringBuffer")]),t._v("（安全）：多线程操作大量数据")])]),t._v(" "),s("li",[s("p",[t._v("父类："),s("code",[t._v("AbstractStringBuilder")])])]),t._v(" "),s("li",[s("p",[t._v("注意："),s("code",[t._v("String")]),t._v("是不可变的")]),t._v(" "),s("ul",[s("li",[t._v('例：String s1="hello"，s1="java"')]),t._v(" "),s("li",[t._v('底层：s1=new String("java")')]),t._v(" "),s("li",[t._v("原因：private final char value[];\n"),s("ul",[s("li",[s("code",[t._v("私有")]),t._v("，没有对外提供访问方法")]),t._v(" "),s("li",[s("code",[t._v("final")]),t._v("：只是说char[]引用不可变，里面内容还是可变的")])])])])]),t._v(" "),s("li",[s("p",[t._v('new String("Java")')]),t._v(" "),s("ul",[s("li",[s("p",[t._v("问题：常量池没有Java，会创建两个字符串对象")]),t._v(" "),s("p",[s("img",{attrs:{src:"tu-pian/image-20220508174903682.png",alt:"image-20220508174903682"}})])])])]),t._v(" "),s("li",[s("p",[t._v("intern：常量池有直接返回，没有创建")])])]),t._v(" "),s("h2",{attrs:{id:"exception和error"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exception和error"}},[t._v("#")]),t._v(" Exception和Error")]),t._v(" "),s("blockquote",[s("p",[t._v("父类是Throwable（类）")])]),t._v(" "),s("ul",[s("li",[t._v("Exception：\n"),s("ul",[s("li",[t._v("受检异常\n"),s("ul",[s("li",[t._v("描述：需要try-catch")])])]),t._v(" "),s("li",[t._v("非受检异常\n"),s("ul",[s("li",[t._v("数组越界")]),t._v(" "),s("li",[t._v("空指针")]),t._v(" "),s("li",[t._v("算术（除0）")])])])])]),t._v(" "),s("li",[t._v("Error：运行时报错\n"),s("ul",[s("li",[t._v("栈内存溢出")]),t._v(" "),s("li",[t._v("堆内存溢出")])])])]),t._v(" "),s("h2",{attrs:{id:"try-catch-finally"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#try-catch-finally"}},[t._v("#")]),t._v(" try-catch-finally")]),t._v(" "),s("ul",[s("li",[t._v("try里有返回值，finally不能有返回值")]),t._v(" "),s("li",[t._v("原因：try的返回值会存到一个变量中，等finally执行完后在返回，此时finally返回值会把之前覆盖")]),t._v(" "),s("li",[t._v("注意：finally不一定会执行，例：系统停止运行（线程死亡），断电")]),t._v(" "),s("li",[t._v("区别：try-with-resource（有关闭资源需求的使用，可以自动关闭，不用close）")])]),t._v(" "),s("h2",{attrs:{id:"泛型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#泛型"}},[t._v("#")]),t._v(" 泛型")]),t._v(" "),s("ul",[s("li",[t._v("泛型类")]),t._v(" "),s("li",[t._v("泛型接口")]),t._v(" "),s("li",[t._v("泛型方法：\n"),s("ul",[s("li",[t._v("问题(静态方法)：只能使用方法指定的类型，而该类上指定的泛型不可用")]),t._v(" "),s("li",[t._v("原因：静态初始化比类的实例化早，所以不知道类的泛型类型是什么")])])]),t._v(" "),s("li",[t._v("案例：\n"),s("ul",[s("li",[t._v("ExcelUtil：Excel导出数据类型")]),t._v(" "),s("li",[t._v("Collections：sort、binarySearch")]),t._v(" "),s("li",[t._v("CommonResult：动态结果返回类型")])])])]),t._v(" "),s("h2",{attrs:{id:"反射"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#反射"}},[t._v("#")]),t._v(" 反射")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("优点：运行分析类，为框架提供开箱即用，因为可以获取类的所有属性和方法")])]),t._v(" "),s("li",[s("p",[t._v("缺点：跳过了泛型安全检查（编译）")])]),t._v(" "),s("li",[s("p",[t._v("案例：")]),t._v(" "),s("ul",[s("li",[t._v("动态代理，"),s("code",[t._v("method.invoke")])]),t._v(" "),s("li",[t._v("springboot的注解，"),s("code",[t._v("@Component")]),t._v("生成Bean、"),s("code",[t._v("@Value")]),t._v("属性获取值")])])])]),t._v(" "),s("h2",{attrs:{id:"序列化和反序列化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#序列化和反序列化"}},[t._v("#")]),t._v(" 序列化和反序列化")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("序列化：将对象"),s("code",[t._v("object")]),t._v("转字节"),s("code",[t._v("class")])])]),t._v(" "),s("li",[s("p",[t._v("反序列化：字节"),s("code",[t._v("class")]),t._v("转"),s("code",[t._v("object")])])]),t._v(" "),s("li",[s("p",[t._v("作用：序列化后字节方便存储到数据库、网络发送、文件等，其他计算机就把复杂对象恢复（反序列化）")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/image-20220515113701196.png",alt:"image-20220515113701196"}})])]),t._v(" "),s("li",[s("p",[t._v("注意：只有变量可以控制不被序列化，加"),s("code",[t._v("transient")]),t._v("关键字")])])]),t._v(" "),s("h2",{attrs:{id:"io流"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#io流"}},[t._v("#")]),t._v(" IO流")]),t._v(" "),s("p",[t._v("✔️划分：")]),t._v(" "),s("ul",[s("li",[t._v("流：输入流和输出流")]),t._v(" "),s("li",[t._v("操作结构：字节流和字符流")]),t._v(" "),s("li",[t._v("流的角色：节点流和处理流")]),t._v(" "),s("li",[t._v("注意：\n"),s("ul",[s("li",[t._v("节点流：和数据源打交道，例"),s("code",[t._v("FileReader")])]),t._v(" "),s("li",[t._v("处理流：封装节点流，有缓存作用，构造方法需要一个流对象，例"),s("code",[t._v("BufferReader")])])])])]),t._v(" "),s("h2",{attrs:{id:"集合"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#集合"}},[t._v("#")]),t._v(" 集合")]),t._v(" "),s("ul",[s("li",[t._v("两大接口：\n"),s("ul",[s("li",[s("code",[t._v("Collection")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("List")]),t._v("：有序可重复\n"),s("ul",[s("li",[t._v("ArrayList：数组")]),t._v(" "),s("li",[t._v("Vector：数组")]),t._v(" "),s("li",[t._v("LinkedList：双向链表")])])]),t._v(" "),s("li",[s("strong",[t._v("Set")]),t._v("：无序不可重复\n"),s("ul",[s("li",[t._v("HashSet：HashMap")]),t._v(" "),s("li",[t._v("LinkedHashSet：HashSet")]),t._v(" "),s("li",[t._v("TreeSet：红黑树")])])]),t._v(" "),s("li",[s("strong",[t._v("Queue")]),t._v("：有序可重复\n"),s("ul",[s("li",[t._v("PriorityQueue：数组")])])])])]),t._v(" "),s("li",[s("code",[t._v("Map")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("HashMap")]),t._v("：\n"),s("ul",[s("li",[t._v("键(唯一性)：无序不可重复")]),t._v(" "),s("li",[t._v("值：无序可重复")]),t._v(" "),s("li",[t._v("数组+链表/红黑树，拉链法（即相同位置变成链表）")])])]),t._v(" "),s("li",[s("strong",[t._v("LinkedHashMap")]),t._v("：\n"),s("ul",[s("li",[t._v("数组+链表/红黑树")]),t._v(" "),s("li",[t._v("多了双向链表")])])]),t._v(" "),s("li",[s("strong",[t._v("HashTable")]),t._v("：数组+链表")]),t._v(" "),s("li",[s("strong",[t._v("TreeMap")]),t._v("：红黑树")])])])])])]),t._v(" "),s("h2",{attrs:{id:"list"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#list"}},[t._v("#")]),t._v(" List")]),t._v(" "),s("ul",[s("li",[t._v("ArrayList和Vector：两者都是数组，前者不安全，后者安全但古老")]),t._v(" "),s("li",[t._v("注意：ArrayList随机访问并不是因为实现了"),s("code",[t._v("RandomAccess")]),t._v("（标识），是因为数组具有天然的随机访问能力")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("ArrayList")]),t._v(" "),s("th",[t._v("LinkedList")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("结构")]),t._v(" "),s("td",[t._v("数组")]),t._v(" "),s("td",[t._v("双向链表")])]),t._v(" "),s("tr",[s("td",[t._v("随机访问")]),t._v(" "),s("td",[t._v("能")]),t._v(" "),s("td",[t._v("不能")])]),t._v(" "),s("tr",[s("td",[t._v("安全")]),t._v(" "),s("td",[t._v("不安全")]),t._v(" "),s("td",[t._v("不安全")])]),t._v(" "),s("tr",[s("td",[t._v("内存")]),t._v(" "),s("td",[t._v("末尾预留一定空间")]),t._v(" "),s("td",[t._v("前驱后继+数据")])])])]),t._v(" "),s("h2",{attrs:{id:"comparable和comparator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#comparable和comparator"}},[t._v("#")]),t._v(" Comparable和Comparator")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("Comparable")]),t._v("：\n"),s("ul",[s("li",[t._v("java.lang")]),t._v(" "),s("li",[t._v("compareto（一个参数）")])])]),t._v(" "),s("li",[s("code",[t._v("Comparator")]),t._v("：\n"),s("ul",[s("li",[t._v("java.util")]),t._v(" "),s("li",[t._v("compare（两个参数）")])])])]),t._v(" "),s("h2",{attrs:{id:"无序性和不可重复性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#无序性和不可重复性"}},[t._v("#")]),t._v(" 无序性和不可重复性")]),t._v(" "),s("ul",[s("li",[t._v("无序性：数据在底层存储不是按照"),s("code",[t._v("索引")]),t._v("，而是"),s("code",[t._v("按照hash值")])]),t._v(" "),s("li",[t._v("不可重复性：equals比较，必须重写"),s("code",[t._v("hashCode")]),t._v("和"),s("code",[t._v("equals")])])]),t._v(" "),s("h2",{attrs:{id:"queue和deque"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#queue和deque"}},[t._v("#")]),t._v(" Queue和Deque")]),t._v(" "),s("ul",[s("li",[t._v("Queue：\n"),s("ul",[s("li",[t._v("单端队列：一端删除，一端插入")])])]),t._v(" "),s("li",[t._v("Deque：\n"),s("ul",[s("li",[t._v("双端队列：两边可以插入和删除")])])])]),t._v(" "),s("h2",{attrs:{id:"hashmap和hashtable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hashmap和hashtable"}},[t._v("#")]),t._v(" HashMap和HashTable")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("HashMap")]),t._v(" "),s("th",[t._v("HashTable")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("安全")]),t._v(" "),s("td",[t._v("不安全")]),t._v(" "),s("td",[t._v("安全")])]),t._v(" "),s("tr",[s("td",[t._v("key和value")]),t._v(" "),s("td",[t._v("可以为null")]),t._v(" "),s("td",[t._v("不可以为null")])]),t._v(" "),s("tr",[s("td",[t._v("扩容")]),t._v(" "),s("td",[t._v("初始16，2n")]),t._v(" "),s("td",[t._v("初始11，2n+1")])]),t._v(" "),s("tr",[s("td",[t._v("底层数据结构")]),t._v(" "),s("td",[t._v("数组+链表/红黑树")]),t._v(" "),s("td",[t._v("数组+链表")])])])]),t._v(" "),s("p",[t._v("HashMap和TreeMap：TreeMap比HashMap多了搜索和排序")]),t._v(" "),s("h2",{attrs:{id:"hashset去重"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hashset去重"}},[t._v("#")]),t._v(" HashSet去重")]),t._v(" "),s("blockquote",[s("p",[t._v("先计算对象的hashCode值，值一样，使用equals判断")]),t._v(" "),s("p",[t._v("注意（对象）：需要重写hashCode和equals")])]),t._v(" "),s("h2",{attrs:{id:"hashmap-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#hashmap-2"}},[t._v("#")]),t._v(" HashMap")]),t._v(" "),s("ul",[s("li",[t._v("扰动函数：得到hash值，之后通过(n-1)&hash获取位置")]),t._v(" "),s("li",[t._v("1.7JDK：扰动四次")]),t._v(" "),s("li",[t._v("1.8JDK：扰动一次")]),t._v(" "),s("li",[t._v("为什么HashMap长度是2的幂次方：n-1保证全是1\n"),s("ul",[s("li",[t._v("(n-1)&hash")]),t._v(" "),s("li",[t._v("4-1=3          11")]),t._v(" "),s("li",[t._v("16-1=15           1111")]),t._v(" "),s("li",[t._v("n&hash==(n-1)&hash，&效率高")])])])]),t._v(" "),s("h2",{attrs:{id:"concurrenthashmap和hashtable"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#concurrenthashmap和hashtable"}},[t._v("#")]),t._v(" ConcurrentHashMap和HashTable")]),t._v(" "),s("ul",[s("li",[t._v("segment：继承了ReentrantLock，访问数组元素HashEntry，必须获得segment的可重入锁")])]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("ConcurrentHashMap")]),t._v(" "),s("th",[t._v("HashTable")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("结构")]),t._v(" "),s("td",[t._v("1.7segment数组+链表/红黑树        1.8Node+链表/红黑树")]),t._v(" "),s("td",[t._v("数组+链表")])]),t._v(" "),s("tr",[s("td",[t._v("锁")]),t._v(" "),s("td",[t._v("每个segment一个锁，互不影响    CAS和synchronized")]),t._v(" "),s("td",[t._v("全局锁，锁住其他就不可使用，效率低")])])])]),t._v(" "),s("h2",{attrs:{id:"集合和数组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#集合和数组"}},[t._v("#")]),t._v(" 集合和数组")]),t._v(" "),s("ul",[s("li",[t._v("集合转数组："),s("code",[t._v("toArray")]),t._v("(new String(0))，其中String(0)起指定类型作用")]),t._v(" "),s("li",[t._v("数组转集合："),s("code",[t._v("asList")])])]),t._v(" "),s("h2",{attrs:{id:"进程和线程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进程和线程"}},[t._v("#")]),t._v(" 进程和线程")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("进程")]),t._v("：系统运行程序的基本单位，JVM进程，main是线程，exe文件运行是进程")]),t._v(" "),s("li",[s("code",[t._v("线程")]),t._v("：多个线程互相影响，互相调用\n"),s("ul",[s("li",[t._v("共享："),s("code",[t._v("堆、方法区")]),t._v(" "),s("ul",[s("li",[t._v("堆：存放对象")]),t._v(" "),s("li",[t._v("方法区：静态变量")])])]),t._v(" "),s("li",[s("code",[t._v("私有")]),t._v("：程序计数器、本地方法栈、虚拟栈\n"),s("ul",[s("li",[t._v("程序计数器：多线程下记录切换的位置")]),t._v(" "),s("li",[t._v("本地方法栈、虚拟栈：存局部变量，防止局部变量共享")])])])])])]),t._v(" "),s("h2",{attrs:{id:"并发和并行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#并发和并行"}},[t._v("#")]),t._v(" 并发和并行")]),t._v(" "),s("ul",[s("li",[t._v("并发：同一时间点，不可能同时运行，并发只是有多个线程运行")]),t._v(" "),s("li",[t._v("并行：同一时间点，同时运行")])]),t._v(" "),s("h2",{attrs:{id:"为什么使用多线程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么使用多线程"}},[t._v("#")]),t._v(" 为什么使用多线程")]),t._v(" "),s("blockquote",[s("p",[t._v("多线程效率高，成本比进程低")]),t._v(" "),s("p",[t._v("如今并发量高，多核下的多线程提高并发性能")])]),t._v(" "),s("h2",{attrs:{id:"线程的生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#线程的生命周期"}},[t._v("#")]),t._v(" 线程的生命周期")]),t._v(" "),s("ol",[s("li",[t._v("new：创建，未调用start()")]),t._v(" "),s("li",[t._v("Runable：可运行")]),t._v(" "),s("li",[t._v("Blocked：阻塞，"),s("code",[t._v("等待锁")])]),t._v(" "),s("li",[t._v("Waiting：等待，需要其他线程唤醒")]),t._v(" "),s("li",[t._v("Time_Waiting：有一定时间等待，超过时间自动醒")]),t._v(" "),s("li",[t._v("Terminal：停止运行")])]),t._v(" "),s("h2",{attrs:{id:"死锁"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#死锁"}},[t._v("#")]),t._v(" 死锁")]),t._v(" "),s("p",[t._v("🔨产生条件：")]),t._v(" "),s("ul",[s("li",[t._v("互斥：资源只能被一个线程获得")]),t._v(" "),s("li",[t._v("请求与保持：请求其他资源得不到响应，没有释放自己有的资源")]),t._v(" "),s("li",[t._v("不剥夺：其他线程不抢夺阻塞的线程资源")]),t._v(" "),s("li",[t._v("循环等待：形成一个头尾相连")])]),t._v(" "),s("h2",{attrs:{id:"为什么不能直接调用run-而是调用start"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么不能直接调用run-而是调用start"}},[t._v("#")]),t._v(" 为什么不能直接调用run()，而是调用start()")]),t._v(" "),s("blockquote",[s("p",[t._v("注意：调用完start，无需调用run")])]),t._v(" "),s("ul",[s("li",[t._v("直接调用run，被当做当前线程的方法调用，"),s("code",[t._v("不会启动新线程")])]),t._v(" "),s("li",[t._v("start：会"),s("code",[t._v("创建新线程")])])]),t._v(" "),s("h2",{attrs:{id:"synchronized"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#synchronized"}},[t._v("#")]),t._v(" synchronized")]),t._v(" "),s("ul",[s("li",[t._v("添加：\n"),s("ul",[s("li",[t._v("实例方法（对象）")]),t._v(" "),s("li",[t._v("静态方法（类）")]),t._v(" "),s("li",[t._v("代码块（类）")])])]),t._v(" "),s("li",[t._v("synchronized和reentrantlock：\n"),s("ul",[s("li",[t._v("相同：\n"),s("ul",[s("li",[t._v("可重入锁，即获取锁后可以继续获取该锁，计数器+1，计数器=0才释放锁")])])]),t._v(" "),s("li",[t._v("不同：\n"),s("ul",[s("li",[s("code",[t._v("reentrantlock")]),t._v("可以公平，也可以非公平（不按顺序获取锁），"),s("code",[t._v("JDK")])]),t._v(" "),s("li",[s("code",[t._v("synchronized")]),t._v("非公平，"),s("code",[t._v("JVM")])])])])])]),t._v(" "),s("li",[t._v("synchronized和volatile：\n"),s("ul",[s("li",[t._v("互补")]),t._v(" "),s("li",[t._v("volatile：注重多线程"),s("code",[t._v("可见")]),t._v("，只能修饰变量")]),t._v(" "),s("li",[t._v("synchronized：注重多线程资源"),s("code",[t._v("同步性")]),t._v("，变量、方法、代码块")])])])]),t._v(" "),s("h2",{attrs:{id:"volatile-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#volatile-2"}},[t._v("#")]),t._v(" volatile")]),t._v(" "),s("blockquote",[s("p",[t._v("保证可见性、有序性，不能保证原子性")]),t._v(" "),s("p",[t._v("并发编程三大特性：原子、可见、有序")])]),t._v(" "),s("h2",{attrs:{id:"juc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#juc"}},[t._v("#")]),t._v(" JUC")]),t._v(" "),s("blockquote",[s("p",[t._v("java.util.concurrent：简称JUC，只是一个包，下面有很多类")])]),t._v(" "),s("p",[t._v("🔨Atomic：原子类")]),t._v(" "),s("ul",[s("li",[t._v("基本类型：\n"),s("ul",[s("li",[t._v("Atomic"),s("code",[t._v("Integer")]),t._v(" "),s("ul",[s("li",[t._v("get")]),t._v(" "),s("li",[t._v("getAndSet")]),t._v(" "),s("li",[t._v("getAndIncrement")]),t._v(" "),s("li",[s("code",[t._v("CAS+native")]),t._v("保证原子性")])])]),t._v(" "),s("li",[t._v("Atomic"),s("code",[t._v("Long")])]),t._v(" "),s("li",[t._v("Atomic"),s("code",[t._v("Boolean")])])])]),t._v(" "),s("li",[t._v("数组：\n"),s("ul",[s("li",[t._v("Atomic"),s("code",[t._v("Integer")]),t._v("Array")]),t._v(" "),s("li",[t._v("Atomic"),s("code",[t._v("Long")]),t._v("Array")]),t._v(" "),s("li",[t._v("Atomic"),s("code",[t._v("Reference")]),t._v("Array")])])]),t._v(" "),s("li",[t._v("引用：\n"),s("ul",[s("li",[t._v("AtomicReference")]),t._v(" "),s("li",[t._v("Atomic"),s("code",[t._v("Stamped")]),t._v("Reference：带有版本号")]),t._v(" "),s("li",[t._v("Atomic"),s("code",[t._v("Markable")]),t._v("Referenc：标记")])])]),t._v(" "),s("li",[t._v("引用的字段修改：\n"),s("ul",[s("li",[t._v("Atomic"),s("code",[t._v("Integer")]),t._v("FieldUpdater")]),t._v(" "),s("li",[t._v("Atomic"),s("code",[t._v("Long")]),t._v("FieldUpdater")]),t._v(" "),s("li",[t._v("Atomic"),s("code",[t._v("Reference")]),t._v("FieldUpdater")])])])]),t._v(" "),s("h2",{attrs:{id:"aqs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aqs"}},[t._v("#")]),t._v(" AQS")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("AbstractQueuedSynchronizer")]),t._v("，抽象队列同步器")])]),t._v(" "),s("p",[t._v("🔨原理：")]),t._v(" "),s("ul",[s("li",[t._v("请求资源空闲，占用后锁定，否则到"),s("code",[t._v("CLH")]),t._v("队列等待（无需维护前驱后继，只需局部变量知道前节点）")]),t._v(" "),s("li",[t._v("共享方式：\n"),s("ul",[s("li",[t._v("独占：公平锁或非公平锁，"),s("code",[t._v("ReentrantLock")])]),t._v(" "),s("li",[t._v("共享：share，"),s("code",[t._v("Semaphore")]),t._v("（信号量）、"),s("code",[t._v("CountDowLatch")]),t._v("（倒计时器）、"),s("code",[t._v("CyclicBarrier")]),t._v("（循环屏障）")]),t._v(" "),s("li",[t._v("特例：组合，"),s("code",[t._v("ReentrantReadWriteLock")])])])]),t._v(" "),s("li",[t._v("模板方法：\n"),s("ul",[s("li",[t._v("自定义同步器：只需继承"),s("code",[t._v("AbstractQueuedSynchronizer")]),t._v("，重写方法（钩子）")]),t._v(" "),s("li",[t._v("主要方法：state（"),s("code",[t._v("get")]),t._v("、"),s("code",[t._v("set")]),t._v("），"),s("code",[t._v("CLH")]),t._v("队列无需自己实现（已实现）")])])])]),t._v(" "),s("h2",{attrs:{id:"对象的创建"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#对象的创建"}},[t._v("#")]),t._v(" 对象的创建")]),t._v(" "),s("ol",[s("li",[t._v("类加载检查\n"),s("ul",[s("li",[t._v("检查类是否加载过")])])]),t._v(" "),s("li",[t._v("分配内存\n"),s("ul",[s("li",[t._v("标记-清除（"),s("code",[t._v("空闲列表")]),t._v("，分配一个大内存）")]),t._v(" "),s("li",[t._v("标记-整理（"),s("code",[t._v("指针碰撞")]),t._v("，用过的放一边，没用过的放一边）")])])]),t._v(" "),s("li",[t._v("设置零值（即默认值）")]),t._v(" "),s("li",[t._v("设置对象头（哈希码、GC分代年龄）")]),t._v(" "),s("li",[t._v("初始化\n"),s("ul",[s("li",[t._v("init（构造方法）")])])])]),t._v(" "),s("p",[t._v("🔨对象的访问：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("句柄")]),t._v("：\n"),s("ul",[s("li",[t._v("实例对象地址")]),t._v(" "),s("li",[t._v("具体数据地址（方法区）")])])]),t._v(" "),s("li",[s("code",[t._v("直接指针")]),t._v("：\n"),s("ul",[s("li",[t._v("栈中的引用访问堆中实例对象")])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img2/image-20220528203601304.png",alt:"image-20220528203601304"}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img2/image-20220528203616182.png",alt:"image-20220528203616182"}})]),t._v(" "),s("h2",{attrs:{id:"空间分配担保"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#空间分配担保"}},[t._v("#")]),t._v(" 空间分配担保")]),t._v(" "),s("blockquote",[s("p",[t._v("确保minor GC之前老年代有足够的空间存新生代晋升老年代")])]),t._v(" "),s("ul",[s("li",[s("p",[t._v("JDK6之前：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("先判断是否大于所有新生代")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("HandlerPromotionFailure")])])]),t._v(" "),s("li",[s("p",[t._v("判断是否大于每次晋升到老年代的平均值")])])])]),t._v(" "),s("li",[s("p",[t._v("JDK6之后：")]),t._v(" "),s("ul",[s("li",[t._v("判断是否大于每次晋升到老年代的平均值\n"),s("ul",[s("li",[t._v("是："),s("code",[t._v("MinorGC")])]),t._v(" "),s("li",[t._v("否："),s("code",[t._v("Full GC")])])])])])])]),t._v(" "),s("h2",{attrs:{id:"四种引用-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四种引用-2"}},[t._v("#")]),t._v(" 四种引用")]),t._v(" "),s("blockquote",[s("p",[t._v("判断对象存活：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("可达性分析法：沿着GC Root（引用链）往下找")])]),t._v(" "),s("li",[s("p",[t._v("引用计数法：被使用+1，等于0时可回收")])]),t._v(" "),s("li",[s("p",[t._v("三色标记法：白色未标记可回收")])])]),t._v(" "),s("p",[t._v("注意：都和引用有关系")])]),t._v(" "),s("p",[t._v("强软弱虚：")]),t._v(" "),s("ul",[s("li",[t._v("软(常用)：第一次不被回收，第二次回收")]),t._v(" "),s("li",[t._v("弱：第一次回收")]),t._v(" "),s("li",[t._v("虚：必须配合引用队列，软弱可配可不配")])]),t._v(" "),s("h2",{attrs:{id:"cms和g1"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cms和g1"}},[t._v("#")]),t._v(" CMS和G1")]),t._v(" "),s("ul",[s("li",[t._v("相同：最短回收停顿")]),t._v(" "),s("li",[t._v("不同：\n"),s("ul",[s("li",[t._v("CMS：\n"),s("ul",[s("li",[t._v("初始标记")]),t._v(" "),s("li",[t._v("并发标记")]),t._v(" "),s("li",[t._v("重新标记")]),t._v(" "),s("li",[t._v("清除")])])]),t._v(" "),s("li",[t._v("G1：\n"),s("ul",[s("li",[t._v("初始标记")]),t._v(" "),s("li",[t._v("并发标记")]),t._v(" "),s("li",[t._v("最终标记")]),t._v(" "),s("li",[t._v("回收")])])])])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img2/image-20220529181957136.png",alt:"image-20220529181957136"}})]),t._v(" "),s("h2",{attrs:{id:"事务acid"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事务acid"}},[t._v("#")]),t._v(" 事务ACID")]),t._v(" "),s("blockquote",[s("p",[t._v("MySQL引擎InnoDB实现事务ACID")])]),t._v(" "),s("ul",[s("li",[t._v("原子性(atomic)\n"),s("ul",[s("li",[t._v("全部成功，全部失败")]),t._v(" "),s("li",[t._v("实现：undo log（回滚）")])])]),t._v(" "),s("li",[t._v("一致性(consistency)\n"),s("ul",[s("li",[t._v("数据一致")]),t._v(" "),s("li",[t._v("实现：保证AID之后")])])]),t._v(" "),s("li",[t._v("隔离性(Isolation)\n"),s("ul",[s("li",[t._v("互不影响")]),t._v(" "),s("li",[t._v("实现：锁，MVCC（multi version concurrent control）")])])]),t._v(" "),s("li",[t._v("持久性(duration)\n"),s("ul",[s("li",[t._v("数据永久存在")]),t._v(" "),s("li",[t._v("实现：redo log（重做日志）")])])])]),t._v(" "),s("h2",{attrs:{id:"并发事务问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#并发事务问题"}},[t._v("#")]),t._v(" 并发事务问题")]),t._v(" "),s("ul",[s("li",[t._v("脏读："),s("code",[t._v("一个事务修改数据")]),t._v("，还没提交到数据库，"),s("code",[t._v("另一个事务读取数据")]),t._v("，还是原来数据（脏数据），没有拿到最新数据，依据原数据操作可能不正确")]),t._v(" "),s("li",[t._v("丢失修改："),s("code",[t._v("多个事务修改数据")]),t._v("，因为每个最初拿到都是原始相同数据，导致最后修改数据的把之前修改数据的覆盖，之前所有事务修改丢失，"),s("code",[t._v("以最后修改为准")])]),t._v(" "),s("li",[t._v("不可重复读：第一个事务读取数据，另一个并发事务修改数据，导致第一个事务再次读取时，发现数据不相同")]),t._v(" "),s("li",[t._v("幻读：一个事务读取数据，另一个并发事务添加或删除数据，导致第一个事务再次读取时，发现多了不存在或少了数据，想幻觉一样")]),t._v(" "),s("li",[s("strong",[t._v("注意")]),t._v("：幻读和不可重复读主要区别在于"),s("code",[t._v("并发事务操作时")]),t._v("，幻读是"),s("code",[t._v("添加或删除")]),t._v("数据，不可重复读是"),s("code",[t._v("修改")])])]),t._v(" "),s("h2",{attrs:{id:"事务隔离级别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事务隔离级别"}},[t._v("#")]),t._v(" 事务隔离级别")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("脏读")]),t._v(" "),s("th",[t._v("不可重复读")]),t._v(" "),s("th",[t._v("幻读")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("read-uncommitted（读未提交）")]),t._v(" "),s("td",[t._v("有")]),t._v(" "),s("td",[t._v("有")]),t._v(" "),s("td",[t._v("有")])]),t._v(" "),s("tr",[s("td",[t._v("read-committed（读已提交）")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("有")]),t._v(" "),s("td",[t._v("有")])]),t._v(" "),s("tr",[s("td",[t._v("repeatable-read（重复读）")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("有")])]),t._v(" "),s("tr",[s("td",[t._v("serializable（可串行，可序列化）")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("无")]),t._v(" "),s("td",[t._v("无")])])])]),t._v(" "),s("h2",{attrs:{id:"innodb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#innodb"}},[t._v("#")]),t._v(" InnoDB")]),t._v(" "),s("blockquote",[s("p",[t._v("MySQL的引擎")])]),t._v(" "),s("p",[t._v("优点：")]),t._v(" "),s("ul",[s("li",[t._v("行级锁（"),s("code",[t._v("row-level locking")]),t._v("）")]),t._v(" "),s("li",[t._v("支持事务（回滚、提交）")]),t._v(" "),s("li",[t._v("事务隔离级别：重复读")]),t._v(" "),s("li",[t._v("ACID\n"),s("ul",[s("li",[t._v("原子\n"),s("ul",[s("li",[s("code",[t._v("undo log")]),t._v("（回滚）")])])]),t._v(" "),s("li",[t._v("一致")]),t._v(" "),s("li",[t._v("隔离\n"),s("ul",[s("li",[t._v("锁和MVCC")])])]),t._v(" "),s("li",[t._v("持久\n"),s("ul",[s("li",[s("code",[t._v("redo log")]),t._v("（重做）")])])])])]),t._v(" "),s("li",[s("code",[t._v("MVCC")])])]),t._v(" "),s("h2",{attrs:{id:"spring重要模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring重要模块"}},[t._v("#")]),t._v(" Spring重要模块")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("core")]),t._v("：为IOC（"),s("code",[t._v("inverse of control")]),t._v("），控制反转、依赖注入")]),t._v(" "),s("li",[s("code",[t._v("aop")]),t._v("：切面，基于动态代理实现，运行时增强")]),t._v(" "),s("li",[s("code",[t._v("aspectj")]),t._v("：完整的aop，aop已集成，基于字节码实现，编译时增强")]),t._v(" "),s("li",[s("code",[t._v("web")])]),t._v(" "),s("li",[s("code",[t._v("data access/Integration")])])]),t._v(" "),s("h2",{attrs:{id:"aop和ioc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#aop和ioc"}},[t._v("#")]),t._v(" AOP和IOC")]),t._v(" "),s("ul",[s("li",[t._v("IOC：\n"),s("ul",[s("li",[t._v("控制反转、依赖注入")]),t._v(" "),s("li",[t._v("主要是把创建对象交给IOC容器实现")]),t._v(" "),s("li",[t._v("容器："),s("code",[t._v("Map")])]),t._v(" "),s("li",[t._v("作用：复杂依赖关系解放出来，无需关注构造方法")])])]),t._v(" "),s("li",[t._v("AOP：\n"),s("ul",[s("li",[t._v("面向切面编程")]),t._v(" "),s("li",[t._v("封装一些和业务无关代码，但有经常使用到（日志、权限、事务）")]),t._v(" "),s("li",[t._v("作用：减少代码，降低耦合度，未来可维护、可拓展")])])])]),t._v(" "),s("h2",{attrs:{id:"springmvc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springmvc"}},[t._v("#")]),t._v(" SpringMVC")]),t._v(" "),s("ul",[s("li",[t._v("M：model，模型，实体类entity")]),t._v(" "),s("li",[t._v("V：view：视图，HTML")]),t._v(" "),s("li",[t._v("C：controller/service 控制器")])]),t._v(" "),s("p",[t._v("🔨工作原理：")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("请求到"),s("code",[t._v("dispatcherServlet")])])]),t._v(" "),s("li",[s("p",[t._v("找处理器"),s("code",[t._v("HandlerMapping")])])]),t._v(" "),s("li",[s("p",[t._v("适配器"),s("code",[t._v("HandlerAdapter")])])]),t._v(" "),s("li",[s("p",[t._v("适配器调用处理器（执行业务）")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("ModelAndView")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("Model")]),t._v("：数据")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("View")]),t._v("：逻辑View")])])])]),t._v(" "),s("li",[s("p",[t._v("真正View："),s("code",[t._v("ViewResolver")])])]),t._v(" "),s("li",[s("p",[t._v("Model传给View（渲染）")])]),t._v(" "),s("li",[s("p",[t._v("返回View给用户")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img2/image-20220604160150436.png",alt:"image-20220604160150436"}})]),t._v(" "),s("h2",{attrs:{id:"类声明为bean"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类声明为bean"}},[t._v("#")]),t._v(" 类声明为Bean")]),t._v(" "),s("blockquote",[s("p",[t._v("bean是IOC管理的对象，类声明为bean，下次就可以自动注入该类实例，不用new")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@Component")]),t._v("：不确定bean是那一层")]),t._v(" "),s("li",[s("code",[t._v("@Repository")]),t._v("：Dao")]),t._v(" "),s("li",[s("code",[t._v("@Service")]),t._v("：业务，调用Dao")]),t._v(" "),s("li",[s("code",[t._v("@Controller")]),t._v("：控制层，接收请求，调用service，返回数据给前端页面")])]),t._v(" "),s("h2",{attrs:{id:"component和-bean"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#component和-bean"}},[t._v("#")]),t._v(" @Component和@Bean")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th"),t._v(" "),s("th",[t._v("Component")]),t._v(" "),s("th",[t._v("Bean")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("范围")]),t._v(" "),s("td",[t._v("类")]),t._v(" "),s("td",[t._v("方法")])]),t._v(" "),s("tr",[s("td",[t._v("使用")]),t._v(" "),s("td",[t._v("少")]),t._v(" "),s("td",[t._v("多，例依赖注入第三方类库")])])])]),t._v(" "),s("h2",{attrs:{id:"注入bean"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注入bean"}},[t._v("#")]),t._v(" 注入Bean")]),t._v(" "),s("blockquote",[s("p",[t._v("类型：即实现类")]),t._v(" "),s("p",[t._v("名字：首字母小写，根据类名找类")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@Autowire")]),t._v("：\n"),s("ul",[s("li",[t._v("先类型在名字")]),t._v(" "),s("li",[s("code",[t._v("spring")]),t._v("注解")]),t._v(" "),s("li",[t._v("成员变量名不一致，使用"),s("code",[t._v("@Qualifier")])])])]),t._v(" "),s("li",[s("code",[t._v("@Resource")]),t._v("：\n"),s("ul",[s("li",[t._v("先名字在类型")]),t._v(" "),s("li",[s("code",[t._v("JDK")]),t._v("注解")]),t._v(" "),s("li",[t._v("成员变量名不一致，使用"),s("code",[t._v("name")]),t._v("属性")])])]),t._v(" "),s("li",[s("code",[t._v("@Inject")]),t._v("（少）：注入")])]),t._v(" "),s("h2",{attrs:{id:"bean作用域"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bean作用域"}},[t._v("#")]),t._v(" Bean作用域")]),t._v(" "),s("blockquote",[s("p",[t._v("使用："),s("code",[t._v("@Bean")]),t._v("注解下多添加一个注解"),s("code",[t._v('@Scope（"singleton"）')])])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("singleton")]),t._v("：单例\n"),s("ul",[s("li",[t._v("问题：单例多线程下存在安全问题")]),t._v(" "),s("li",[t._v("解决：\n"),s("ul",[s("li",[t._v("创建ThreadLocal")]),t._v(" "),s("li",[t._v("底层：ThreadLocalMap")]),t._v(" "),s("li",[t._v("实现：每次线程访问自己资源，线程内资源共享")])])])])]),t._v(" "),s("li",[s("code",[t._v("prototype")]),t._v("：每次请求创建新的")]),t._v(" "),s("li",[s("code",[t._v("request")]),t._v("：http请求创建新的")]),t._v(" "),s("li",[s("code",[t._v("session")]),t._v("：一个session创建新的")])]),t._v(" "),s("h2",{attrs:{id:"bean的生命周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bean的生命周期"}},[t._v("#")]),t._v(" Bean的生命周期")]),t._v(" "),s("ul",[s("li",[t._v("实例化bean")]),t._v(" "),s("li",[t._v("设置属性")]),t._v(" "),s("li",[t._v("检查aware接口")]),t._v(" "),s("li",[t._v("前置处理（后处理器）")]),t._v(" "),s("li",[t._v("检查是否有初始化方法")]),t._v(" "),s("li",[t._v("后置处理")]),t._v(" "),s("li",[t._v("销毁（自定义方法还是实现接口）")])]),t._v(" "),s("h2",{attrs:{id:"spring设计模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring设计模式"}},[t._v("#")]),t._v(" Spring设计模式")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("单例：Bean")])]),t._v(" "),s("li",[s("p",[t._v("工厂：BeanFactory（延迟注入，只注入基本的）、ApplicationContext（全部注入，常用）")])]),t._v(" "),s("li",[s("p",[t._v("代理：AOP，JDK动态代理")])]),t._v(" "),s("li",[s("p",[t._v("模板：jdbcTemplate")])]),t._v(" "),s("li",[s("p",[t._v("观察者：我变你也变")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("事件角色：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ApplicationEvent")])])])]),t._v(" "),s("li",[s("p",[t._v("监听者：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ApplicationListener")]),t._v("：方法"),s("code",[t._v("onApplicationEvent()")])])])]),t._v(" "),s("li",[s("p",[t._v("发布者：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ApplicationEventPublisher")]),t._v("：方法"),s("code",[t._v("publisherEvent()")])])])])])]),t._v(" "),s("li",[s("p",[t._v("适配器：包装器，把接口转换成客户想要的接口")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("SpringAOP")]),t._v(" "),s("ul",[s("li",[t._v("拦截器适配通知")]),t._v(" "),s("li",[t._v("例："),s("code",[t._v("MethodBeforeAdviceIntercept")]),t._v("->"),s("code",[t._v("MethodBeforeAdvice")])])])]),t._v(" "),s("li",[s("p",[t._v("SpringMVC")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("HandlerAdapter")]),t._v("适配"),s("code",[t._v("Handler")]),t._v("（请求）")])])])])]),t._v(" "),s("li",[s("p",[t._v("装饰者：spring的wrapper和decorator")])])]),t._v(" "),s("h2",{attrs:{id:"spring事务传播行为"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#spring事务传播行为"}},[t._v("#")]),t._v(" Spring事务传播行为")]),t._v(" "),s("p",[t._v("🔨事务传播行为：解决事务之间调用问题")]),t._v(" "),s("ul",[s("li",[t._v("TransactionalDefinition.propagation_"),s("code",[t._v("required")]),t._v("：没有则创建新的，有则继续使用")]),t._v(" "),s("li",[t._v("……_"),s("code",[t._v("required-new")]),t._v("：不管有没有，有就挂起，创建新的")]),t._v(" "),s("li",[t._v("……_"),s("code",[t._v("nested")]),t._v("：嵌套")]),t._v(" "),s("li",[t._v("……_"),s("code",[t._v("mandatory")]),t._v("：强制性，没有则报错，抛异常")])]),t._v(" "),s("p",[t._v("🔨"),s("code",[t._v("@Transactional")]),t._v("：")]),t._v(" "),s("ul",[s("li",[t._v("方法或类上添加，则说明开启事务")]),t._v(" "),s("li",[t._v("注意："),s("code",[t._v("@Transactional（rollbackFor=Exception.class）")]),t._v(" "),s("ul",[s("li",[t._v("保证运行时或非运行时异常都能回滚")]),t._v(" "),s("li",[t._v("不加默认运行时")])])])]),t._v(" "),s("h2",{attrs:{id:"springbootapplication"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springbootapplication"}},[t._v("#")]),t._v(" @SpringBootApplication")]),t._v(" "),s("blockquote",[s("p",[s("code",[t._v("Springboot")]),t._v("项目启动类添加"),s("code",[t._v("@SpringBootApplication")]),t._v("和"),s("code",[t._v("@MapperScan")]),t._v("(扫描mapper包下)")])]),t._v(" "),s("p",[t._v("🔨@SpringBootApplication")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@ComponentScan")]),t._v("：扫描"),s("code",[t._v("@Service")]),t._v("、"),s("code",[t._v("@Controller")]),t._v("，默认扫描该类所在包的所有类（即为什么启动类要放到外面和）")]),t._v(" "),s("li",[s("code",[t._v("@EnableConfiguration")]),t._v("：自动配置")]),t._v(" "),s("li",[s("code",[t._v("@SpringBootConfiguration")]),t._v("：下面有"),s("code",[t._v("@Configuration")]),t._v("，即为什么启动类可以声明其他很多bean")])]),t._v(" "),s("h2",{attrs:{id:"常见http请求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见http请求"}},[t._v("#")]),t._v(" 常见HTTP请求")]),t._v(" "),s("ul",[s("li",[t._v("get：查询")]),t._v(" "),s("li",[t._v("post：添加")]),t._v(" "),s("li",[t._v("put：更新")]),t._v(" "),s("li",[t._v("delete：删除")])]),t._v(" "),s("h2",{attrs:{id:"前后端传值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前后端传值"}},[t._v("#")]),t._v(" 前后端传值")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@PathVariable")]),t._v("：路径上的参数\n"),s("ul",[s("li",[t._v("例："),s("code",[t._v("/user/{userId}")])]),t._v(" "),s("li",[t._v("方法参数"),s("code",[t._v('（@PathVariable("userId") Integer userId）')])])])]),t._v(" "),s("li",[s("code",[t._v("@RequestParam")]),t._v("：请求参数\n"),s("ul",[s("li",[t._v("例：？type=zhangsan")]),t._v(" "),s("li",[t._v("方法参数"),s("code",[t._v('（@RequestParam(value="type",required=false) String type）')])])])]),t._v(" "),s("li",[s("code",[t._v("@RequestBody")]),t._v("：body里传入JSON数据，相当于客户端把数据传给服务端，后台需要实体类和JSON对应\n"),s("ul",[s("li",[t._v("方法参数"),s("code",[t._v("（@RequestBody Book book）")])])])])]),t._v(" "),s("h2",{attrs:{id:"事务属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#事务属性"}},[t._v("#")]),t._v(" 事务属性")]),t._v(" "),s("blockquote",[s("p",[t._v("@Transactional（）：括号里配置如下属性")]),t._v(" "),s("p",[t._v("注意：谈到AOP，无非是JDK动态代理，或子类的cglib，transactional工作机制也是AOP实现，"),s("code",[t._v("TransactionInterceptor")]),t._v(".invoke()")])]),t._v(" "),s("ul",[s("li",[t._v("传播行为：required")]),t._v(" "),s("li",[t._v("隔离级别：重复读")]),t._v(" "),s("li",[t._v("回滚：运行时异常和非运行时异常")]),t._v(" "),s("li",[t._v("超时")]),t._v(" "),s("li",[t._v("只读")])]),t._v(" "),s("h2",{attrs:{id:"transactional注意事项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transactional注意事项"}},[t._v("#")]),t._v(" @Transactional注意事项")]),t._v(" "),s("ul",[s("li",[t._v("必须public修饰的方法")]),t._v(" "),s("li",[t._v("数据库支持事务")]),t._v(" "),s("li",[t._v("同一类中不能调用")]),t._v(" "),s("li",[t._v("注意回滚默认只支持运行时异常回滚")]),t._v(" "),s("li",[t._v("@Transactional需由spring管理，即需要配置@Controller、@Service类似的类")])]),t._v(" "),s("h2",{attrs:{id:"springboot自动装配"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springboot自动装配"}},[t._v("#")]),t._v(" SpringBoot自动装配")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("概念：扫描"),s("code",[t._v("meta-inf")]),t._v("（元信息）下的"),s("code",[t._v("spring.factories")]),t._v("加载到容器")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img2/image-20220606180429005.png",alt:"image-20220606180429005"}})])]),t._v(" "),s("li",[s("p",[t._v("实现：")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("@SpringBootApplication")]),t._v("：")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("@ComponentScan")]),t._v("（扫描"),s("code",[t._v("@Service")]),t._v("、"),s("code",[t._v("@Controller")]),t._v("）")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("@EnableAutoConfiguration")]),t._v("（核心）：自动配置")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("AutoConfigurationImportSelector")])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("ImportSelector")]),t._v("接口中方法"),s("code",[t._v("selectImports")])])]),t._v(" "),s("li",[s("p",[t._v("selectImports下的"),s("code",[t._v("getAutoConfigurationEntry")])]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img2/image-20220606181157504.png",alt:"image-20220606181157504"}})])]),t._v(" "),s("li",[s("p",[t._v("排除：@ConditionalOnXXX")]),t._v(" "),s("ul",[s("li",[t._v("@ConditionalOnBean")]),t._v(" "),s("li",[t._v("@ConditionalOnClass")])])])])]),t._v(" "),s("li",[s("p",[s("code",[t._v("@SpringBootConfiguration")]),t._v("："),s("code",[t._v("@Configuration")]),t._v("，实现上下文注册"),s("code",[t._v("Bean")])])])])])])]),t._v(" "),s("li",[s("p",[t._v("总结：")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@EnableAutoConfiguration")]),t._v("开启自动装配，"),s("code",[t._v("SpringFactoriesLoader")]),t._v("加载"),s("code",[t._v("meta-inf")]),t._v("，根据"),s("code",[t._v("@Conditional")]),t._v("加载类")])])])]),t._v(" "),s("h1",{attrs:{id:"铁令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#铁令"}},[t._v("#")]),t._v(" 铁令")]),t._v(" "),s("p",[t._v("字符串+=：")]),t._v(" "),s("ul",[s("li",[t._v("直接相加底层还是"),s("code",[t._v("StringBuilder")]),t._v("的"),s("code",[t._v("append")]),t._v("()")]),t._v(" "),s("li",[t._v("尽量使用StringBuilder中的append方法")]),t._v(" "),s("li",[t._v("使用String直接相加（for循环内），底层还是new StringBuilder，结果有大量StringBuilder")])]),t._v(" "),s("p",[t._v("看见排好序的数组找元素：")]),t._v(" "),s("ul",[s("li",[t._v("二分法，左右指针")])]),t._v(" "),s("p",[t._v("数组不存储null")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img2/image-20220529210436501.png",alt:"image-20220529210436501"}})])])}),[],!1,null,null,null);a.default=e.exports}}]);