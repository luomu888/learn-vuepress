<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è®¾è®¡æ¨¡å¼ | luomu</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="luomu">
    
    <link rel="preload" href="/learn-vuepress/assets/css/0.styles.216a5ded.css" as="style"><link rel="preload" href="/learn-vuepress/assets/js/app.58b32b08.js" as="script"><link rel="preload" href="/learn-vuepress/assets/js/6.0c5ddd61.js" as="script"><link rel="preload" href="/learn-vuepress/assets/js/1.a3f35cab.js" as="script"><link rel="preload" href="/learn-vuepress/assets/js/15.cf43ae37.js" as="script"><link rel="prefetch" href="/learn-vuepress/assets/js/10.e64b2106.js"><link rel="prefetch" href="/learn-vuepress/assets/js/11.acfcb00e.js"><link rel="prefetch" href="/learn-vuepress/assets/js/12.6cdca1ad.js"><link rel="prefetch" href="/learn-vuepress/assets/js/13.ed4c5228.js"><link rel="prefetch" href="/learn-vuepress/assets/js/14.dc698bff.js"><link rel="prefetch" href="/learn-vuepress/assets/js/16.25aa33c8.js"><link rel="prefetch" href="/learn-vuepress/assets/js/17.de597ac3.js"><link rel="prefetch" href="/learn-vuepress/assets/js/18.d48faa61.js"><link rel="prefetch" href="/learn-vuepress/assets/js/3.9a301622.js"><link rel="prefetch" href="/learn-vuepress/assets/js/4.c6620eae.js"><link rel="prefetch" href="/learn-vuepress/assets/js/5.17c94edb.js"><link rel="prefetch" href="/learn-vuepress/assets/js/7.1339d2bf.js"><link rel="prefetch" href="/learn-vuepress/assets/js/8.847a5e69.js"><link rel="prefetch" href="/learn-vuepress/assets/js/9.fb445241.js">
    <link rel="stylesheet" href="/learn-vuepress/assets/css/0.styles.216a5ded.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>luomu</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2>luomu</p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
          Â Â 
          <!---->
          2022
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn-vuepress/" class="home-link router-link-active"><!----> <span class="site-name">luomu</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/learn-vuepress/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      luomuçš„ Java åšå®¢
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/luomu888" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <!----> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>8</h3> <h6 data-v-39576ba9>æ–‡ç« </h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>0</h3> <h6 data-v-39576ba9>æ ‡ç­¾</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><a href="/learn-vuepress/" class="nav-link"><i class="undefined"></i>
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      luomuçš„ Java åšå®¢
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/luomu888" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>è®¡ç®—æœºåº•å±‚</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn-vuepress/computer/design.html" aria-current="page" class="active sidebar-link">è®¾è®¡æ¨¡å¼</a></li><li><a href="/learn-vuepress/computer/jiwang.html" class="sidebar-link">è®¡ç®—æœºç½‘ç»œ</a></li><li><a href="/learn-vuepress/computer/Linux.html" class="sidebar-link">Linux</a></li><li><a href="/learn-vuepress/computer/os.html" class="sidebar-link">æ“ä½œç³»ç»Ÿ</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>é¢ç»</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Pythonå­¦ä¹ ç¬”è®°</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2></h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><!---->
          Â Â 
          <!---->
          2022
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">è®¾è®¡æ¨¡å¼</h1> <div data-v-f875f3fc><!----> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default"><h1 id="è®¾è®¡æ¨¡å¼"><a href="#è®¾è®¡æ¨¡å¼" class="header-anchor">#</a> è®¾è®¡æ¨¡å¼</h1> <blockquote><p>23ç§ï¼Œå››ä½ä½œè€…ï¼ˆGang of Fourï¼Œ<code>GoF</code>ï¼‰</p> <p>ä»£ç è®¾è®¡æ€»ç»“çš„ç»éªŒ</p></blockquote> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>æé«˜æ€ç»´ã€ç¼–ç¨‹å’Œè®¾è®¡èƒ½åŠ›</li> <li>ä»£ç æ›´åŠ å·¥ç¨‹åŒ–ï¼Œæé«˜æ•ˆç‡</li> <li>ä»£ç å¯é‡ç”¨ã€å¯è¯»æ€§ã€å¯é æ€§ã€çµæ´»æ€§ã€å¯ç»´æŠ¤æ€§å¼º</li></ul> <h2 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="header-anchor">#</a> åˆ†ç±»</h2> <ol><li>åˆ›å»ºå‹æ¨¡å¼ï¼šå¯¹è±¡åˆ›å»ºå’Œä½¿ç”¨==åˆ†ç¦»==
<ul><li>å•ä¾‹</li> <li>åŸå‹</li> <li>å·¥å‚</li> <li>æŠ½è±¡</li> <li>å»ºé€ è€…</li></ul></li> <li>ç»“æ„å‹æ¨¡å¼ï¼šç±»æˆ–å¯¹è±¡ç»„æˆ==æ›´å¤§ç»“æ„==
<ul><li>ä»£ç†</li> <li>é€‚é…å™¨</li> <li>æ¡¥æ¥</li> <li>è£…é¥°</li> <li>å¤–è§‚</li> <li>äº«å…ƒ</li> <li>ç»„åˆ</li></ul></li> <li>è¡Œä¸ºå‹æ¨¡å¼ï¼šç±»æˆ–å¯¹è±¡åä½œå®Œæˆæ— æ³•å•ç‹¬å®Œæˆçš„==ä»»åŠ¡==ï¼Œä»¥åŠ==åˆ†é…èŒè´£==
<ul><li>æ¨¡æ¿</li> <li>ç­–ç•¥</li> <li>å‘½ä»¤</li> <li>èŒè´£é“¾</li> <li>çŠ¶æ€</li> <li>è§‚å¯Ÿè€…</li> <li>ä¸­ä»‹è€…</li> <li>è¿­ä»£å™¨</li> <li>è®¿é—®è€…</li> <li>å¤‡å¿˜å½•</li> <li>è§£é‡Šå™¨</li></ul></li></ol> <h1 id="uml"><a href="#uml" class="header-anchor">#</a> UML</h1> <blockquote><p>Unified Modeling languageï¼Œç»Ÿä¸€å»ºæ¨¡è¯­è¨€ï¼Œè¡¨è¾¾è®¾è®¡ä¸­==åŠ¨æ€å’Œé™æ€==ä¿¡æ¯</p> <p>åˆ†ä¸ºï¼š</p> <ol><li>ç”¨ä¾‹å›¾</li> <li>ç±»å›¾</li> <li>å¯¹è±¡å›¾</li> <li>çŠ¶æ€å›¾</li> <li>æ´»åŠ¨å›¾</li> <li>æ—¶åºå›¾</li> <li>åä½œå›¾</li> <li>æ„ä»¶å›¾</li> <li>éƒ¨ç½²å›¾</li></ol></blockquote> <h2 id="ç±»å›¾"><a href="#ç±»å›¾" class="header-anchor">#</a> ç±»å›¾</h2> <blockquote><ol><li>æ¨¡å‹çš„é™æ€ç»“æ„ï¼Œç±»ã€ç±»çš„å†…éƒ¨ä»¥åŠä¸å…¶ä»–ç±»çš„å…³ç³»ï¼Œä¸æ˜¾ç¤ºæš‚æ—¶æ€§çš„</li> <li>ç³»ç»Ÿåˆ†æå’Œè®¾è®¡ï¼Œç³»ç»Ÿç¼–ç å’Œæµ‹è¯•çš„æ¨¡å‹</li> <li>ç±»çš„é›†åˆã€ç±»çš„å±æ€§å’Œç±»ä¹‹é—´å…³ç³»ï¼Œæ›´å®¹æ˜“ç†è§£</li></ol></blockquote> <h2 id="ç±»å›¾è¡¨ç¤º"><a href="#ç±»å›¾è¡¨ç¤º" class="header-anchor">#</a> ç±»å›¾è¡¨ç¤º</h2> <blockquote><p>ç±»åã€å±æ€§å’Œæ–¹æ³•</p> <p>+ï¼špublic</p> <p>-ï¼šprivate</p></blockquote> <ul><li>å±æ€§ï¼š+- name : String</li> <li>æ–¹æ³•ï¼š+- name(int i)ï¼švoid</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220302194845.png" alt="image-20220302194844427"></p> <h2 id="ç±»ä¸ç±»çš„å…³ç³»"><a href="#ç±»ä¸ç±»çš„å…³ç³»" class="header-anchor">#</a> ç±»ä¸ç±»çš„å…³ç³»</h2> <h3 id="å…³è”å…³ç³»"><a href="#å…³è”å…³ç³»" class="header-anchor">#</a> å…³è”å…³ç³»</h3> <blockquote><p>å¯¹è±¡-å¯¹è±¡ï¼›åˆ†ä¸ºä¸€èˆ¬å…³è”ã€èšåˆå’Œç»„åˆå…³ç³»</p></blockquote> <p>ğŸ”¨ä¸€èˆ¬å…³è”ï¼š</p> <ul><li><p>å•å‘ï¼šCustomerç±»ä¸­æœ‰å˜é‡ç±»å‹ä¸ºAddress</p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220302204326.png" alt="image-20220302204324680"></p></li> <li><p>åŒå‘ï¼šæ‹¥æœ‰åŒæ–¹ç±»å‹çš„å˜é‡</p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220302204514.png" alt="image-20220302204511726"></p></li> <li><p>è‡ªå…³è”ï¼šæŒ‡å‘è‡ªå·±</p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220302204524.png" alt="image-20220302204523146"></p></li></ul> <h3 id="èšåˆå…³ç³»"><a href="#èšåˆå…³ç³»" class="header-anchor">#</a> èšåˆå…³ç³»</h3> <blockquote><p>æ•´ä½“-éƒ¨åˆ†</p> <p>æ•´ä½“æ²¡äº†ï¼Œéƒ¨åˆ†è¿˜åœ¨ï¼Œä¾‹å­¦æ ¡æ²¡äº†ï¼Œè€å¸ˆå»åˆ«çš„å­¦æ ¡</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220303082009.png" alt="image-20220303082007153"></p> <h3 id="ç»„åˆå…³ç³»"><a href="#ç»„åˆå…³ç³»" class="header-anchor">#</a> ç»„åˆå…³ç³»</h3> <blockquote><p>æ•´ä½“-éƒ¨åˆ†</p> <p>åŒºåˆ«ï¼šæ•´ä½“æ²¡äº†ï¼Œéƒ¨åˆ†ä¸èƒ½å­˜åœ¨</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220303082136.png" alt="image-20220303082136018"></p> <h3 id="ä¾èµ–å…³ç³»"><a href="#ä¾èµ–å…³ç³»" class="header-anchor">#</a> ä¾èµ–å…³ç³»</h3> <blockquote><p>ä¸´æ—¶æ€§å…³è”ï¼Œæœ€å¸¸ç”¨</p> <p>ç±»çš„<code>æ–¹æ³•</code>é€šè¿‡å±€éƒ¨å˜é‡ã€æ–¹æ³•å‚æ•°æˆ–é™æ€æ–¹æ³•è°ƒç”¨å¦ä¸€ä¸ªç±»</p> <p>åŒºåˆ«ï¼š</p> <ul><li>ä¸€èˆ¬å…³è”ï¼šå˜é‡</li> <li>ä¾èµ–ï¼šæ–¹æ³•</li></ul></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220303082333.png" alt="image-20220303082332720"></p> <h3 id="ç»§æ‰¿å…³ç³»"><a href="#ç»§æ‰¿å…³ç³»" class="header-anchor">#</a> ç»§æ‰¿å…³ç³»</h3> <blockquote><p>è€¦åˆåº¦æœ€å¤§ï¼Œçˆ¶ç±»å’Œå­ç±»</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220303082613.png" alt="image-20220303082612180"></p> <h3 id="å®ç°å…³ç³»"><a href="#å®ç°å…³ç³»" class="header-anchor">#</a> å®ç°å…³ç³»</h3> <blockquote><p>æ¥å£å’Œå®ç°ç±»</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220303082703.png" alt="image-20220303082702267"></p> <h1 id="è½¯ä»¶è®¾è®¡åŸåˆ™"><a href="#è½¯ä»¶è®¾è®¡åŸåˆ™" class="header-anchor">#</a> è½¯ä»¶è®¾è®¡åŸåˆ™</h1> <blockquote><p>æé«˜ç³»ç»Ÿå¯ç»´æŠ¤æ€§å’Œå¯å¤ç”¨æ€§ã€è½¯ä»¶çš„å¯æ‰©å±•æ€§å’Œçµæ´»æ€§</p></blockquote> <h2 id="å¼€é—­"><a href="#å¼€é—­" class="header-anchor">#</a> å¼€é—­</h2> <blockquote><p>å¯¹æ‰©å±•å¼€å‘ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼Œçƒ­æ’æ‹”</p></blockquote> <ul><li><p>å®ç°ï¼šæ¥å£å’ŒæŠ½è±¡ç±»</p></li> <li><p>ä¾‹ï¼šæœç‹—è¾“å…¥æ³•çš„çš®è‚¤ï¼š</p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220303083311.png" alt="image-20220303083310061"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>luo<span class="token punctuation">.</span>principle<span class="token punctuation">.</span>openclose</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractSkin</span> <span class="token punctuation">{</span>
    <span class="token comment">//å±•ç¤ºçš®è‚¤</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DefaultSkin</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractSkin</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æˆ‘æ˜¯é»˜è®¤çš®è‚¤&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">InputToClient</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractSkin</span> skin<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSkin</span><span class="token punctuation">(</span><span class="token class-name">AbstractSkin</span> skin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>skin <span class="token operator">=</span> skin<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        skin<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputToClient</span> client <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">InputToClient</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DefaultSkin</span> defaultSkin<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">DefaultSkin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        client<span class="token punctuation">.</span><span class="token function">setSkin</span><span class="token punctuation">(</span>defaultSkin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        client<span class="token punctuation">.</span><span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></li></ul> <h2 id="é‡Œæ°æ›¿æ¢"><a href="#é‡Œæ°æ›¿æ¢" class="header-anchor">#</a> é‡Œæ°æ›¿æ¢</h2> <blockquote><p>å­ç±»ç»§æ‰¿çˆ¶ç±»ï¼Œæ·»åŠ æ–°åŠŸèƒ½ï¼Œä¸èƒ½é‡å†™çˆ¶ç±»çš„æ–¹æ³•</p></blockquote> <p>å­˜åœ¨é—®é¢˜ï¼šæ­£æ–¹å½¢ä¸æ˜¯é•¿æ–¹å½¢ï¼Œä¸èƒ½ç»§æ‰¿</p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220303160209.png" alt="image-20220303160207993"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//é•¿æ–¹å½¢</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Rectangle</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> length<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">double</span> width<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token operator">=</span> length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//æ­£æ–¹å½¢</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Square</span> <span class="token keyword">extends</span> <span class="token class-name">Rectangle</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLength</span><span class="token punctuation">(</span><span class="token keyword">double</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token keyword">double</span> width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//æµ‹è¯•</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Rectangle</span> rectangle <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectangle<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;============ã€ä¸‹é¢æ˜¯æ­£æ–¹å½¢ã€‘===========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Square</span> square <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Square</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        square<span class="token punctuation">.</span><span class="token function">setLength</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">resize</span><span class="token punctuation">(</span>square<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span>square<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//ç»™å®½åŠ å¤§åˆ°æ¯”é•¿å¤§</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">resize</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            rectangle<span class="token punctuation">.</span><span class="token function">setWidth</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//æ‰“å°é•¿å’Œå®½</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">printLengthAndWidth</span><span class="token punctuation">(</span><span class="token class-name">Rectangle</span> rectangle<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>rectangle<span class="token punctuation">.</span><span class="token function">getLength</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è§£å†³ï¼š</p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220303161053.png" alt="image-20220303161052135"></p> <h2 id="ä¾èµ–å€’è½¬"><a href="#ä¾èµ–å€’è½¬" class="header-anchor">#</a> ä¾èµ–å€’è½¬</h2> <blockquote><p>æŠ½è±¡ç¼–ç¨‹ï¼Œé™ä½å®¢æˆ·ä¸å®ç°è€¦åˆåº¦ï¼Œç»†èŠ‚ã€æ¨¡å—éƒ½ä¾èµ–æŠ½è±¡ï¼ŒæŠ½è±¡ï¼ˆ<code>æ¥å£</code>ï¼‰åœ¨ä¸­é—´</p> <p>ç»†èŠ‚å˜åŒ–ã€æŠ½è±¡ä¸å˜ã€å®¢æˆ·å°±ä¸å˜</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220307113305.png" alt="image-20220307113304810"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Cpu</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Memory</span> memory<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HardDisk</span> <span class="token function">getHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token class-name">HardDisk</span> hardDisk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>hardDisk <span class="token operator">=</span> hardDisk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Cpu</span> <span class="token function">getCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token class-name">Cpu</span> cpu<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>cpu <span class="token operator">=</span> cpu<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Memory</span> <span class="token function">getMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token class-name">Memory</span> memory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memory <span class="token operator">=</span> memory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cpu<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        memory<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hardDisk<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token string">&quot;æ•°æ®&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        hardDisk<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestComputer</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setCpu</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IntelCpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setHardDisk</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">XiJieHardDisk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">setMemory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">KingstonMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        computer<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="æ¥å£éš”ç¦»"><a href="#æ¥å£éš”ç¦»" class="header-anchor">#</a> æ¥å£éš”ç¦»</h2> <blockquote><p>ç±»å¯¹ç±»çš„ä¾èµ–å»ºç«‹åœ¨æœ€å°æ¥å£ä¸Šï¼Œå¤šä½™ä¸éœ€è¦çš„åŠŸèƒ½å»æ‰</p></blockquote> <p>ğŸ”¨ä¾‹ï¼šéœ€è¦ä»€ä¹ˆåŠŸèƒ½ï¼Œå°±å®ç°ä»€ä¹ˆæ¥å£</p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220307113744.png" alt="image-20220307113743954"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LuoSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span><span class="token punctuation">,</span><span class="token class-name">Waterproof</span><span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;é˜²ç›—&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;é˜²ç«&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">waterproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;é˜²æ°´&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItcastSafetyDoor</span> <span class="token keyword">implements</span> <span class="token class-name">AntiTheft</span><span class="token punctuation">,</span><span class="token class-name">Fireproof</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">antiTheft</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;é˜²ç›—&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fireproof</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;é˜²ç«&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="è¿ªç±³ç‰¹"><a href="#è¿ªç±³ç‰¹" class="header-anchor">#</a> è¿ªç±³ç‰¹</h2> <blockquote><p>æœ€å°‘çŸ¥è¯†åŸåˆ™</p> <p>ä¸¤ä¸ªå®ä½“æ— é¡»ç›´æ¥é€šä¿¡ï¼Œå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹ï¼Œé™ä½ç±»çš„è€¦åˆåº¦ï¼Œæé«˜æ¨¡å—ç‹¬ç«‹</p></blockquote> <p>æ¡ˆä¾‹ï¼šæ˜æ˜Ÿä¸ç»çºªäººï¼Œäº‹åŠ¡ç»™ç»çºªäººï¼Œæ˜æ˜Ÿå’Œä»–ä»¬æ— éœ€ç›´æ¥é€šä¿¡</p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220307114208.png" alt="image-20220307114208002"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Agent</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Star</span> star<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Fans</span> fans<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Company</span> company<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setStar</span><span class="token punctuation">(</span><span class="token class-name">Star</span> star<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>star <span class="token operator">=</span> star<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFans</span><span class="token punctuation">(</span><span class="token class-name">Fans</span> fans<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fans <span class="token operator">=</span> fans<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCompany</span><span class="token punctuation">(</span><span class="token class-name">Company</span> company<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>company <span class="token operator">=</span> company<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">meeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>fans<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ä¸æ˜æ˜Ÿ&quot;</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;è§é¢äº†ã€‚&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">business</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>company<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ä¸æ˜æ˜Ÿ&quot;</span> <span class="token operator">+</span> star<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;æ´½æ·¡ä¸šåŠ¡ã€‚&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="åˆæˆå¤ç”¨"><a href="#åˆæˆå¤ç”¨" class="header-anchor">#</a> åˆæˆå¤ç”¨</h2> <blockquote><p>åˆ†ç»§æ‰¿å¤ç”¨å’Œåˆæˆå¤ç”¨</p> <p>å…ˆç»„åˆæˆ–èšåˆç­‰å…³è”å…³ç³»ï¼Œå…¶æ¬¡ç»§æ‰¿</p></blockquote> <p>ç»§æ‰¿ç¼ºç‚¹ï¼š</p> <ol><li>çˆ¶ç±»å¯¹å­ç±»é€æ˜ï¼Œ<code>ç™½ç®±</code>å¤ç”¨</li> <li>è€¦åˆåº¦é«˜</li> <li>çµæ´»æ€§ä½</li></ol> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220307114745.png" alt="image-20220307114744253"></p> <p>åˆæˆä¼˜ç‚¹ï¼š</p> <ol><li><code>é»‘ç®±</code>å¤ç”¨</li> <li>è€¦åˆåº¦ä½</li> <li>çµæ´»æ€§é«˜</li></ol> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220307114751.png" alt="image-20220307114750540"></p> <h1 id="åˆ›å»ºè€…"><a href="#åˆ›å»ºè€…" class="header-anchor">#</a> åˆ›å»ºè€…</h1> <blockquote><p>å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»</p></blockquote> <ul><li>å•ä¾‹</li> <li>å·¥å‚</li> <li>æŠ½è±¡</li> <li>åŸå‹</li> <li>å»ºé€ è€…</li></ul> <h2 id="å•ä¾‹"><a href="#å•ä¾‹" class="header-anchor">#</a> å•ä¾‹</h2> <blockquote><p>æœ€ç®€å•çš„è®¾è®¡æ¨¡å¼</p> <p>åŠŸèƒ½ï¼šåˆ›å»ºå¯¹è±¡ï¼Œæ— éœ€è‡ªå·±new</p> <p>å•ä¾‹ï¼šåªèƒ½åˆ›å»ºä¸€ä¸ªå®ä¾‹</p></blockquote> <h3 id="å®ç°"><a href="#å®ç°" class="header-anchor">#</a> å®ç°</h3> <blockquote><p>åˆ†ç±»ï¼š</p> <ol><li>é¥¿æ±‰å¼ï¼šç±»åŠ è½½å°±åˆ›å»ºï¼Œå†…å­˜æµªè´¹</li> <li>æ‡’æ±‰å¼ï¼šç±»è¢«ä½¿ç”¨æ—¶æ‰åˆ›å»º</li></ol></blockquote> <h4 id="é¥¿æ±‰å¼"><a href="#é¥¿æ±‰å¼" class="header-anchor">#</a> é¥¿æ±‰å¼</h4> <ol><li><p>é™æ€å˜é‡</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * é¥¿æ±‰å¼
 *      é™æ€å˜é‡åˆ›å»ºç±»çš„å¯¹è±¡
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//ç§æœ‰æ„é€ æ–¹æ³•</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>é™æ€ä»£ç å—</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * æ¶æ±‰å¼
 *      åœ¨é™æ€ä»£ç å—ä¸­åˆ›å»ºè¯¥ç±»å¯¹è±¡
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//ç§æœ‰æ„é€ æ–¹æ³•</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h4 id="æ‡’æ±‰å¼"><a href="#æ‡’æ±‰å¼" class="header-anchor">#</a> æ‡’æ±‰å¼</h4> <ol><li><p>çº¿ç¨‹ä¸å®‰å…¨ï¼ˆè°ƒç”¨getInstanceæ–¹æ³•å¯¹è±¡æ‰è¢«åˆ›å»ºï¼‰</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * æ‡’æ±‰å¼
 *  çº¿ç¨‹ä¸å®‰å…¨
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//ç§æœ‰æ„é€ æ–¹æ³•</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>çº¿ç¨‹å®‰å…¨ï¼ˆæ•ˆç‡ä½ï¼Œ==æ¯æ¬¡è°ƒæ–¹æ³•éƒ½åŠ é”==ï¼Œåˆå§‹åŒ–æ—¶æ‰å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼‰</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * æ‡’æ±‰å¼
 *  çº¿ç¨‹å®‰å…¨
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    <span class="token comment">//ç§æœ‰æ„é€ æ–¹æ³•</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">//åœ¨æˆå‘˜ä½ç½®åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

    <span class="token comment">//å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>åŒé‡æ£€æŸ¥é”ï¼ˆ<code>volatile</code>è§£å†³jvm==æŒ‡ä»¤é‡æ’==æ“ä½œï¼Œä¿è¯å¤šçº¿ç¨‹å®‰å…¨ï¼‰</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * åŒé‡æ£€æŸ¥æ–¹å¼
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//ç§æœ‰æ„é€ æ–¹æ³•</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">volatile</span> <span class="token class-name">Singleton</span> instance<span class="token punctuation">;</span>

   <span class="token comment">//å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//ç¬¬ä¸€æ¬¡åˆ¤æ–­ï¼Œå¦‚æœinstanceä¸ä¸ºnullï¼Œä¸è¿›å…¥æŠ¢é”é˜¶æ®µï¼Œç›´æ¥è¿”å›å®é™…</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//æŠ¢åˆ°é”ä¹‹åå†æ¬¡åˆ¤æ–­æ˜¯å¦ä¸ºç©º</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>instance <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> instance<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>==é™æ€å†…éƒ¨ç±»==ï¼ˆå¼€æºé¡¹ç›®ä¸­<code>å¸¸ç”¨</code>ï¼‰</p> <ul><li>ç±»åŠ è½½åªåŠ è½½å¤–éƒ¨ç±»</li> <li>åªæœ‰==å†…éƒ¨ç±»çš„å±æ€§/æ–¹æ³•è¢«è°ƒç”¨æ‰åŠ è½½==</li> <li>å› ä¸ºå†…éƒ¨ç±»çš„å±æ€§/æ–¹æ³•æ·»åŠ <code>static</code>ï¼Œä¿è¯åªå®ä¾‹åŒ–ä¸€æ¬¡ï¼Œå³å•ä¾‹</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * é™æ€å†…éƒ¨ç±»æ–¹å¼
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>

    <span class="token comment">//ç§æœ‰æ„é€ æ–¹æ³•</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>æšä¸¾ï¼ˆåªåŠ è½½ä¸€æ¬¡ï¼Œ<code>å”¯ä¸€</code>ä¸è¢«ç ´åçš„å•ä¾‹ï¼‰</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * æšä¸¾æ–¹å¼
 */</span>
<span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token class-name">Singleton</span> <span class="token punctuation">{</span>
    INSTANCE<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h3 id="é—®é¢˜"><a href="#é—®é¢˜" class="header-anchor">#</a> é—®é¢˜</h3> <blockquote><p>åºåˆ—åŒ–å’Œåå°„ç ´åå•ä¾‹</p></blockquote> <p>ğŸ”¨åºåˆ—åŒ–ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ObjectInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">ObjectOutputStream</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * æ¼”ç¤ºåºåˆ—åŒ–ç ´åå•ä¾‹
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SerializeTest</span><span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//writeSingleton();</span>
        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token function">readSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>singleton<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Singleton</span> singleton1 <span class="token operator">=</span> <span class="token function">readSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>singleton1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * è¯»
     * @return
     * @throws Exception
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">readSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\32284\\Desktop\\a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è¾“å…¥æµ</span>
        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å…³é—­æµ</span>
        ois<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> singleton<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * å†™
     * @throws Exception
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">writeSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token function">getSingleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\32284\\Desktop\\a.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è¾“å‡ºæµ</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>singleton<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å…³é—­æµ</span>
        oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ”¨åå°„ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * åå°„ç ´åå•ä¾‹
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ReflectTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Class</span> singletonClass <span class="token operator">=</span> <span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">;</span>
        <span class="token comment">//æ— å‚æ„é€ æ–¹æ³•</span>
        <span class="token class-name">Constructor</span> constructor <span class="token operator">=</span> singletonClass<span class="token punctuation">.</span><span class="token function">getDeclaredConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å–æ¶ˆè®¿é—®æ£€æŸ¥</span>
        constructor<span class="token punctuation">.</span><span class="token function">setAccessible</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åå°„åˆ›å»ºå¯¹è±¡</span>
        <span class="token class-name">Singleton</span> singleton <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Singleton</span> singleton1 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">)</span> constructor<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>singleton1<span class="token operator">==</span>singleton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="è§£å†³"><a href="#è§£å†³" class="header-anchor">#</a> è§£å†³</h3> <p>ğŸ”¨åºåˆ—åŒ–ï¼šé’ˆå¯¹readObject</p> <blockquote><p>Singletonç±»æ·»åŠ <code>readResolve</code>()æ–¹æ³•</p> <p>åºåˆ—åŒ–æ—¶æœ‰è¿™ä¸ªæ–¹æ³•å°±è¿”å›è¯¥æ–¹æ³•çš„è¿”å›å€¼ï¼Œæ²¡æœ‰è¿™ä¸ªæ–¹æ³•å°±è¿”å›newçš„å¯¹è±¡</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Singleton</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>

    <span class="token comment">//ç§æœ‰æ„é€ æ–¹æ³•</span>
    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Singleton</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//å¯¹å¤–æä¾›é™æ€æ–¹æ³•è·å–è¯¥å¯¹è±¡</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Singleton</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">/**
     * ä¸‹é¢æ˜¯ä¸ºäº†è§£å†³åºåˆ—åŒ–ååºåˆ—åŒ–ç ´è§£å•ä¾‹æ¨¡å¼
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åŸç†ï¼šæºç </p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// if nested read, passHandle contains handle of enclosing object</span>
    <span class="token keyword">int</span> outerHandle <span class="token operator">=</span> passHandle<span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é‡ç‚¹æŸ¥çœ‹readObject0æ–¹æ³•</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
    
<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readObject0</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token keyword">switch</span> <span class="token punctuation">(</span>tc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
			<span class="token keyword">case</span> TC_OBJECT<span class="token operator">:</span>
				<span class="token keyword">return</span> <span class="token function">checkResolve</span><span class="token punctuation">(</span><span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span>unshared<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//é‡ç‚¹æŸ¥çœ‹readOrdinaryObjectæ–¹æ³•</span>
			<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
        depth<span class="token operator">--</span><span class="token punctuation">;</span>
        bin<span class="token punctuation">.</span><span class="token function">setBlockDataMode</span><span class="token punctuation">(</span>oldMode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>    
<span class="token punctuation">}</span>
    
<span class="token keyword">private</span> <span class="token class-name">Object</span> <span class="token function">readOrdinaryObject</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> unshared<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token comment">//isInstantiable è¿”å›trueï¼Œæ‰§è¡Œ desc.newInstance()ï¼Œé€šè¿‡åå°„åˆ›å»ºæ–°çš„å•ä¾‹ç±»ï¼Œ</span>
    obj <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">isInstantiable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> desc<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span> 
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token comment">// åœ¨Singletonç±»ä¸­æ·»åŠ  readResolve æ–¹æ³•å desc.hasReadResolveMethod() æ–¹æ³•æ‰§è¡Œç»“æœä¸ºtrue</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> handles<span class="token punctuation">.</span><span class="token function">lookupException</span><span class="token punctuation">(</span>passHandle<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> desc<span class="token punctuation">.</span><span class="token function">hasReadResolveMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    	<span class="token comment">// é€šè¿‡åå°„è°ƒç”¨ Singleton ç±»ä¸­çš„ readResolve æ–¹æ³•ï¼Œå°†è¿”å›å€¼èµ‹å€¼ç»™repå˜é‡</span>
    	<span class="token comment">// è¿™æ ·å¤šæ¬¡è°ƒç”¨ObjectInputStreamç±»ä¸­çš„readObjectæ–¹æ³•ï¼Œç»§è€Œå°±ä¼šè°ƒç”¨æˆ‘ä»¬å®šä¹‰çš„readResolveæ–¹æ³•ï¼Œæ‰€ä»¥è¿”å›çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</span>
    	<span class="token class-name">Object</span> rep <span class="token operator">=</span> desc<span class="token punctuation">.</span><span class="token function">invokeReadResolve</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
     	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ğŸ”¨åå°„ï¼šé’ˆå¯¹<code>æ„é€ æ–¹æ³•</code></p> <blockquote><p>åŸç†ï¼šåå°„è°ƒç”¨æ„é€ æ–¹æ³•åˆ›å»ºå¯¹è±¡æ—¶ï¼Œæœ‰å°±æŠ›å‡ºå¼‚å¸¸</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> flag<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Singleton</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">synchronized</span><span class="token punctuation">(</span><span class="token class-name">Singleton</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;å•ä¾‹å­˜åœ¨ï¼Œä¸èƒ½ç»§ç»­åˆ›å»º&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            flag<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div><h3 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <blockquote><p><code>Runtime</code>åº•å±‚ä½¿ç”¨å•ä¾‹è®¾è®¡æ¨¡å¼ï¼ˆé¥¿æ±‰å¼ä¸­çš„é™æ€å˜é‡ï¼‰</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Runtime</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> currentRuntime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * Returns the runtime object associated with the current Java application.
     * Most of the methods of class &lt;code&gt;Runtime&lt;/code&gt; are instance
     * methods and must be invoked with respect to the current runtime object.
     *
     * @return  the &lt;code&gt;Runtime&lt;/code&gt; object associated with the current
     *          Java application.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Runtime</span> <span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> currentRuntime<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/** Don't let anyone else instantiate this class */</span>
    <span class="token keyword">private</span> <span class="token class-name">Runtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RuntimeDemo</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">//è·å–Runtimeç±»å¯¹è±¡</span>
        <span class="token class-name">Runtime</span> runtime <span class="token operator">=</span> <span class="token class-name">Runtime</span><span class="token punctuation">.</span><span class="token function">getRuntime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//è¿”å› Java è™šæ‹Ÿæœºä¸­çš„å†…å­˜æ€»é‡ã€‚</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">totalMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è¿”å› Java è™šæ‹Ÿæœºè¯•å›¾ä½¿ç”¨çš„æœ€å¤§å†…å­˜é‡ã€‚</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>runtime<span class="token punctuation">.</span><span class="token function">maxMemory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//åˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹æ‰§è¡ŒæŒ‡å®šçš„å­—ç¬¦ä¸²å‘½ä»¤ï¼Œè¿”å›è¿›ç¨‹å¯¹è±¡</span>
        <span class="token class-name">Process</span> process <span class="token operator">=</span> runtime<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&quot;ipconfig&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–å‘½ä»¤æ‰§è¡Œåçš„ç»“æœï¼Œé€šè¿‡è¾“å…¥æµè·å–</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> process<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> b <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>arr<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>b<span class="token punctuation">,</span><span class="token string">&quot;gbk&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å·¥å‚"><a href="#å·¥å‚" class="header-anchor">#</a> å·¥å‚</h2> <blockquote><p>è§£è€¦ï¼Œå·¥å‚ç”Ÿäº§å¯¹è±¡ï¼Œå®¢æˆ·å’Œå·¥å‚æ‰“äº¤é“ï¼Œå½»åº•å’Œå¯¹è±¡è§£è€¦</p></blockquote> <ol><li>ç®€å•å·¥å‚ï¼ˆä¸å±äº23ç§è®¾è®¡æ¨¡å¼ï¼‰</li> <li>å·¥å‚æ–¹æ³•</li> <li>æŠ½è±¡å·¥å‚</li></ol> <h3 id="ç®€å•å·¥å‚"><a href="#ç®€å•å·¥å‚" class="header-anchor">#</a> ç®€å•å·¥å‚</h3> <blockquote><p>ä¸æ˜¯è®¾è®¡æ¨¡å¼ï¼Œåƒæ˜¯ç¼–ç¨‹ä¹ æƒ¯</p></blockquote> <h4 id="ç»“æ„"><a href="#ç»“æ„" class="header-anchor">#</a> ç»“æ„</h4> <ul><li>æŠ½è±¡äº§å“ï¼ˆæ¥å£æˆ–æŠ½è±¡ï¼‰ï¼šç®€å•æè¿°äº§å“ç‰¹æ€§å’ŒåŠŸèƒ½</li> <li>å…·ä½“äº§å“ï¼š==å®ç°æˆ–ç»§æ‰¿==</li> <li>å…·ä½“å·¥å‚ï¼šæœ‰åˆ›å»ºäº§å“æ–¹æ³•ï¼Œå®¢æˆ·è°ƒç”¨æ–¹æ³•è·å–äº§å“</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309100245.png" alt="image-20220309100245074"></p> <div class="language-java extra-class"><pre class="language-java"><code>	<span class="token comment">//æ·»åŠ staticï¼Œå³é™æ€å·¥å‚ï¼Œç±»å.æ–¹æ³•å</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> type<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//1ã€åˆ›å»ºå¯¹è±¡</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token comment">//2ã€åˆ¤æ–­æ˜¯ä»€ä¹ˆå¯¹è±¡</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;american&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            coffee<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;latte&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            coffee<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸å­˜åœ¨è¯¥å’–å•¡&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div><h4 id="é—®é¢˜-2"><a href="#é—®é¢˜-2" class="header-anchor">#</a> é—®é¢˜</h4> <blockquote><p>è§£é™¤å®¢æˆ·å’ŒCoffeeçš„è€¦åˆï¼Œä½†æ–°å¢å®¢æˆ·å’Œå·¥å‚è€¦åˆï¼Œä¸ç¬¦åˆå¼€é—­åŸåˆ™</p></blockquote> <h3 id="å·¥å‚æ–¹æ³•"><a href="#å·¥å‚æ–¹æ³•" class="header-anchor">#</a> å·¥å‚æ–¹æ³•</h3> <blockquote><p>è§£å†³ç®€å•å·¥å‚é—®é¢˜ï¼Œæä¾›å·¥å‚æ¥å£ï¼Œå­ç±»å·¥å‚å®ç°æ¥å£</p></blockquote> <h4 id="ç»“æ„-2"><a href="#ç»“æ„-2" class="header-anchor">#</a> ç»“æ„</h4> <ul><li>æŠ½è±¡å·¥å‚ï¼šæè¿°å·¥å‚åŠŸèƒ½</li> <li>å…·ä½“å·¥å‚ï¼šå®ç°å·¥å‚ï¼Œåˆ›é€ äº§å“</li> <li>æŠ½è±¡äº§å“ï¼šäº§å“ç‰¹æ€§å’ŒåŠŸèƒ½</li> <li>å…·ä½“äº§å“ï¼šå®ç°æˆ–ç»§æ‰¿</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309101633.png" alt="image-20220309101632721"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡å·¥å‚</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//å…·ä½“å·¥å‚</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LatteCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanCoffeeFactory</span> <span class="token keyword">implements</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//CoffeeStore</span>
<span class="token comment">/**
 * å’–å•¡åº—ç±»
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeStore</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">;</span>
	<span class="token comment">//æŒ‡å®šå·¥å‚</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFactory</span><span class="token punctuation">(</span><span class="token class-name">CoffeeFactory</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>factory <span class="token operator">=</span> factory<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * ç‚¹å’–å•¡
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addMilk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        coffee<span class="token punctuation">.</span><span class="token function">addSugar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> coffee<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="ä¼˜ç¼ºç‚¹"><a href="#ä¼˜ç¼ºç‚¹" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹</h4> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>æ·»åŠ äº§å“ï¼Œåªéœ€å¢åŠ å·¥å‚ï¼Œæ— éœ€ä¿®æ”¹å·¥å‚ï¼ˆå¼€é—­åŸåˆ™ï¼‰</li> <li>çŸ¥é“å·¥å‚å°±å¾—åˆ°äº§å“ï¼Œæ— éœ€çŸ¥é“äº§å“åˆ›å»ºè¿‡ç¨‹</li></ul> <p>ç¼ºç‚¹ï¼š</p> <ul><li>å¢åŠ ä¸€ä¸ªäº§å“ï¼šå¢åŠ äº§å“ç±»å’Œäº§å“å·¥å‚ç±»</li></ul> <h3 id="æŠ½è±¡å·¥å‚"><a href="#æŠ½è±¡å·¥å‚" class="header-anchor">#</a> æŠ½è±¡å·¥å‚</h3> <blockquote><p>å‰é¢ä¸¤ç§å·¥å‚éƒ½æ˜¯ç”Ÿäº§ä¸€ç±»äº§å“ï¼Œç”Ÿäº§ç»¼åˆå‹å‘¢ï¼Ÿï¼Ÿï¼Ÿ</p> <p>äº§å“æ—ï¼šä¸€ç»„ç›¸å…³æˆ–ç›¸äº’ä¾èµ–</p> <p>ä¾‹ï¼šè¾“å…¥æ³•æ¢çš®è‚¤ï¼Œä¸€æ•´å¥—ä¸€èµ·æ¢</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309103039.png" alt="image-20220309103038970"></p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309103053.png" alt="image-20220309103052286"></p> <h4 id="ç»“æ„-3"><a href="#ç»“æ„-3" class="header-anchor">#</a> ç»“æ„</h4> <ul><li>æŠ½è±¡å·¥å‚ï¼šæœ‰åˆ›å»ºå¤šä¸ªäº§å“æ–¹æ³•</li> <li>å…·ä½“å·¥å‚ï¼šå®ç°å·¥å‚ï¼Œåˆ›å»ºäº§å“</li> <li>æŠ½è±¡äº§å“ï¼šäº§å“ç‰¹æ€§å’ŒåŠŸèƒ½</li> <li>å…·ä½“äº§å“ï¼šå®ç°æˆ–ç»§æ‰¿ï¼Œä¸€ä¸ªå·¥å‚å¤šä¸ªäº§å“ï¼Œ<code>ä¸€å¯¹å¤š</code></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309103901.png" alt="image-20220309103900672"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡å·¥å‚</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//ç¾å¼ç”œç‚¹å·¥å‚</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AmericanDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AmericanCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MatchaMousse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//æ„å¤§åˆ©é£å‘³ç”œç‚¹å·¥å‚</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ItalyDessertFactory</span> <span class="token keyword">implements</span> <span class="token class-name">DessertFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">createCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">LatteCoffee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Dessert</span> <span class="token function">createDessert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Tiramisu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="ä¼˜ç¼ºç‚¹-2"><a href="#ä¼˜ç¼ºç‚¹-2" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹</h4> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>åŠ ä¸€ä¸ªæ—ï¼ˆä¸­å›½ï¼‰ï¼ŒåªåŠ å¯¹åº”å·¥å‚ç±»</li></ul> <p>ç¼ºç‚¹ï¼š</p> <ul><li>å¢åŠ äº§å“ï¼ˆæ¥å£ï¼‰ï¼Œæ‰€æœ‰å·¥å‚ç±»ï¼ˆå®ç°ç±»ï¼‰éœ€ä¿®æ”¹</li></ul> <h3 id="å¸¸ç”¨å·¥å‚"><a href="#å¸¸ç”¨å·¥å‚" class="header-anchor">#</a> å¸¸ç”¨å·¥å‚</h3> <blockquote><p>ç®€å•å·¥å‚+é…ç½®æ–‡ä»¶</p> <p>å·¥å‚åŠ è½½é…ç½®é‡Œçš„å…¨ç±»åè·å–å¯¹è±¡ï¼Œå¹¶æŠŠå¯¹è±¡å­˜å‚¨åˆ°Mapï¼Œé”®ä¸ºåå­—ï¼Œå€¼ä¸ºå¯¹è±¡</p></blockquote> <p>ğŸ”¨bean.propertiesï¼šé…ç½®</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">american</span><span class="token punctuation">=</span><span class="token value attr-value">com.luo.creator.factory.ConfigFactory.AmericanCoffee</span>
<span class="token key attr-name">latte</span><span class="token punctuation">=</span><span class="token value attr-value">com.luo.creator.factory.ConfigFactory.LatteCoffee</span>
</code></pre></div><p>ğŸ”¨CoffeeFactoryï¼šå·¥å‚</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CoffeeFactory</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Coffee</span><span class="token punctuation">&gt;</span></span> map<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//é™æ€ä»£ç å—åªæ‰§è¡Œä¸€æ¬¡</span>
    <span class="token keyword">static</span><span class="token punctuation">{</span>
        <span class="token class-name">Properties</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Properties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">InputStream</span> is<span class="token operator">=</span><span class="token class-name">CoffeeFactory</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;bean.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">//åŠ è½½å±æ€§</span>
            p<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> key <span class="token operator">:</span> p<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//propertyï¼šcom.luo.creator.factory.ConfigFactory.AmericanCoffee</span>
                <span class="token class-name">String</span> className <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//è·å–å¯¹è±¡çš„åå°„</span>
                <span class="token class-name">Class</span> aClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//åå°„ï¼šè·å–å¯¹è±¡ã€æ–¹æ³•ã€å±æ€§</span>
                <span class="token class-name">Coffee</span> coffee <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Coffee</span><span class="token punctuation">)</span> aClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> key<span class="token punctuation">,</span>coffee<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Coffee</span> <span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">CoffeeFactory</span> coffeeFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CoffeeFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Coffee</span> latte <span class="token operator">=</span> coffeeFactory<span class="token punctuation">.</span><span class="token function">orderCoffee</span><span class="token punctuation">(</span><span class="token string">&quot;latte&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//æ‹¿é“å’–å•¡</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>latte<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ¡ˆä¾‹-2"><a href="#æ¡ˆä¾‹-2" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p>âœ”ï¸Collection.iteratorï¼š</p> <ol><li>æŠ½è±¡å·¥å‚ï¼šCollection</li> <li>å…·ä½“å·¥å‚ï¼šArrayList</li> <li>æŠ½è±¡äº§å“ï¼šIterator</li> <li>å…·ä½“äº§å“ï¼šArrayListç±»ä¸­çš„Iterå†…éƒ¨ç±»</li></ol> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309105041.png" alt="image-20220309105039037"></p> <p>âœ”ï¸DateFormatä¸­çš„getInstance()æ–¹æ³•</p> <p>âœ”ï¸Calendarä¸­çš„getInstance()æ–¹æ³•</p> <h2 id="åŸå‹"><a href="#åŸå‹" class="header-anchor">#</a> åŸå‹</h2> <blockquote><p>å¤åˆ¶å®ä¾‹ï¼ˆåŸå‹ï¼‰</p> <p>åœºæ™¯ï¼š</p> <ul><li>å¯¹è±¡åˆ›å»ºå¤æ‚</li></ul></blockquote> <h3 id="ç»“æ„-4"><a href="#ç»“æ„-4" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡åŸå‹ç±»ï¼šclone()</li> <li>å…·ä½“åŸå‹ç±»ï¼šå®ç°clone()</li> <li>è®¿é—®ç±»ï¼šè°ƒç”¨å…·ä½“çš„clone()</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309182749.png" alt="image-20220309182748518"></p> <h3 id="å®ç°-2"><a href="#å®ç°-2" class="header-anchor">#</a> å®ç°</h3> <blockquote><p>æµ…å…‹éš†ï¼šå¤åˆ¶å¯¹è±¡ï¼Œæœ‰ç›¸åŒçš„å†…å­˜åœ°å€ï¼Œå³å¼•ç”¨ç›¸åŒ</p> <p>æ·±å…‹éš†ï¼šæ–°å¯¹è±¡ï¼Œå¼•ç”¨ä¸åŒ</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡åŸå‹ç±»ï¼šCloneable</span>

<span class="token comment">//å…·ä½“åŸå‹ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Realizetype</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åŸå‹å¯¹è±¡åˆ›å»ºå®Œæˆï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token class-name">Realizetype</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;åŸå‹å¯¹è±¡å¤åˆ¶æˆåŠŸï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Realizetype</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//è®¿é—®ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrototypeTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Realizetype</span> r1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Realizetype</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Realizetype</span> r2 <span class="token operator">=</span> r1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å¯¹è±¡r1å’Œr2æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Ÿ&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span>r1 <span class="token operator">==</span> r2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ¡ˆä¾‹-3"><a href="#æ¡ˆä¾‹-3" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <blockquote><p>ä¸‰å¥½å­¦ç”Ÿé™¤äº†è·å¥–äººä¸åŒï¼Œå…¶ä»–æ–‡å­—ç›¸åŒ</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309183112.png" alt="image-20220309183111780"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//å¥–çŠ¶ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Citation</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">&quot;åŒå­¦ï¼šåœ¨2020å­¦å¹´ç¬¬ä¸€å­¦æœŸä¸­è¡¨ç°ä¼˜ç§€ï¼Œè¢«è¯„ä¸ºä¸‰å¥½å­¦ç”Ÿã€‚ç‰¹å‘æ­¤çŠ¶ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Citation</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•è®¿é—®ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c1<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//å¤åˆ¶å¥–çŠ¶</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> c1<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å°†å¥–çŠ¶çš„åå­—ä¿®æ”¹æå››</span>
        c2<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;æå››&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        c1<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        c2<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æµ…å…‹éš†-æ·±å…‹éš†"><a href="#æµ…å…‹éš†-æ·±å…‹éš†" class="header-anchor">#</a> æµ…å…‹éš†-&gt;æ·±å…‹éš†</h3> <blockquote><p>ä½¿ç”¨åºåˆ—åŒ–å’Œååºåˆ—åŒ–ï¼Œå³ä½¿ç”¨æµ</p> <p>åºåˆ—åŒ–ï¼šå¯¹è±¡åˆ°å­—èŠ‚</p></blockquote> <p>æ³¨æ„ï¼š</p> <ul><li>æµ…å…‹éš†æ˜¯studentï¼ŒCiationä¸å˜ï¼ˆä¸€ç›´æ˜¯æ·±å…‹éš†ï¼‰</li> <li>åºåˆ—åŒ–ï¼šéœ€è¦ç±»å®ç°<code>Serializable</code>æ¥å£</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CitationTest</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Citation</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Citation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ·±å…‹éš†é‡Œè¿˜æœ‰å¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡æ˜¯æµ…å…‹éš†</span>
        c1<span class="token punctuation">.</span><span class="token function">setStu</span><span class="token punctuation">(</span>stu1<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/**
         * è‡ªå®šä¹‰æ·±å…‹éš†ï¼šæ·±å…‹éš†éœ€è¦ä½¿ç”¨å¯¹è±¡æµ
         */</span>
        <span class="token class-name">ObjectOutputStream</span> oos<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\32284\\Desktop\\b.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å†™å…¥æµ</span>
        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//é‡Šæ”¾æµ</span>
        oos<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">ObjectInputStream</span> ois<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\32284\\Desktop\\b.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è¯»å…¥æµ</span>
        <span class="token class-name">Citation</span> c2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Citation</span><span class="token punctuation">)</span> ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//é‡Šæ”¾æµ</span>
        ois<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Student</span> stu2 <span class="token operator">=</span> c2<span class="token punctuation">.</span><span class="token function">getStu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu1<span class="token operator">==</span>stu2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å»ºé€ è€…"><a href="#å»ºé€ è€…" class="header-anchor">#</a> å»ºé€ è€…</h2> <blockquote><p>å»ºé€ è€…ï¼ˆBuilderï¼‰å’Œè£…é…ï¼ˆDirectorï¼‰</p> <p>ä¸åŒå¯¹è±¡ï¼š</p> <ul><li><p>ä¸åŒè®¾å¤‡ï¼Œç»„è£…æ–¹æ³•ä¸€æ ·</p></li> <li><p>è®¾å¤‡ç›¸åŒï¼Œä¸åŒç»„è£…</p></li></ul> <p>åœºæ™¯ï¼š</p> <ul><li>å¯¹è±¡å¤æ‚ï¼Œå¤šä¸ªéƒ¨ä»¶ç»„æˆ</li> <li>æ„å»ºè¿‡ç¨‹å’Œæœ€ç»ˆè¡¨ç¤ºç‹¬ç«‹</li></ul></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309193424.png" alt="image-20220309193423724"></p> <h3 id="ç»“æ„-5"><a href="#ç»“æ„-5" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡å»ºé€ è€…ç±»ï¼šæ¥å£</li> <li>å…·ä½“å»ºé€ è€…ç±»ï¼šå®ç°Builderæ¥å£ï¼Œæä¾›äº§å“å®ä¾‹</li> <li>äº§å“ç±»ï¼šå¤æ‚å¯¹è±¡</li> <li>æŒ‡æŒ¥è€…ç±»ï¼šè°ƒç”¨å»ºé€ è€…ï¼Œä¸æ¶‰åŠå…·ä½“äº§å“ä¿¡æ¯</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309194350.png" alt="image-20220309194349405"></p> <h3 id="æ¡ˆä¾‹-4"><a href="#æ¡ˆä¾‹-4" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <blockquote><p>è‡ªè¡Œè½¦Bikeï¼ˆäº§å“ï¼‰ï¼ŒåŒ…å«è½¦æ¶ã€è½¦åº§ç­‰ç»„ä»¶</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309194553.png" alt="image-20220309194552856"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//è‡ªè¡Œè½¦ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bike</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> frame<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> seat<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token class-name">String</span> frame<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>frame <span class="token operator">=</span> frame<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token class-name">String</span> seat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>seat <span class="token operator">=</span> seat<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// æŠ½è±¡ builder ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">Bike</span> mBike <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//æ‘©æ‹œå•è½¦Builderç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MobikeBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">&quot;é“åˆé‡‘è½¦æ¶&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">&quot;çœŸçš®è½¦åº§&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ofoå•è½¦Builderç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OfoBuilder</span> <span class="token keyword">extends</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setFrame</span><span class="token punctuation">(</span><span class="token string">&quot;ç¢³çº¤ç»´è½¦æ¶&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBike<span class="token punctuation">.</span><span class="token function">setSeat</span><span class="token punctuation">(</span><span class="token string">&quot;æ©¡èƒ¶è½¦åº§&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> mBike<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æŒ‡æŒ¥è€…ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Director</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Builder</span> mBuilder<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder <span class="token operator">=</span> builder<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Bike</span> <span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mBuilder<span class="token punctuation">.</span><span class="token function">buildSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mBuilder<span class="token punctuation">.</span><span class="token function">createBike</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OfoBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MobikeBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">showBike</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Director</span> director <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Director</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Bike</span> bike <span class="token operator">=</span> director<span class="token punctuation">.</span><span class="token function">construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getFrame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bike<span class="token punctuation">.</span><span class="token function">getSeat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹-3"><a href="#ä¼˜ç¼ºç‚¹-3" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹</h3> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>å°è£…æ€§å¥½ï¼Œäº§å“å’Œå»ºé€ è€…ç¨³å®šï¼Œä¸šåŠ¡é€»è¾‘äº¤ç»™æŒ‡æŒ¥è€…</li> <li>å®¢æˆ·æ— éœ€çŸ¥é“äº§å“å†…éƒ¨ç»†èŠ‚</li> <li>å®¹æ˜“æ‰©å±•ï¼Œæ–°è‡ªè¡Œè½¦ï¼Œæ·»åŠ æ–°çš„å»ºé€ è€…</li></ul> <h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="header-anchor">#</a> æ‰©å±•</h3> <blockquote><p>é—®é¢˜ï¼šç±»çš„æ„é€ æ–¹æ³•éœ€è¦ä¼ å…¥å¤šä¸ªå‚æ•°ï¼Œå¯è¯»æ€§å·®</p> <p>è§£å†³ï¼šå»ºé€ è€…ï¼Œç±»é‡Œæ·»åŠ é™æ€å†…éƒ¨ç±»ï¼Œç±»çš„æ„é€ æ–¹æ³•ç§æœ‰ï¼Œç”±é™æ€å†…éƒ¨ç±»æä¾›å®ä¾‹</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220309195546.png" alt="image-20220309195545432"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Phone</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token class-name">Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cpu <span class="token operator">=</span> builder<span class="token punctuation">.</span>cpu<span class="token punctuation">;</span>
        screen <span class="token operator">=</span> builder<span class="token punctuation">.</span>screen<span class="token punctuation">;</span>
        memory <span class="token operator">=</span> builder<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>
        mainboard <span class="token operator">=</span> builder<span class="token punctuation">.</span>mainboard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token keyword">class</span> <span class="token class-name">Builder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> cpu<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> screen<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> memory<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name">String</span> mainboard<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">cpu</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cpu <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">screen</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            screen <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">memory</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            memory <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Builder</span> <span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token class-name">String</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            mainboard <span class="token operator">=</span> val<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">public</span> <span class="token class-name">Phone</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Phone</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Phone{&quot;</span> <span class="token operator">+</span>
                <span class="token string">&quot;cpu='&quot;</span> <span class="token operator">+</span> cpu <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, screen='&quot;</span> <span class="token operator">+</span> screen <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, memory='&quot;</span> <span class="token operator">+</span> memory <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token string">&quot;, mainboard='&quot;</span> <span class="token operator">+</span> mainboard <span class="token operator">+</span> <span class="token char">'\''</span> <span class="token operator">+</span>
                <span class="token char">'}'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Phone</span> phone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Phone<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">cpu</span><span class="token punctuation">(</span><span class="token string">&quot;intel&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">mainboard</span><span class="token punctuation">(</span><span class="token string">&quot;åç¡•&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">memory</span><span class="token punctuation">(</span><span class="token string">&quot;é‡‘å£«é¡¿&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">screen</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸‰æ˜Ÿ&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>phone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="åˆ›å»ºè€…æ¨¡å¼å¯¹æ¯”"><a href="#åˆ›å»ºè€…æ¨¡å¼å¯¹æ¯”" class="header-anchor">#</a> åˆ›å»ºè€…æ¨¡å¼å¯¹æ¯”</h2> <h3 id="å·¥å‚æ–¹æ³•vså»ºé€ è€…"><a href="#å·¥å‚æ–¹æ³•vså»ºé€ è€…" class="header-anchor">#</a> å·¥å‚æ–¹æ³•VSå»ºé€ è€…</h3> <ul><li>å·¥å‚æ–¹æ³•ï¼šæ³¨é‡æ•´ä½“</li> <li>å»ºé€ è€…ï¼šæ³¨é‡ä¸€æ­¥ä¸€æ­¥æ„å»ºå¤æ‚å¯¹è±¡</li></ul> <h3 id="æŠ½è±¡å·¥å‚vså»ºé€ è€…"><a href="#æŠ½è±¡å·¥å‚vså»ºé€ è€…" class="header-anchor">#</a> æŠ½è±¡å·¥å‚VSå»ºé€ è€…</h3> <ul><li>æŠ½è±¡å·¥å‚ï¼šå…³å¿ƒä»€ä¹ˆäº§å“ç”±ä»€ä¹ˆå·¥å‚ç”Ÿäº§</li> <li>å»ºé€ è€…ï¼šç»„è£…é…ä»¶äº§ç”Ÿæ–°äº§å“</li> <li>ä¾‹ï¼šæŠ½è±¡å·¥å‚çœ‹æˆæ±½è½¦é…ä»¶å·¥å‚ï¼Œå»ºé€ è€…åˆ™æ˜¯æ±½è½¦ç»„è£…å·¥å‚ï¼Œä¸¤è€…è®¾è®¡æ¨¡å¼ç»“åˆä½¿ç”¨ï¼Œè¿”å›å®Œæ•´æ±½è½¦</li></ul> <h1 id="ç»“æ„å‹"><a href="#ç»“æ„å‹" class="header-anchor">#</a> ç»“æ„å‹</h1> <blockquote><p>å°†ç±»æˆ–å¯¹è±¡ç»„æˆæ›´å¤§çš„ç»“æ„</p> <p>ç±»ç»“æ„å‹æ¨¡å¼ï¼ˆç»§æ‰¿ï¼‰å’Œå¯¹è±¡ç»“æ„å‹æ¨¡å¼ï¼ˆç»„åˆæˆ–èšåˆï¼‰</p></blockquote> <ul><li>ä»£ç†</li> <li>é€‚é…å™¨</li> <li>è£…é¥°è€…</li> <li>æ¡¥æ¥</li> <li>å¤–è§‚</li> <li>ç»„åˆ</li> <li>äº«å…ƒ</li></ul> <h2 id="ä»£ç†"><a href="#ä»£ç†" class="header-anchor">#</a> ä»£ç†</h2> <blockquote><p>è®¿é—®å¯¹è±¡å’Œç›®æ ‡å¯¹è±¡çš„ä¸­ä»‹</p> <p>é™æ€ä»£ç†ï¼šç¼–è¯‘æœŸç”Ÿæˆ</p> <p>åŠ¨æ€ä»£ç†ï¼šè¿è¡Œæ—¶ï¼ŒJDKä»£ç†å’ŒCGLibä»£ç†</p></blockquote> <h3 id="ç»“æ„-6"><a href="#ç»“æ„-6" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡ä¸»é¢˜ç±»ï¼šæ¥å£æˆ–æŠ½è±¡ç±»ï¼ŒçœŸå®ä¸»é¢˜å’Œä»£ç†å¯¹è±¡çš„==ä¸šåŠ¡æ–¹æ³•==</li> <li>çœŸå®ä¸»é¢˜ç±»ï¼šä»£ç†çš„==çœŸå®å¯¹è±¡==ï¼Œ==å®ç°æ¥å£==</li> <li>ä»£ç†ç±»ï¼šæœ‰çœŸå®ä¸»é¢˜çš„<code>å¼•ç”¨</code></li></ul> <h3 id="é™æ€ä»£ç†"><a href="#é™æ€ä»£ç†" class="header-anchor">#</a> é™æ€ä»£ç†</h3> <blockquote><p>ä¸ç”¨å»ç«è½¦ç«™ä¹°ç¥¨ï¼Œå»ä»£å”®ç‚¹å³å¯</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220310222808.png" alt="image-20220310222807690"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//å–ç¥¨æ¥å£</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç«è½¦ç«™  ç«è½¦ç«™å…·æœ‰å–ç¥¨åŠŸèƒ½ï¼Œæ‰€ä»¥éœ€è¦å®ç°SellTicketsæ¥å£</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç«è½¦ç«™å–ç¥¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä»£å”®ç‚¹</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyPoint</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä»£ç†ç‚¹æ”¶å–ä¸€äº›æœåŠ¡è´¹ç”¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        station<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ProxyPoint</span> pp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        pp<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="jdkåŠ¨æ€ä»£ç†"><a href="#jdkåŠ¨æ€ä»£ç†" class="header-anchor">#</a> JDKåŠ¨æ€ä»£ç†</h3> <blockquote><p>æŠŠTrainStationè¿”å›ç»™SellTickets</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyPoint</span> <span class="token punctuation">{</span>
    <span class="token comment">//çœŸå®ä¸»é¢˜</span>
    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * ä»£ç†æ–¹æ³•
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">proxySell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä»£ç†æ ¼å¤–ä¸šåŠ¡ï¼Œæ”¶å–è´¹ç”¨ï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//resultï¼šçœŸå®å¯¹è±¡æ˜¯å¦æœ‰è¿”å›å€¼ï¼›argsï¼šçœŸå®å¯¹è±¡æ–¹æ³•æ˜¯å¦æœ‰å‚æ•°ï¼›stationï¼šçœŸå®å¯¹è±¡</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>æ³¨æ„ï¼šproxySellä¸æ˜¯ä»£ç†æ¨¡å¼ä¸­çš„ä»£ç†ç±»ï¼Œä»£ç†ç±»åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ¨å†…å­˜ç”Ÿæˆï¼Œé€šè¿‡<code>Arthas</code>ï¼ˆé˜¿å°”è¨æ–¯ï¼‰æŸ¥çœ‹</p> <ul><li>ä»£ç†ç±»ï¼ˆ$Proxy0ï¼‰å®ç°SellTicketsï¼Œæ»¡è¶³çœŸå®ç±»å’Œä»£ç†å®ç°åŒæ ·æ¥å£</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">class</span> $<span class="token class-name">Proxy0</span> <span class="token keyword">extends</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name">SellTickets</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Method</span> m3<span class="token punctuation">;</span>

    <span class="token keyword">public</span> $<span class="token class-name">Proxy0</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> invocationHandler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>invocationHandler<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">static</span> <span class="token punctuation">{</span>
        m3 <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span><span class="token string">&quot;com.itheima.proxy.dynamic.jdk.SellTickets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token string">&quot;sell&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Class</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> m3<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//Javaæä¾›çš„åŠ¨æ€ä»£ç†ç›¸å…³ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Proxy</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>Serializable</span> <span class="token punctuation">{</span>
	<span class="token keyword">protected</span> <span class="token class-name">InvocationHandler</span> h<span class="token punctuation">;</span>
	 
	<span class="token keyword">protected</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token class-name">InvocationHandler</span> h<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>h <span class="token operator">=</span> h<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä»£ç†å·¥å‚ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> station <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * ä»£ç†æ–¹æ³•
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">SellTickets</span> <span class="token function">proxySell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SellTickets</span> sellTickets <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SellTickets</span><span class="token punctuation">)</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                station<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">InvocationHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä»£ç†æ ¼å¤–ä¸šåŠ¡ï¼Œæ”¶å–è´¹ç”¨ï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//resultï¼šçœŸå®å¯¹è±¡æ˜¯å¦æœ‰è¿”å›å€¼ï¼›argsï¼šçœŸå®å¯¹è±¡æ–¹æ³•æ˜¯å¦æœ‰å‚æ•°ï¼›stationï¼šçœŸå®å¯¹è±¡</span>
                        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>station<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> sellTickets<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•è®¿é—®ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//è·å–ä»£ç†å¯¹è±¡</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SellTickets</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="header-anchor">#</a> æ€»ç»“</h4> <ol><li>ä»£ç†ç±»ï¼ˆ<code>$Proxy0</code>ï¼‰ä¸­çš„sell()æ–¹æ³•è°ƒç”¨<code>InvocationHandler</code>==æ¥å£==çš„å­å®ç°ç±»å¯¹è±¡çš„<code>invoke</code>()æ–¹æ³•</li> <li>invokeæ–¹æ³•åå°„åˆ°çœŸå®å¯¹è±¡ï¼ˆ<code>TrainStation</code>ï¼‰ä¸­çš„<code>sell</code>()</li></ol> <h3 id="cglibåŠ¨æ€ä»£ç†"><a href="#cglibåŠ¨æ€ä»£ç†" class="header-anchor">#</a> CGLIBåŠ¨æ€ä»£ç†</h3> <blockquote><p>æ²¡æœ‰æ¥å£ï¼ˆSellTicketsï¼‰ï¼ŒJDKåŠ¨æ€ä»£ç†æ— æ³•ä½¿ç”¨</p> <p>CGLIBç¬¬ä¸‰æ–¹æä¾›çš„åŒ…ï¼Œè§£å†³é—®é¢˜</p></blockquote> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>cglib<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//ç«è½¦ç«™</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TrainStation</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç«è½¦ç«™å–ç¥¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä»£ç†å·¥å‚</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProxyFactory</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TrainStation</span> target <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TrainStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//åˆ›å»ºEnhancerå¯¹è±¡ï¼Œç±»ä¼¼äºJDKåŠ¨æ€ä»£ç†çš„Proxyç±»ï¼Œä¸‹ä¸€æ­¥å°±æ˜¯è®¾ç½®å‡ ä¸ªå‚æ•°</span>
        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®çˆ¶ç±»çš„å­—èŠ‚ç å¯¹è±¡</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¾ç½®å›è°ƒå‡½æ•°</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ›å»ºä»£ç†å¯¹è±¡</span>
        <span class="token class-name">TrainStation</span> obj <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/*
        interceptæ–¹æ³•å‚æ•°è¯´æ˜ï¼š
            o ï¼š ä»£ç†å¯¹è±¡
            method ï¼š çœŸå®å¯¹è±¡ä¸­çš„æ–¹æ³•çš„Methodå®ä¾‹
            args ï¼š å®é™…å‚æ•°
            methodProxy ï¼šä»£ç†å¯¹è±¡ä¸­çš„æ–¹æ³•çš„methodå®ä¾‹
     */</span>
    <span class="token keyword">public</span> <span class="token class-name">TrainStation</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> o<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> methodProxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä»£ç†ç‚¹æ”¶å–ä¸€äº›æœåŠ¡è´¹ç”¨(CGLIBåŠ¨æ€ä»£ç†æ–¹å¼)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">TrainStation</span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">TrainStation</span><span class="token punctuation">)</span> methodProxy<span class="token punctuation">.</span><span class="token function">invokeSuper</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ä¸‹é¢ä»£ç ä¹Ÿè¡Œ</span>
        <span class="token comment">//TrainStation result = (TrainStation) method.invoke(station,args);</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//åˆ›å»ºä»£ç†å·¥å‚å¯¹è±¡</span>
        <span class="token class-name">ProxyFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ProxyFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è·å–ä»£ç†å¯¹è±¡</span>
        <span class="token class-name">TrainStation</span> proxyObject <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">getProxyObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        proxyObject<span class="token punctuation">.</span><span class="token function">sell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¸‰ç§ä»£ç†å¯¹æ¯”"><a href="#ä¸‰ç§ä»£ç†å¯¹æ¯”" class="header-anchor">#</a> ä¸‰ç§ä»£ç†å¯¹æ¯”</h3> <ul><li>jdkå’ŒCGLIB
<ul><li>CGLIbï¼š
<ul><li>åº•å±‚ASMå­—èŠ‚ç ç”Ÿæˆæ¡†æ¶ï¼Œå­—èŠ‚ç æŠ€æœ¯ç”Ÿæˆä»£ç†ç±»</li> <li>ä¸èƒ½å¯¹<code>final</code>ç±»æˆ–è€…æ–¹æ³•è¿›è¡Œä»£ç†</li></ul></li> <li>jdkï¼š
<ul><li>JDKæ•ˆç‡é«˜</li> <li>æœ‰æ¥å£å°±ä½¿ç”¨JDKï¼Œå¦åˆ™CGLib</li></ul></li></ul></li> <li>åŠ¨æ€å’Œé™æ€ï¼š
<ul><li>åŠ¨æ€ï¼šæ¥å£æ–¹æ³•é›†ä¸­å¤„ç†ï¼ˆInvocationHandler.invokeï¼‰</li> <li>é™æ€ï¼šæ¥å£æ–¹æ³•å¤šï¼Œå®ç°ç±»ä¹Ÿéœ€è¦ä¿®æ”¹ï¼Œè¿›è¡Œä¸­è½¬</li></ul></li></ul> <h3 id="ä¼˜ç¼ºç‚¹-4"><a href="#ä¼˜ç¼ºç‚¹-4" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹</h3> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ï¼šæœ‰ä¸­ä»‹ä¿æŠ¤ç›®æ ‡å¯¹è±¡</li> <li>ä»£ç†å¯¹è±¡å¯ä»¥==æ‰©å±•ç›®æ ‡å¯¹è±¡åŠŸèƒ½==</li> <li>å®¢æˆ·å’Œç›®æ ‡åˆ†ç¦»ï¼Œ<code>è§£è€¦åˆ</code></li></ul> <p>ç¼ºç‚¹ï¼š</p> <ul><li>ç³»ç»Ÿå¤æ‚åº¦</li></ul> <h3 id="åœºæ™¯"><a href="#åœºæ™¯" class="header-anchor">#</a> åœºæ™¯</h3> <ul><li>è¿œç¨‹ä»£ç†ï¼š==ç½‘ç»œé€šä¿¡éšè—==ï¼Œåªæš´éœ²æ¥å£æä¾›è°ƒç”¨ï¼Œä¸å¿…å…³ç³»é€šä¿¡éƒ¨åˆ†ç»†èŠ‚</li> <li>é˜²ç«å¢™ä»£ç†ï¼šæµè§ˆå™¨å’Œäº’è”ç½‘ï¼Œä¸­ä»‹ï¼ˆä»£ç†ï¼‰é˜²ç«å¢™</li> <li>ä¿æŠ¤ä»£ç†ï¼š==æ§åˆ¶å¯¹è±¡è®¿é—®==ï¼Œä¸åŒç”¨æˆ·è®¿é—®æƒé™ä¸ä¸€æ ·</li></ul> <h2 id="é€‚é…å™¨"><a href="#é€‚é…å™¨" class="header-anchor">#</a> é€‚é…å™¨</h2> <blockquote><p>è§£å†³æ¥å£ä¸å…¼å®¹</p> <p>ç±»é€‚é…å™¨ï¼ˆè€¦åˆåº¦é«˜ï¼‰å’Œå¯¹è±¡é€‚é…å™¨ï¼ˆå¸¸ç”¨ï¼‰</p> <p>æ³¨æ„ï¼šè¿˜æœ‰ä¸€ç§åˆ†ç±»ï¼Œæ¥å£é€‚é…å™¨ï¼ˆä¸å®ç°æ¥å£ä¸­æ‰€æœ‰æ–¹æ³•ï¼Œåˆ›å»ºæŠ½è±¡ç±»Adapterå®ç°æ‰€æœ‰æ–¹æ³•ï¼Œç»§æ‰¿æŠ½è±¡ç±»å³å¯å–éœ€è¦çš„æ–¹æ³•ï¼‰</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220311151442.png" alt="image-20220311151440755"></p> <h3 id="ç»“æ„-7"><a href="#ç»“æ„-7" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>ç›®æ ‡æ¥å£ï¼šéœ€è¦ä½¿ç”¨çš„æ¥å£ï¼ˆä¸å¯ä»¥ç›´æ¥è°ƒç”¨ï¼‰æˆ–æŠ½è±¡ç±»</li> <li>é€‚é…è€…ç±»ï¼šå¯ä»¥ç›´æ¥ä½¿ç”¨çš„æ¥å£</li> <li>é€‚é…å™¨ç±»ï¼šç»§æ‰¿æˆ–å¼•ç”¨é€‚é…è€…å¯¹è±¡ï¼Œå°†é€‚é…è€…æ¥å£è½¬ç›®æ ‡æ¥å£</li></ul> <h3 id="ç±»é€‚é…å™¨"><a href="#ç±»é€‚é…å™¨" class="header-anchor">#</a> ç±»é€‚é…å™¨</h3> <blockquote><p>å®ç°ä¸šåŠ¡æ¥å£ï¼Œï¼ˆSDAdapterTFï¼‰ç»§æ‰¿éœ€è¦è¢«ä½¿ç”¨çš„æ¥å£çš„å®ç°ç±»ï¼ˆTFCardImplï¼‰</p> <p>è¿èƒŒåˆæˆå¤ç”¨åŸåˆ™</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220311152050.png" alt="image-20220311152049391"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//SDå¡çš„æ¥å£</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//è¯»å–SDå¡æ–¹æ³•</span>
    <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å†™å…¥SDå¡åŠŸèƒ½</span>
    <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//SDå¡å®ç°ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;sd card read a msg :hello word SD&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;sd card write msg : &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç”µè„‘ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Computer</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token class-name">SDCard</span> sdCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>sdCard <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">NullPointerException</span><span class="token punctuation">(</span><span class="token string">&quot;sd card null&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sdCard<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//TFå¡æ¥å£</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>
    <span class="token comment">//è¯»å–TFå¡æ–¹æ³•</span>
    <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//å†™å…¥TFå¡åŠŸèƒ½</span>
    <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//TFå¡å®ç°ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">TFCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span><span class="token string">&quot;tf card read msg : hello word tf card&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> msg<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeTF</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;tf card write a msg : &quot;</span> <span class="token operator">+</span> msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//å®šä¹‰é€‚é…å™¨ç±»ï¼ˆSDå…¼å®¹TFï¼‰</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span> <span class="token keyword">extends</span> <span class="token class-name">TFCardImpl</span> <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter read tf card &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter write tf card&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å¯¹è±¡é€‚é…å™¨"><a href="#å¯¹è±¡é€‚é…å™¨" class="header-anchor">#</a> å¯¹è±¡é€‚é…å™¨</h3> <blockquote><p>åªå®ç°ï¼Œä¸ç»§æ‰¿ï¼ŒæŠŠç»§æ‰¿æ¢æˆå¼•ç”¨è¯¥å¯¹è±¡</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220311152515.png" alt="image-20220311152514529"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//åˆ›å»ºé€‚é…å™¨å¯¹è±¡ï¼ˆSDå…¼å®¹TFï¼‰</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SDAdapterTF</span>  <span class="token keyword">implements</span> <span class="token class-name">SDCard</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">TFCard</span> tfCard<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span><span class="token class-name">TFCard</span> tfCard<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tfCard <span class="token operator">=</span> tfCard<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">readSD</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter read tf card &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> tfCard<span class="token punctuation">.</span><span class="token function">readTF</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">writeSD</span><span class="token punctuation">(</span><span class="token class-name">String</span> msg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;adapter write tf card&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tfCard<span class="token punctuation">.</span><span class="token function">writeTF</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Computer</span> computer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Computer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDCard</span> sdCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>sdCard<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TFCard</span> tfCard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TFCardImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SDAdapterTF</span> adapter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SDAdapterTF</span><span class="token punctuation">(</span>tfCard<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>computer<span class="token punctuation">.</span><span class="token function">readSD</span><span class="token punctuation">(</span>adapter<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åœºæ™¯-2"><a href="#åœºæ™¯-2" class="header-anchor">#</a> åœºæ™¯</h3> <ul><li>æ–°ç³»ç»Ÿæ¥å£å’Œæ—§<code>ç³»ç»Ÿ</code>ä¸ä¸€è‡´</li> <li>ç¬¬ä¸‰æ–¹æä¾›çš„ç»„ä»¶å’Œè‡ªå·±<code>ç»„ä»¶æ¥å£</code>å®šä¹‰ä¸åŒ</li></ul> <h3 id="jdkæºç è§£æ"><a href="#jdkæºç è§£æ" class="header-anchor">#</a> JDKæºç è§£æ</h3> <blockquote><p>Readerï¼ˆå­—ç¬¦æµï¼‰ã€InputStreamï¼ˆå­—èŠ‚æµï¼‰</p> <p>è§£ç ï¼šå­—èŠ‚-&gt;å­—ç¬¦</p> <p>ç¼–ç ï¼šå­—ç¬¦-&gt;å­—èŠ‚</p></blockquote> <ul><li>InputStreamReaderç»§æ‰¿Readerï¼ˆæŠ½è±¡ç±»ï¼‰ï¼Œå’Œå®ç°æ¥å£ä¸€è‡´</li> <li>InputStreamReaderå¼•ç”¨äº†StreamDecoderï¼Œæ»¡è¶³å¯¹è±¡é€‚é…å™¨</li> <li>æ³¨æ„ï¼šStreamDecoderä¹Ÿç¬¦åˆå¯¹è±¡é€‚é…å™¨ï¼Œæ§åˆ¶è§£ç ï¼Œä½†ä¸»è¦è¿˜æ˜¯çœ‹InputStreamReader</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220311153149.png" alt="image-20220311153146989"></p> <h2 id="è£…é¥°è€…"><a href="#è£…é¥°è€…" class="header-anchor">#</a> è£…é¥°è€…</h2> <blockquote><p>ä¸æ”¹å˜åŸæœ‰ï¼ŒåŠ¨æ€ç»™å¯¹è±¡å¢åŠ åŠŸèƒ½</p> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>ç»§æ‰¿æ˜¯é™æ€çš„é™„åŠ ï¼Œè£…é¥°è€…æ˜¯åŠ¨æ€é™„åŠ </li> <li>ä¾‹ï¼šä»·æ ¼ï¼šç‚’é¢ï¼ˆåŸæ¥ï¼‰+è›‹+åŸ¹æ ¹ï¼ˆåŠ¨æ€æ·»åŠ ï¼‰</li></ul></blockquote> <p>ç»§æ‰¿çš„é—®é¢˜ï¼š</p> <ol><li>æ‰©å±•æ€§</li> <li>è¿‡å¤šçš„å­ç±»</li></ol> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220311191826.png" alt="image-20220311191818021"></p> <h3 id="ç»“æ„-8"><a href="#ç»“æ„-8" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡æ„ä»¶ï¼šæŠ½è±¡ç±»æˆ–æ¥å£</li> <li>å…·ä½“æ„ä»¶ï¼ˆ<code>ç‚’ç±³</code>ï¼‰ï¼šå®ç°æŠ½è±¡æ„ä»¶</li> <li>æŠ½è±¡è£…é¥°ï¼šç»§æ‰¿æˆ–å®ç°æŠ½è±¡æ„ä»¶</li> <li>å…·ä½“è£…é¥°ï¼šç»§æ‰¿æˆ–å®ç°æŠ½è±¡è£…é¥°ï¼Œ<code>å­ç±»ï¼ˆåŠ è›‹ï¼‰</code>æ‰©å±•å…·ä½“æ„ä»¶ï¼ˆç‚’ç±³ï¼‰åŠŸèƒ½</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220312111937.png" alt="image-20220312111936390"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//å¿«é¤æ¥å£</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">float</span> price<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> desc<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPrice</span><span class="token punctuation">(</span><span class="token keyword">float</span> price<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> price<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDesc</span><span class="token punctuation">(</span><span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>desc <span class="token operator">=</span> desc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//è·å–ä»·æ ¼</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç‚’é¥­</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedRice</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;ç‚’é¥­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç‚’é¢</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FriedNoodles</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">&quot;ç‚’é¢&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//é…æ–™ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Garnish</span> <span class="token keyword">extends</span> <span class="token class-name">FastFood</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">FastFood</span> fastFood<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">FastFood</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFastFood</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Garnish</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">,</span> <span class="token keyword">float</span> price<span class="token punctuation">,</span> <span class="token class-name">String</span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>price<span class="token punctuation">,</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>fastFood <span class="token operator">=</span> fastFood<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//é¸¡è›‹é…æ–™</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Egg</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;é¸¡è›‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//åŸ¹æ ¹é…æ–™</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Bacon</span> <span class="token keyword">extends</span> <span class="token class-name">Garnish</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span><span class="token class-name">FastFood</span> fastFood<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">super</span><span class="token punctuation">(</span>fastFood<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">&quot;åŸ¹æ ¹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">float</span> <span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">getFastFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//ç‚¹ä¸€ä»½ç‚’é¥­</span>
        <span class="token class-name">FastFood</span> food <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//èŠ±è´¹çš„ä»·æ ¼</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> food<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;å…ƒ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç‚¹ä¸€ä»½åŠ é¸¡è›‹çš„ç‚’é¥­</span>
        <span class="token class-name">FastFood</span> food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedRice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        food1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Egg</span><span class="token punctuation">(</span>food1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//èŠ±è´¹çš„ä»·æ ¼</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food1<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> food1<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;å…ƒ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç‚¹ä¸€ä»½åŠ åŸ¹æ ¹çš„ç‚’é¢</span>
        <span class="token class-name">FastFood</span> food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FriedNoodles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        food2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bacon</span><span class="token punctuation">(</span>food2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//èŠ±è´¹çš„ä»·æ ¼</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>food2<span class="token punctuation">.</span><span class="token function">getDesc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> food2<span class="token punctuation">.</span><span class="token function">cost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;å…ƒ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åœºæ™¯-3"><a href="#åœºæ™¯-3" class="header-anchor">#</a> åœºæ™¯</h3> <ol><li>å¤§é‡å­ç±»</li> <li>ç±»ä¸èƒ½ç»§æ‰¿ï¼ˆfinalç±»ï¼‰</li> <li>åŠ¨æ€ç»™å•ä¸ªå¯¹è±¡æ·»åŠ åŠŸèƒ½</li> <li>åŠ¨æ€æ·»åŠ ã€åŠ¨æ€æ’¤é”€ï¼Œé¸¡è›‹å–å®Œäº†</li></ol> <h3 id="jdkæºç "><a href="#jdkæºç " class="header-anchor">#</a> JDKæºç </h3> <blockquote><p>IOæµä½¿ç”¨è£…é¥°è€…ï¼šBufferedInputStreamã€BufferedOutputStreamã€BufferedReaderã€BufferedWriter</p> <p>ä¾‹ï¼š<code>BufferedWriter</code>ä½¿ç”¨è£…é¥°è€…æ¨¡å¼å¯¹Writerå¢å¼ºï¼ˆæ·»åŠ ç¼“å†²åŒºï¼‰</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220312113514.png" alt="image-20220312113512745"></p> <h3 id="é™æ€ä»£ç†å’Œè£…é¥°è€…"><a href="#é™æ€ä»£ç†å’Œè£…é¥°è€…" class="header-anchor">#</a> é™æ€ä»£ç†å’Œè£…é¥°è€…</h3> <p>ç›¸åŒç‚¹ï¼š</p> <ul><li>å®ç°æˆ–ç»§æ‰¿ç›®æ ‡</li> <li>å¼•ç”¨ç›®æ ‡ç±»</li> <li>ä¸ä¿®æ”¹åŸæ¥ç›®æ ‡ï¼Œä½†å¢å¼ºç›®æ ‡</li></ul> <p>ä¸åŒç‚¹ï¼š</p> <ul><li>ç›®çš„ï¼š
<ul><li>è£…é¥°è€…ï¼š<code>å¢å¼º</code>ç›®æ ‡</li> <li>é™æ€ä»£ç†ï¼šä¿æŠ¤å’Œ<code>éšè—</code>ç›®æ ‡</li></ul></li> <li>ç›®æ ‡å¯¹è±¡æ„å»ºä¸åŒ
<ul><li>è£…é¥°è€…ï¼š<code>æ„é€ æ–¹æ³•</code>ä¼ é€’</li> <li>é™æ€ä»£ç†ï¼šä»£ç†<code>ç±»å†…éƒ¨</code>åˆ›å»º</li></ul></li></ul> <h2 id="æ¡¥æ¥"><a href="#æ¡¥æ¥" class="header-anchor">#</a> æ¡¥æ¥</h2> <blockquote><p>ä¸¤ä¸ªç»´åº¦</p> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>ç»†èŠ‚å¯¹å®¢æˆ·é€æ˜</li> <li>å¯æ‰©å……æ€§</li></ul></blockquote> <h3 id="ç»“æ„-9"><a href="#ç»“æ„-9" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡åŒ–ï¼šæœ‰å®ç°åŒ–å¯¹è±¡çš„å¼•ç”¨</li> <li>æ‰©å±•æŠ½è±¡åŒ–ï¼šå®ç°çˆ¶ç±»æŠ½è±¡åŒ–çš„æ–¹æ³•</li> <li>å®ç°åŒ–ï¼šæ¥å£</li> <li>å…·ä½“å®ç°åŒ–ï¼šå®ç°æ¥å£</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220312144729.png" alt="image-20220312144727935"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//è§†é¢‘æ–‡ä»¶</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//aviæ–‡ä»¶</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AVIFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;aviè§†é¢‘æ–‡ä»¶ï¼š&quot;</span><span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//rmvbæ–‡ä»¶</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">REVBBFile</span> <span class="token keyword">implements</span> <span class="token class-name">VideoFile</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;rmvbæ–‡ä»¶ï¼š&quot;</span> <span class="token operator">+</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æ“ä½œç³»ç»Ÿç‰ˆæœ¬</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OperatingSystemVersion</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>videoFile <span class="token operator">=</span> videoFile<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//Windowsç‰ˆæœ¬</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Windows</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystem</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//macç‰ˆæœ¬</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Mac</span> <span class="token keyword">extends</span> <span class="token class-name">OperatingSystemVersion</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Mac</span><span class="token punctuation">(</span><span class="token class-name">VideoFile</span> videoFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>videoFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token class-name">String</span> fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		videoFile<span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">OperatingSystem</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Windows</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AVIFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token string">&quot;æˆ˜ç‹¼3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åœºæ™¯-4"><a href="#åœºæ™¯-4" class="header-anchor">#</a> åœºæ™¯</h3> <ul><li>ä¸¤ä¸ªç»´åº¦éƒ½éœ€è¦æ‰©å±•</li> <li>ç»§æ‰¿å¯¼è‡´å­ç±»è¿‡å¤š</li></ul> <h2 id="å¤–è§‚"><a href="#å¤–è§‚" class="header-anchor">#</a> å¤–è§‚</h2> <blockquote><p>å¤šä¸ªå¤æ‚å­ç³»ç»Ÿæä¾›ä¸€è‡´çš„æ¥å£</p> <p>è¿ªç±³ç‰¹æ³•åˆ™çš„å…¸å‹åº”ç”¨ï¼ˆæ˜æ˜Ÿå’Œç»çºªäººï¼‰</p> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>å‡å°‘å®¢æˆ·å¤„ç†å¯¹è±¡æ•°ç›®</li></ul> <p>ç¼ºç‚¹ï¼š</p> <ul><li>ä¸ç¬¦åˆå¼€é—­åŸåˆ™</li></ul></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220312163129.png" alt="image-20220312163128521"></p> <h3 id="ç»“æ„-10"><a href="#ç»“æ„-10" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>å¤–è§‚è§’è‰²ï¼šå¤šä¸ªå­ç³»ç»Ÿå¯¹å¤–æä¾›ä¸€ä¸ªæ¥å£</li> <li>å­ç³»ç»Ÿï¼šå®ç°ç³»ç»Ÿéƒ¨åˆ†åŠŸèƒ½</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220312163358.png" alt="image-20220312163356965"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//ç¯ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Light</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“å¼€äº†ç¯....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å…³é—­äº†ç¯....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç”µè§†ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TV</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“å¼€äº†ç”µè§†....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å…³é—­äº†ç”µè§†....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æ§åˆ¶ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AirCondition</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“å¼€äº†ç©ºè°ƒ....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å…³é—­äº†ç©ºè°ƒ....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æ™ºèƒ½éŸ³ç®±</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SmartAppliancesFacade</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Light</span> light<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">TV</span> tv<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AirCondition</span> airCondition<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        light <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Light</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TV</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AirCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“å¼€&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">&quot;å…³é—­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æˆ‘è¿˜å¬ä¸æ‡‚ä½ è¯´çš„ï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//èµ·åºŠåä¸€é”®å¼€ç”µå™¨</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;èµ·åºŠäº†&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ç¡è§‰ä¸€é”®å…³ç”µå™¨</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç¡è§‰äº†&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        light<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        tv<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        airCondition<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//åˆ›å»ºå¤–è§‚å¯¹è±¡</span>
        <span class="token class-name">SmartAppliancesFacade</span> facade <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SmartAppliancesFacade</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å®¢æˆ·ç«¯ç›´æ¥ä¸å¤–è§‚å¯¹è±¡è¿›è¡Œäº¤äº’</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">&quot;æ‰“å¼€å®¶ç”µ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        facade<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token string">&quot;å…³é—­å®¶ç”µ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åœºæ™¯-5"><a href="#åœºæ™¯-5" class="header-anchor">#</a> åœºæ™¯</h3> <ul><li>å¤æ‚ç³»ç»Ÿçš„å­ç³»ç»Ÿå¾ˆå¤šï¼Œå¤–è§‚æ¨¡å¼è®¾è®¡ä¸€ä¸ªç®€å•çš„æ¥å£å¯¹å¤–è®¿é—®</li> <li>å®¢æˆ·å’Œå¤šä¸ªå­ç³»ç»Ÿè€¦åˆåº¦é«˜ï¼Œå¤–è§‚å¯ä»¥åˆ†ç¦»</li></ul> <h3 id="æºç "><a href="#æºç " class="header-anchor">#</a> æºç </h3> <blockquote><p>tomcatå°†è¯·æ±‚ä¿¡æ¯å°è£…æˆHttpServletRequestï¼ˆæ¥å£ï¼‰</p> <p>å¤–è§‚ï¼š<code>RequestFacade</code>ï¼Œå¼•ç”¨Requestï¼ˆå­ç³»ç»Ÿï¼‰</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220312164001.png" alt="image-20220312164000824"></p> <h2 id="ç»„åˆ"><a href="#ç»„åˆ" class="header-anchor">#</a> ç»„åˆ</h2> <blockquote><p>ä¸€ç»„ç›¸ä¼¼å¯¹è±¡çœ‹å‡ºä¸€ä¸ªå•ä¸€å¯¹è±¡ï¼Œä¾æ®æ ‘å½¢ç»“æ„</p> <p>ä¼˜ç‚¹ï¼š</p> <ul><li>å®¢æˆ·å¿½ç•¥å±‚æ¬¡å·®å¼‚</li> <li>æ·»åŠ æ–°æ ‘æèŠ‚ç‚¹æˆ–å¶å­èŠ‚ç‚¹å¾ˆæ–¹ä¾¿ï¼Œç¬¦åˆå¼€é—­åŸåˆ™</li></ul></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220312165237.png" alt="image-20220312165236030"></p> <h3 id="ç»“æ„-11"><a href="#ç»“æ„-11" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡æ ¹èŠ‚ç‚¹ï¼šå®šä¹‰é»˜è®¤å±æ€§å’Œæ–¹æ³•</li> <li>æ ‘æèŠ‚ç‚¹ï¼šç»„åˆæ ‘æèŠ‚ç‚¹å’Œå¶å­èŠ‚ç‚¹</li> <li>å¶å­èŠ‚ç‚¹ï¼šå‘ä¸‹æ— åˆ†æ”¯</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220312165247.png" alt="image-20220312165245694"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//èœå•ç»„ä»¶  ä¸ç®¡æ˜¯èœå•è¿˜æ˜¯èœå•é¡¹ï¼Œéƒ½åº”è¯¥ç»§æ‰¿è¯¥ç±»ï¼ŒæŠ½è±¡æ ¹èŠ‚ç‚¹</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> level<span class="token punctuation">;</span>

    <span class="token comment">//æ·»åŠ èœå•</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ç§»é™¤èœå•</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è·å–æŒ‡å®šçš„å­èœå•</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è·å–èœå•åç§°</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//æ ‘æèŠ‚ç‚¹</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Menu</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">&gt;</span></span> menuComponentList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Menu</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        menuComponentList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MenuComponent</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        menuComponentList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>menuComponent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">MenuComponent</span> <span class="token function">getChild</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> menuComponentList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MenuComponent</span> menuComponent <span class="token operator">:</span> menuComponentList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            menuComponent<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//å¶å­èŠ‚ç‚¹</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MenuItem</span> <span class="token keyword">extends</span> <span class="token class-name">MenuComponent</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">MenuItem</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token keyword">int</span> level<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>level <span class="token operator">=</span> level<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> level<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;--&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="åˆ†ç±»-2"><a href="#åˆ†ç±»-2" class="header-anchor">#</a> åˆ†ç±»</h3> <ul><li><p>é€æ˜ç»„åˆï¼š</p> <ul><li>æŠ½è±¡æ ¹èŠ‚ç‚¹ä¸­çš„æ–¹æ³•</li> <li>ç¼ºç‚¹ï¼š
<ul><li>å¶å­èŠ‚ç‚¹ä¸éœ€è¦å¤šä½™çš„æ–¹æ³•</li></ul></li></ul></li> <li><p>å®‰å…¨ç»„åˆï¼š</p> <ul><li><p>ç›¸åŒæ–¹æ³•æ‰æ”¾åˆ°æŠ½è±¡æ ¹èŠ‚ç‚¹</p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220312170417.png" alt="image-20220312170356652"></p></li></ul></li></ul> <h3 id="åœºæ™¯-6"><a href="#åœºæ™¯-6" class="header-anchor">#</a> åœºæ™¯</h3> <ul><li>æ–‡ä»¶ç›®å½•ï¼Œå¤šçº§ç›®å½•ç­‰æ ‘å½¢ç»“æ„</li></ul> <h2 id="äº«å…ƒæ¨¡å¼"><a href="#äº«å…ƒæ¨¡å¼" class="header-anchor">#</a> äº«å…ƒæ¨¡å¼</h2> <blockquote><p>å…±äº«å­˜åœ¨å¯¹è±¡</p></blockquote> <h3 id="ç»“æ„-12"><a href="#ç»“æ„-12" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>çŠ¶æ€ï¼š
<ul><li>å†…éƒ¨çŠ¶æ€ï¼šä¸æ”¹å˜çš„å…±äº«éƒ¨åˆ†</li> <li>å¤–éƒ¨çŠ¶æ€ï¼šéšç¯å¢ƒæ”¹å˜çš„ä¸å¯å…±äº«éƒ¨åˆ†</li></ul></li> <li>è§’è‰²ï¼š
<ul><li>æŠ½è±¡äº«å…ƒï¼šæ¥å£æˆ–æŠ½è±¡ç±»</li> <li>å…·ä½“äº«å…ƒï¼šå®ç°æˆ–ç»§æ‰¿</li> <li>éäº«å…ƒï¼šä¸èƒ½è¢«å…±äº«</li> <li>äº«å…ƒå·¥å‚ï¼šåˆ›å»ºå’Œç®¡ç†äº«å…ƒ</li></ul></li></ul> <h3 id="æ¡ˆä¾‹-5"><a href="#æ¡ˆä¾‹-5" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220313155238.png" alt="image-20220313155236880"></p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220313155245.png" alt="image-20220313155244661"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡äº«å…ƒ</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">display</span><span class="token punctuation">(</span><span class="token class-name">String</span> color<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ–¹å—å½¢çŠ¶ï¼š&quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; é¢œè‰²ï¼š&quot;</span> <span class="token operator">+</span> color<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//å…·ä½“äº«å…ƒ</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;I&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;L&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OBox</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractBox</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getShape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;O&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//äº«å…ƒå·¥å‚</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BoxFactory</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">AbstractBox</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> iBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> lBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">AbstractBox</span> oBox <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;I&quot;</span><span class="token punctuation">,</span> iBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;L&quot;</span><span class="token punctuation">,</span> lBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;O&quot;</span><span class="token punctuation">,</span> oBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> <span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">SingletonHolder</span><span class="token punctuation">.</span>INSTANCE<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">SingletonHolder</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">BoxFactory</span> INSTANCE <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BoxFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">AbstractBox</span> <span class="token function">getBox</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹å’Œåœºæ™¯"><a href="#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>å‡å°‘åˆ›å»ºå¯¹è±¡å†…å­˜</li> <li>å¤–éƒ¨å’Œå†…éƒ¨ç‹¬ç«‹</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>ç¨‹åºé€»è¾‘å¤æ‚</li></ul></li> <li>åœºæ™¯ï¼š
<ul><li>å¤§é‡ç›¸åŒå¯¹è±¡</li></ul></li></ul> <h3 id="æºç -2"><a href="#æºç -2" class="header-anchor">#</a> æºç </h3> <blockquote><p>Integerç±»ä½¿ç”¨äº«å…ƒæ¨¡å¼</p> <p>ä¾‹ï¼š-128~127ï¼šä»å¯¹è±¡æ± å–ï¼Œæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œåº•å±‚<code>valueOf</code>()æ–¹æ³•å¯çŸ¥åŸç†</p></blockquote> <h1 id="è¡Œä¸ºå‹"><a href="#è¡Œä¸ºå‹" class="header-anchor">#</a> è¡Œä¸ºå‹</h1> <blockquote><p>å¤šä¸ªç±»æˆ–å¯¹è±¡å¦‚ä½•å®Œæˆ==å•ä¸ªæ— æ³•å®Œæˆ==çš„ä»»åŠ¡</p> <p>åˆ†ç±»ï¼š</p> <ul><li>ç±»è¡Œä¸ºæ¨¡å¼ï¼šç»§æ‰¿</li> <li>å¯¹è±¡è¡Œä¸ºæ¨¡å¼ï¼šç»„åˆæˆ–èšåˆï¼Œåˆæˆæœç”¨åŸåˆ™</li></ul></blockquote> <ul><li>æ¨¡æ¿æ–¹æ³•ï¼ˆç±»è¡Œä¸ºï¼‰</li> <li>ç­–ç•¥</li> <li>å‘½ä»¤</li> <li>èŒè´£é“¾</li> <li>çŠ¶æ€</li> <li>è§‚å¯Ÿè€…</li> <li>ä¸­ä»‹è€…</li> <li>è¿­ä»£å™¨</li> <li>è®¿é—®è€…</li> <li>å¤‡å¿˜å½•</li> <li>è§£é‡Šå™¨ï¼ˆç±»è¡Œä¸ºï¼‰</li></ul> <h2 id="æ¨¡æ¿æ–¹æ³•"><a href="#æ¨¡æ¿æ–¹æ³•" class="header-anchor">#</a> æ¨¡æ¿æ–¹æ³•</h2> <blockquote><p>çˆ¶ç±»ä¸­å¾…å®šçš„æ–¹æ³•ç•™ç»™å­ç±»å®ç°</p> <p>æ¨¡æ¿æ–¹æ³•+finalï¼šé˜²æ­¢ç ´å</p></blockquote> <h3 id="ç»“æ„-13"><a href="#ç»“æ„-13" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡ç±»ï¼š
<ul><li>æ¨¡æ¿æ–¹æ³•ï¼ˆcookProcessï¼‰ï¼šæ–¹æ³•è°ƒç”¨é¡ºåº</li> <li>åŸºæœ¬æ–¹æ³•ï¼š
<ul><li>æŠ½è±¡æ–¹æ³•ï¼šå­ç±»å®ç°</li> <li>å…·ä½“æ–¹æ³•ï¼šçˆ¶ç±»å®ç°æˆ–çˆ¶ç±»é‡å†™</li> <li>é’©å­æ–¹æ³•ï¼šåˆ¤æ–­éœ€è¦å­ç±»é‡å†™çš„æ–¹æ³•</li></ul></li></ul></li> <li>å…·ä½“å­ç±»ï¼šç±»ä¼¼å…·ä½“æ–¹æ³•ï¼Œå®ç°æŠ½è±¡æ–¹æ³•</li></ul> <h3 id="æ¡ˆä¾‹-6"><a href="#æ¡ˆä¾‹-6" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220313161054.png" alt="image-20220313161053696"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//ç¬¬ä¸€æ­¥ï¼šå€’æ²¹</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç¬¬äºŒæ­¥ï¼šçƒ­æ²¹</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç¬¬ä¸‰æ­¥ï¼šå€’è”¬èœ</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç¬¬å››æ­¥ï¼šå€’è°ƒå‘³æ–™</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//ç¬¬äº”æ­¥ï¼šç¿»ç‚’</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å€’æ²¹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ç¬¬äºŒæ­¥ï¼šçƒ­æ²¹æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ç›´æ¥å®ç°</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">heatOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;çƒ­æ²¹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ç¬¬ä¸‰æ­¥ï¼šå€’è”¬èœæ˜¯ä¸ä¸€æ ·çš„ï¼ˆä¸€ä¸ªä¸‹åŒ…èœï¼Œä¸€ä¸ªæ˜¯ä¸‹èœå¿ƒï¼‰</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//ç¬¬å››æ­¥ï¼šå€’è°ƒå‘³æ–™æ˜¯ä¸ä¸€æ ·</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token comment">//ç¬¬äº”æ­¥ï¼šç¿»ç‚’æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥ç›´æ¥å®ç°</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç‚’å•Šç‚’å•Šç‚’åˆ°ç†Ÿå•Š&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_BaoCai</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸‹é”…çš„è”¬èœæ˜¯åŒ…èœ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸‹é”…çš„é…±æ–™æ˜¯è¾£æ¤’&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ConcreteClass_CaiXin</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractClass</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸‹é”…çš„è”¬èœæ˜¯èœå¿ƒ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸‹é”…çš„é…±æ–™æ˜¯è’œè“‰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//ç‚’æ‰‹æ’•åŒ…èœ</span>
        <span class="token class-name">ConcreteClass_BaoCai</span> baoCai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_BaoCai</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        baoCai<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//ç‚’è’œè“‰èœå¿ƒ</span>
        <span class="token class-name">ConcreteClass_CaiXin</span> caiXin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcreteClass_CaiXin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        caiXin<span class="token punctuation">.</span><span class="token function">cookProcess</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-2"><a href="#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-2" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>ç›¸åŒä»£ç æ”¾çˆ¶ç±»ï¼Œä¸åŒæ”¾å­ç±»</li> <li>åå‘æ§åˆ¶ï¼šå­ç±»å½±å“çˆ¶ç±»</li> <li>å¼€é—­åŸåˆ™</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>ç±»ä¸ªæ•°</li> <li>å­ç±»å½±å“çˆ¶ç±»ï¼Œä»£ç é˜…è¯»æœ‰éš¾åº¦</li></ul></li> <li>åœºæ™¯ï¼š
<ul><li>æ­¥éª¤å›ºå®šï¼Œä¸ªåˆ«å‘ç”Ÿå˜åŒ–</li></ul></li></ul> <h3 id="æºç -3"><a href="#æºç -3" class="header-anchor">#</a> æºç </h3> <blockquote><p>InputStreamä½¿ç”¨æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå…¶ä¸­çœ‹read()æ–¹æ³•</p></blockquote> <p>readï¼šä¸€æ¬¡è¯»ä¸€ä¸ªå­—èŠ‚ï¼Œå…·ä½“å¦‚ä½•è¯»å–ï¼Œç”±å­ç±»å®ç°</p> <h2 id="ç­–ç•¥"><a href="#ç­–ç•¥" class="header-anchor">#</a> ç­–ç•¥</h2> <blockquote><p>å¯¹ç®—æ³•å°è£…</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220313161731.png" alt="image-20220313161730812"></p> <h3 id="ç»“æ„-14"><a href="#ç»“æ„-14" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡ç­–ç•¥ï¼šæ¥å£æˆ–æŠ½è±¡ç±»</li> <li>å…·ä½“ç­–ç•¥ï¼šå®ç°æˆ–ç»§æ‰¿ï¼Œç®—æ³•çš„å®ç°</li> <li>ç¯å¢ƒç±»ï¼šæœ‰æŠ½è±¡ç­–ç•¥å¼•ç”¨ï¼ŒåŠ¨æ€å†³å®šé‚£ä¸ªç®—æ³•ï¼ˆå­ç±»ï¼‰</li></ul> <h3 id="æ¡ˆä¾‹-7"><a href="#æ¡ˆä¾‹-7" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220313161907.png" alt="image-20220313161906379"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡ç­–ç•¥</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//å…·ä½“ç­–ç•¥</span>
<span class="token comment">//ä¸ºæ˜¥èŠ‚å‡†å¤‡çš„ä¿ƒé”€æ´»åŠ¨A</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyA</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¹°ä¸€é€ä¸€&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä¸ºä¸­ç§‹å‡†å¤‡çš„ä¿ƒé”€æ´»åŠ¨B</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyB</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ»¡200å…ƒå‡50å…ƒ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä¸ºåœ£è¯å‡†å¤‡çš„ä¿ƒé”€æ´»åŠ¨C</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StrategyC</span> <span class="token keyword">implements</span> <span class="token class-name">Strategy</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ»¡1000å…ƒåŠ ä¸€å…ƒæ¢è´­ä»»æ„200å…ƒä»¥ä¸‹å•†å“&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//ç¯å¢ƒç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SalesMan</span> <span class="token punctuation">{</span>                        
    <span class="token comment">//æŒæœ‰æŠ½è±¡ç­–ç•¥è§’è‰²çš„å¼•ç”¨                              </span>
    <span class="token keyword">private</span> <span class="token class-name">Strategy</span> strategy<span class="token punctuation">;</span>                 
                                               
    <span class="token keyword">public</span> <span class="token class-name">SalesMan</span><span class="token punctuation">(</span><span class="token class-name">Strategy</span> strategy<span class="token punctuation">)</span> <span class="token punctuation">{</span>       
        <span class="token keyword">this</span><span class="token punctuation">.</span>strategy <span class="token operator">=</span> strategy<span class="token punctuation">;</span>              
    <span class="token punctuation">}</span>                                          
                                               
    <span class="token comment">//å‘å®¢æˆ·å±•ç¤ºä¿ƒé”€æ´»åŠ¨                                </span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">salesManShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                
        strategy<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                       
    <span class="token punctuation">}</span>                                          
<span class="token punctuation">}</span>                                              
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-3"><a href="#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-3" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>ç­–ç•¥è‡ªç”±åˆ‡æ¢</li> <li>æ˜“äºæ‰©å±•ï¼Œå¼€é—­åŸåˆ™</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>å®¢æˆ·éœ€çŸ¥é“æ‰€æœ‰ç­–ç•¥</li> <li>å¾ˆå¤šç­–ç•¥ç±»ï¼Œä½¿ç”¨äº«å…ƒå‡å°‘å¯¹è±¡æ•°é‡</li></ul></li> <li>åœºæ™¯ï¼š
<ul><li>åŠ¨æ€é€‰æ‹©å¤šä¸ªç®—æ³•</li> <li>å¤šä¸ªif else</li> <li>åªè¡¨ç°è¡Œä¸ºä¸åŒ</li></ul></li></ul> <h3 id="æºç -4"><a href="#æºç -4" class="header-anchor">#</a> æºç </h3> <blockquote><p>Comparatorä½¿ç”¨ç­–ç•¥æ¨¡å¼ï¼Œä¾‹Arrays.<code>sort</code>()æ–¹æ³•</p> <p>åŠ¨æ€å†³å®šæ’åºè§„åˆ™</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220313162404.png" alt="image-20220313162403306"></p> <h2 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="header-anchor">#</a> å‘½ä»¤</h2> <blockquote><p>è¯·æ±‚å’ŒæŒ‡å‘è¯·æ±‚ä¸­é—´é€šè¿‡å‘½ä»¤åˆ†å¼€</p> <p>ä¾‹ï¼šæœåŠ¡å‘˜å³å‘½ä»¤</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220313162651.png" alt="image-20220313162650525"></p> <h3 id="ç»“æ„-15"><a href="#ç»“æ„-15" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡å‘½ä»¤ï¼šå‘½ä»¤æ¥å£</li> <li>å…·ä½“å‘½ä»¤ï¼šå®ç°ï¼Œæœ‰æ¥æ”¶è€…å¼•ç”¨</li> <li>æ¥æ”¶è€…ï¼ˆå¨å¸ˆï¼‰ï¼šå®Œæˆè¯·æ±‚</li> <li>è¯·æ±‚è€…/è°ƒç”¨è€…ï¼ˆæœåŠ¡å‘˜ï¼‰ï¼šæœ‰å¾ˆå¤šå‘½ä»¤</li></ul> <h3 id="æ¡ˆä¾‹-8"><a href="#æ¡ˆä¾‹-8" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220313163229.png" alt="image-20220313163228184"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åªéœ€è¦å®šä¹‰ä¸€ä¸ªç»Ÿä¸€çš„æ‰§è¡Œæ–¹æ³•</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OrderCommand</span> <span class="token keyword">implements</span> <span class="token class-name">Command</span> <span class="token punctuation">{</span>

    <span class="token comment">//æŒæœ‰æ¥å—è€…å¯¹è±¡	</span>
    <span class="token keyword">private</span> <span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Order</span> order<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span><span class="token class-name">SeniorChef</span> receiver<span class="token punctuation">,</span> <span class="token class-name">Order</span> order<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>receiver <span class="token operator">=</span> receiver<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>order <span class="token operator">=</span> order<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;æ¡Œçš„è®¢å•ï¼š&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> keys <span class="token operator">=</span> order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> key <span class="token operator">:</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            receiver<span class="token punctuation">.</span><span class="token function">makeFood</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åœé¡¿ä¸€ä¸‹ æ¨¡æ‹Ÿåšé¥­çš„è¿‡ç¨‹</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;æ¡Œçš„é¥­å¼„å¥½äº†&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
    <span class="token comment">// é¤æ¡Œå·ç </span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> diningTable<span class="token punctuation">;</span>

    <span class="token comment">// ç”¨æ¥å­˜å‚¨é¤åå¹¶è®°å½•ä»½æ•°</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> foodDic <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDiningTable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token keyword">int</span> diningTable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>diningTable <span class="token operator">=</span> diningTable<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> foodDic<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setFoodDic</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        foodDic<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// èµ„æ·±å¤§å¨ç±» æ˜¯å‘½ä»¤çš„Receiver</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SeniorChef</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">makeFood</span><span class="token punctuation">(</span><span class="token keyword">int</span> num<span class="token punctuation">,</span><span class="token class-name">String</span> foodName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>num <span class="token operator">+</span> <span class="token string">&quot;ä»½&quot;</span> <span class="token operator">+</span> foodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Waitor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Command</span><span class="token punctuation">&gt;</span></span> commands<span class="token punctuation">;</span><span class="token comment">//å¯ä»¥æŒæœ‰å¾ˆå¤šçš„å‘½ä»¤å¯¹è±¡</span>

    <span class="token keyword">public</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        commands <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setCommand</span><span class="token punctuation">(</span><span class="token class-name">Command</span> cmd<span class="token punctuation">)</span><span class="token punctuation">{</span>
        commands<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å‘å‡ºå‘½ä»¤ å–Š è®¢å•æ¥äº†ï¼Œå¨å¸ˆå¼€å§‹æ‰§è¡Œ</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç¾å¥³æœåŠ¡å‘˜ï¼šå®å’šï¼Œå¤§å¨ï¼Œæ–°è®¢å•æ¥äº†.......&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> commands<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Command</span> cmd <span class="token operator">=</span> commands<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                cmd<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//åˆ›å»º2ä¸ªorder</span>
        <span class="token class-name">Order</span> order1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;è¥¿çº¢æŸ¿é¸¡è›‹é¢&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order1<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;å°æ¯å¯ä¹&quot;</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Order</span> order2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Order</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">setDiningTable</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;å°–æ¤’è‚‰ä¸ç›–é¥­&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        order2<span class="token punctuation">.</span><span class="token function">getFoodDic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;å°æ¯é›ªç¢§&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//åˆ›å»ºæ¥æ”¶è€…</span>
        <span class="token class-name">SeniorChef</span> receiver<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SeniorChef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å°†è®¢å•å’Œæ¥æ”¶è€…å°è£…æˆå‘½ä»¤å¯¹è±¡</span>
        <span class="token class-name">OrderCommand</span> cmd1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">OrderCommand</span> cmd2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OrderCommand</span><span class="token punctuation">(</span>receiver<span class="token punctuation">,</span> order2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ›å»ºè°ƒç”¨è€… waitor</span>
        <span class="token class-name">Waitor</span> invoker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Waitor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        invoker<span class="token punctuation">.</span><span class="token function">setCommand</span><span class="token punctuation">(</span>cmd2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//å°†è®¢å•å¸¦åˆ°æŸœå° å¹¶å‘å¨å¸ˆå–Š è®¢å•æ¥äº†</span>
        invoker<span class="token punctuation">.</span><span class="token function">orderUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-4"><a href="#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-4" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>è§£è€¦åˆï¼šè¯·æ±‚å’Œå®ç°è¯·æ±‚</li> <li>å‘½ä»¤å¢åŠ æˆ–åˆ é™¤çµæ´»ï¼Œå¼€é—­åŸåˆ™</li> <li>å’Œç»„åˆæ¨¡å¼ç»“åˆï¼Œå¤šä¸ªå‘½ä»¤ä¸€ä¸ªç»„åˆå‘½ä»¤</li> <li>å’Œå¤‡å¿˜å½•ç»“åˆï¼Œå‘½ä»¤==æ’¤é”€å’Œæ¢å¤==</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>ç³»ç»Ÿå¤æ‚</li></ul></li> <li>åœºæ™¯ï¼š
<ul><li>è¯·æ±‚å’Œå¤„ç†è¯·æ±‚è§£è€¦</li> <li>å‘½ä»¤æ’¤é”€å’Œæ¢å¤</li></ul></li></ul> <h3 id="æºç -5"><a href="#æºç -5" class="header-anchor">#</a> æºç </h3> <blockquote><p>Runableï¼š<code>Thread</code>å‘èµ·è¯·æ±‚ï¼Œå¤„ç†è¯·æ±‚ï¼šç¨‹åºå‘˜</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">/**
 * æµ‹è¯•ç±»
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Demo</span> <span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">//å¤„ç†è¯·æ±‚ï¼šå¨å¸ˆï¼ŒReceiverè‡ªå®šä¹‰çš„ç±»</span>
         <span class="token class-name">Receiver</span> receiver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Receiver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//å‘½ä»¤çš„å®ç°ç±»ï¼šæœ‰å¨å¸ˆå¼•ç”¨</span>
         <span class="token class-name">TurnOffThread</span> turnOffThread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TurnOffThread</span><span class="token punctuation">(</span>receiver<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//åˆ›å»ºæœåŠ¡å‘˜</span>
         <span class="token class-name">Thread</span> thread <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>turnOffThread<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//å‘èµ·è¯·æ±‚ï¼ŒæœåŠ¡å‘˜</span>
         thread<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="èŒè´£é“¾"><a href="#èŒè´£é“¾" class="header-anchor">#</a> èŒè´£é“¾</h2> <blockquote><p>å‘ä¸Šçº§è¯·å‡ï¼Œå‘èµ·è¯·æ±‚ï¼Œå¤šä¸ªè¯·æ±‚å¤„ç†è€…å½¢æˆä¸€æ¡é“¾</p></blockquote> <h3 id="ç»“æ„-16"><a href="#ç»“æ„-16" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡å¤„ç†è€…ï¼ˆHandlerï¼‰ï¼šæ–¹æ³•å’Œä¸‹ä¸€ä¸ªä¸Šçº§è¿æ¥</li> <li>å…·ä½“å¤„ç†è€…ï¼šå®ç°ï¼Œåˆ¤æ–­æ˜¯å¦èƒ½å¤„ç†è¯·æ±‚ï¼Œä¸è¡Œä¼ ç»™ä¸‹ä¸€ä¸ª</li> <li>å®¢æˆ·ç±»ï¼šåˆ›å»ºå¤„ç†é“¾ï¼Œé“¾å¤´æäº¤è¯·æ±‚ï¼Œä¸å…³å¿ƒä¹‹åç»†èŠ‚</li></ul> <h3 id="æ¡ˆä¾‹-9"><a href="#æ¡ˆä¾‹-9" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220313164652.png" alt="image-20220313164650943"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//è¯·å‡æ¡</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LeaveRequest</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span><span class="token comment">//å§“å</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> num<span class="token punctuation">;</span><span class="token comment">//è¯·å‡å¤©æ•°</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> content<span class="token punctuation">;</span><span class="token comment">//è¯·å‡å†…å®¹</span>

    <span class="token keyword">public</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token keyword">int</span> num<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>num <span class="token operator">=</span> num<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//å¤„ç†è€…æŠ½è±¡ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_ONE <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_THREE <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token keyword">int</span> NUM_SEVEN <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

    <span class="token comment">//è¯¥é¢†å¯¼å¤„ç†çš„è¯·å‡å¤©æ•°åŒºé—´</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numStart<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">;</span>

    <span class="token comment">//é¢†å¯¼ä¸Šé¢è¿˜æœ‰é¢†å¯¼</span>
    <span class="token keyword">private</span> <span class="token class-name">Handler</span> nextHandler<span class="token punctuation">;</span>

    <span class="token comment">//è®¾ç½®è¯·å‡å¤©æ•°èŒƒå›´ ä¸Šä¸å°é¡¶</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è®¾ç½®è¯·å‡å¤©æ•°èŒƒå›´</span>
    <span class="token keyword">public</span> <span class="token class-name">Handler</span><span class="token punctuation">(</span><span class="token keyword">int</span> numStart<span class="token punctuation">,</span> <span class="token keyword">int</span> numEnd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numStart <span class="token operator">=</span> numStart<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>numEnd <span class="token operator">=</span> numEnd<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è®¾ç½®ä¸Šçº§é¢†å¯¼</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNextHandler</span><span class="token punctuation">(</span><span class="token class-name">Handler</span> nextHandler<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">=</span> nextHandler<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æäº¤è¯·å‡æ¡</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">submit</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//å¦‚æœè¯·å‡å¤©æ•°è¾¾åˆ°è¯¥é¢†å¯¼è€…çš„å¤„ç†è¦æ±‚</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>numStart<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleLeave</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">//å¦‚æœè¿˜æœ‰ä¸Šçº§ å¹¶ä¸”è¯·å‡å¤©æ•°è¶…è¿‡äº†å½“å‰é¢†å¯¼çš„å¤„ç†èŒƒå›´</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler <span class="token operator">&amp;&amp;</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> num	<span class="token class-name">End</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>nextHandler<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç»§ç»­æäº¤</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æµç¨‹ç»“æŸ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>	
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//å„çº§é¢†å¯¼å¤„ç†è¯·å‡æ¡æ–¹æ³•</span>
    <span class="token keyword">protected</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å°ç»„é•¿</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GroupLeader</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å°ç»„é•¿å¤„ç†1-3å¤©çš„è¯·å‡</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_ONE<span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_ONE <span class="token operator">&amp;&amp;</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;è¯·å‡&quot;</span><span class="token operator">+</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;å¤©ï¼ŒåŸå› æ˜¯&quot;</span><span class="token operator">+</span>leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å°ç»„é•¿åŒæ„ï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//éƒ¨é—¨ç»ç†</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Manager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//éƒ¨é—¨ç»ç†å¤„ç†3-7å¤©çš„è¯·å‡</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE<span class="token punctuation">,</span> <span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_THREE <span class="token operator">&amp;&amp;</span> leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;è¯·å‡&quot;</span><span class="token operator">+</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;å¤©ï¼ŒåŸå› æ˜¯&quot;</span><span class="token operator">+</span>leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;éƒ¨é—¨ç»ç†åŒæ„ï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æ€»ç»ç†</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GeneralManager</span> <span class="token keyword">extends</span> <span class="token class-name">Handler</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//æ€»ç»ç†å¤„ç†7å¤©ä»¥ä¸Šçš„è¯·å‡</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">handleLeave</span><span class="token punctuation">(</span><span class="token class-name">LeaveRequest</span> leave<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;=</span><span class="token class-name">Handler</span><span class="token punctuation">.</span>NUM_SEVEN<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>leave<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;è¯·å‡&quot;</span><span class="token operator">+</span>leave<span class="token punctuation">.</span><span class="token function">getNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;å¤©ï¼ŒåŸå› æ˜¯&quot;</span><span class="token operator">+</span>leave<span class="token punctuation">.</span><span class="token function">getContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æ€»ç»ç†åŒæ„ï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//è¯·å‡æ¡æ¥ä¸€å¼ </span>
        <span class="token class-name">LeaveRequest</span> leave <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LeaveRequest</span><span class="token punctuation">(</span><span class="token string">&quot;å°èŠ±&quot;</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token string">&quot;èº«ä½“ä¸é€‚&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//å„ä½é¢†å¯¼</span>
        <span class="token class-name">GroupLeader</span> groupLeader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GroupLeader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Manager</span> manager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">GeneralManager</span> generalManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GeneralManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        groupLeader<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°ç»„é•¿çš„é¢†å¯¼æ˜¯éƒ¨é—¨ç»ç†</span>
        manager<span class="token punctuation">.</span><span class="token function">setNextHandler</span><span class="token punctuation">(</span>generalManager<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//éƒ¨é—¨ç»ç†çš„é¢†å¯¼æ˜¯æ€»ç»ç†</span>
        <span class="token comment">//ä¹‹æ‰€ä»¥åœ¨è¿™é‡Œè®¾ç½®ä¸Šçº§é¢†å¯¼ï¼Œæ˜¯å› ä¸ºå¯ä»¥æ ¹æ®å®é™…éœ€æ±‚æ¥æ›´æ”¹è®¾ç½®ï¼Œå¦‚æœå®æˆ˜ä¸­ä¸Šçº§é¢†å¯¼äººéƒ½æ˜¯å›ºå®šçš„ï¼Œåˆ™å¯ä»¥ç§»åˆ°é¢†å¯¼å®ç°ç±»ä¸­ã€‚</span>

        <span class="token comment">//æäº¤ç”³è¯·</span>
        groupLeader<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span>leave<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹-5"><a href="#ä¼˜ç¼ºç‚¹-5" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>è§£è€¦åˆï¼šè¯·æ±‚å’Œå¤„ç†è¯·æ±‚</li> <li>å¯æ‰©å±•ï¼šæ–°è¯·æ±‚ï¼Œå¼€é—­åŸåˆ™</li> <li>æ˜ç¡®è´£ä»»ï¼Œç±»çš„å•ä¸€èŒè´£åŸåˆ™</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>é•¿çš„èŒè´£é“¾ï¼Œæ€§èƒ½å—å½±å“</li></ul></li></ul> <h3 id="æºç -6"><a href="#æºç -6" class="header-anchor">#</a> æºç </h3> <blockquote><p><code>FilterChain</code>ï¼ˆè¿‡æ»¤å™¨ï¼‰</p> <p>å…ˆå¤„ç†æ‰€æœ‰requeståœ¨å€’åºæ‰§è¡Œæ‰€æœ‰response</p></blockquote> <h2 id="çŠ¶æ€"><a href="#çŠ¶æ€" class="header-anchor">#</a> çŠ¶æ€</h2> <blockquote><p>åˆ¤æ–­é€»è¾‘æ”¾åˆ°ä¸åŒçŠ¶æ€å¯¹è±¡</p></blockquote> <p>é—®é¢˜ï¼šLiftå¤§é‡çš„case</p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220314162946.png" alt="image-20220314162945437"></p> <h3 id="ç»“æ„-17"><a href="#ç»“æ„-17" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>ç¯å¢ƒè§’è‰²ï¼šä¸Šä¸‹æ–‡ï¼Œç»´æŠ¤å½“å‰çŠ¶æ€ï¼Œäº¤ç»™å…·ä½“çŠ¶æ€å®ç°</li> <li>æŠ½è±¡çŠ¶æ€ï¼šæ¥å£ï¼Œå°è£…çŠ¶æ€å¯¹åº”è¡Œä¸ºï¼Œæœ‰ä¸Šä¸‹æ–‡å¼•ç”¨</li> <li>å…·ä½“çŠ¶æ€ï¼šå®ç°è¡Œä¸º</li></ul> <h3 id="æ¡ˆä¾‹-10"><a href="#æ¡ˆä¾‹-10" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220314163042.png" alt="image-20220314163041173"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡çŠ¶æ€ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>
    <span class="token comment">//å®šä¹‰ä¸€ä¸ªç¯å¢ƒè§’è‰²ï¼Œä¹Ÿå°±æ˜¯å°è£…çŠ¶æ€çš„å˜åŒ–å¼•èµ·çš„åŠŸèƒ½å˜åŒ–</span>
    <span class="token keyword">protected</span> <span class="token class-name">Context</span> context<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setContext</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>context <span class="token operator">=</span> context<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ç”µæ¢¯å¼€é—¨åŠ¨ä½œ</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//ç”µæ¢¯å…³é—¨åŠ¨ä½œ</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//ç”µæ¢¯è¿è¡ŒåŠ¨ä½œ</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//ç”µæ¢¯åœæ­¢åŠ¨ä½œ</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//å¼€å¯çŠ¶æ€</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OpenningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//å¼€å¯å½“ç„¶å¯ä»¥å…³é—­äº†ï¼Œæˆ‘å°±æƒ³æµ‹è¯•ä¸€ä¸‹ç”µæ¢¯é—¨å¼€å…³åŠŸèƒ½</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç”µæ¢¯é—¨å¼€å¯...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//çŠ¶æ€ä¿®æ”¹</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åŠ¨ä½œå§”æ‰˜ä¸ºCloseStateæ¥æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å§”æ‰˜ç»™	äº†ClosingStateå­ç±»æ‰§è¡Œè¿™ä¸ªåŠ¨ä½œ</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ç”µæ¢¯é—¨ä¸èƒ½å¼€ç€å°±è·‘ï¼Œè¿™é‡Œä»€ä¹ˆä¹Ÿä¸åš</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//å¼€é—¨çŠ¶æ€å·²ç»æ˜¯åœæ­¢çš„äº†</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//è¿è¡ŒçŠ¶æ€</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RunningState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//è¿è¡Œçš„æ—¶å€™å¼€ç”µæ¢¯é—¨ï¼Ÿä½ ç–¯äº†ï¼ç”µæ¢¯ä¸ä¼šç»™ä½ å¼€çš„</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ç”µæ¢¯é—¨å…³é—­ï¼Ÿè¿™æ˜¯è‚¯å®šäº†</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//è™½ç„¶å¯ä»¥å…³é—¨ï¼Œä½†è¿™ä¸ªåŠ¨ä½œä¸å½’æˆ‘æ‰§è¡Œ</span>
        <span class="token comment">//do nothing</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è¿™æ˜¯åœ¨è¿è¡ŒçŠ¶æ€ä¸‹è¦å®ç°çš„æ–¹æ³•</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç”µæ¢¯æ­£åœ¨è¿è¡Œ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è¿™ä¸ªäº‹ç»å¯¹æ˜¯åˆç†çš„ï¼Œå…‰è¿è¡Œä¸åœæ­¢è¿˜æœ‰è°æ•¢åšè¿™ä¸ªç”µæ¢¯ï¼Ÿï¼ä¼°è®¡åªæœ‰ä¸Šå¸äº†</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//åœæ­¢çŠ¶æ€</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StoppingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token comment">//åœæ­¢çŠ¶æ€ï¼Œå¼€é—¨ï¼Œé‚£æ˜¯è¦çš„ï¼</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//çŠ¶æ€ä¿®æ”¹</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åŠ¨ä½œå§”æ‰˜ä¸ºCloseStateæ¥æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å§”æ‰˜ç»™äº†ClosingStateå­ç±»æ‰§è¡Œè¿™ä¸ªåŠ¨ä½œ</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//è™½ç„¶å¯ä»¥å…³é—¨ï¼Œä½†è¿™ä¸ªåŠ¨ä½œä¸å½’æˆ‘æ‰§è¡Œ</span>
        <span class="token comment">//çŠ¶æ€ä¿®æ”¹</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>closeingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åŠ¨ä½œå§”æ‰˜ä¸ºCloseStateæ¥æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å§”æ‰˜ç»™äº†ClosingStateå­ç±»æ‰§è¡Œè¿™ä¸ªåŠ¨ä½œ</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//åœæ­¢çŠ¶æ€å†è·‘èµ·æ¥ï¼Œæ­£å¸¸çš„å¾ˆ</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//çŠ¶æ€ä¿®æ”¹</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åŠ¨ä½œå§”æ‰˜ä¸ºCloseStateæ¥æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯å§”æ‰˜ç»™äº†ClosingStateå­ç±»æ‰§è¡Œè¿™ä¸ªåŠ¨ä½œ</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//åœæ­¢çŠ¶æ€æ˜¯æ€ä¹ˆå‘ç”Ÿçš„å‘¢ï¼Ÿå½“ç„¶æ˜¯åœæ­¢æ–¹æ³•æ‰§è¡Œäº†</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç”µæ¢¯åœæ­¢äº†...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//å…³é—­çŠ¶æ€</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClosingState</span> <span class="token keyword">extends</span> <span class="token class-name">LiftState</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token comment">//ç”µæ¢¯é—¨å…³é—­ï¼Œè¿™æ˜¯å…³é—­çŠ¶æ€è¦å®ç°çš„åŠ¨ä½œ</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç”µæ¢¯é—¨å…³é—­...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ç”µæ¢¯é—¨å…³äº†å†æ‰“å¼€ï¼Œé€—ä½ ç©å‘¢ï¼Œé‚£è¿™ä¸ªå…è®¸å‘€</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>openningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">//ç”µæ¢¯é—¨å…³äº†å°±è·‘ï¼Œè¿™æ˜¯å†æ­£å¸¸ä¸è¿‡äº†</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>runningState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ç”µæ¢¯é—¨å…³ç€ï¼Œæˆ‘å°±ä¸æŒ‰æ¥¼å±‚</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">Context</span><span class="token punctuation">.</span>stoppingState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç¯å¢ƒè§’è‰²</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token comment">//å®šä¹‰å‡ºæ‰€æœ‰çš„ç”µæ¢¯çŠ¶æ€</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">OpenningState</span> openningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">OpenningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å¼€é—¨çŠ¶æ€ï¼Œè¿™æ—¶å€™ç”µæ¢¯åªèƒ½å…³é—­</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">ClosingState</span> closeingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å…³é—­çŠ¶æ€ï¼Œè¿™æ—¶å€™ç”µæ¢¯å¯ä»¥è¿è¡Œã€åœæ­¢å’Œå¼€é—¨</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">RunningState</span> runningState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RunningState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è¿è¡ŒçŠ¶æ€ï¼Œè¿™æ—¶å€™ç”µæ¢¯åªèƒ½åœæ­¢</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">static</span> <span class="token class-name">StoppingState</span> stoppingState <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StoppingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//åœæ­¢çŠ¶æ€ï¼Œè¿™æ—¶å€™ç”µæ¢¯å¯ä»¥å¼€é—¨ã€è¿è¡Œ</span>


    <span class="token comment">//å®šä¹‰ä¸€ä¸ªå½“å‰ç”µæ¢¯çŠ¶æ€</span>
    <span class="token keyword">private</span> <span class="token class-name">LiftState</span> liftState<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">LiftState</span> <span class="token function">getLiftState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token class-name">LiftState</span> liftState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//å½“å‰ç¯å¢ƒæ”¹å˜</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState <span class="token operator">=</span> liftState<span class="token punctuation">;</span>
        <span class="token comment">//æŠŠå½“å‰çš„ç¯å¢ƒé€šçŸ¥åˆ°å„ä¸ªå®ç°ç±»ä¸­</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">setContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>liftState<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">setLiftState</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">ClosingState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        context<span class="token punctuation">.</span><span class="token keyword">open</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-5"><a href="#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-5" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>çŠ¶æ€å³ç›¸å…³è¡Œä¸ºæ”¾åˆ°ä¸€ä¸ªç±»</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>å¯¹è±¡å’Œç±»ä¸ªæ•°</li> <li>ç»“æ„å¤æ‚</li> <li>ä¸æ”¯æŒå¼€é—­åŸåˆ™</li></ul></li> <li>åœºæ™¯ï¼š
<ul><li>çŠ¶æ€å†³å®šè¡Œä¸º</li></ul></li></ul> <h2 id="è§‚å¯Ÿè€…"><a href="#è§‚å¯Ÿè€…" class="header-anchor">#</a> è§‚å¯Ÿè€…</h2> <blockquote><p>å‘å¸ƒ-è®¢é˜…æ¨¡å¼ï¼Œ<code>ä¸€å¯¹å¤š</code></p></blockquote> <h3 id="ç»“æ„-18"><a href="#ç»“æ„-18" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡è¢«è§‚å¯Ÿè€…ï¼šæ¥å£ï¼Œå…³æ³¨ã€å–æ¶ˆå…³æ³¨å’Œæ›´æ–°é€šçŸ¥æ–¹æ³•</li> <li>å…·ä½“è¢«è§‚å¯Ÿè€…ï¼šå…·ä½“å®ç°ï¼Œæœ‰è§‚å¯Ÿè€…å¼•ç”¨é›†åˆ</li> <li>æŠ½è±¡è§‚å¯Ÿè€…ï¼šæ›´æ–°æ¥å£ï¼Œæ›´æ–°æ—¶é€šçŸ¥è‡ªå·±</li> <li>å…·ä½“è§‚å¯Ÿè€…ï¼šå®ç°</li></ul> <h3 id="æ¡ˆä¾‹-11"><a href="#æ¡ˆä¾‹-11" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220314164918.png" alt="image-20220314164917152"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡è§‚å¯Ÿè€…</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//å…·ä½“è§‚å¯Ÿè€…</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeixinUser</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>
    <span class="token comment">// å¾®ä¿¡ç”¨æˆ·å</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name <span class="token operator">+</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//æŠ½è±¡è¢«è§‚å¯Ÿè€…</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//å¢åŠ è®¢é˜…è€…</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//åˆ é™¤è®¢é˜…è€…</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token comment">//é€šçŸ¥è®¢é˜…è€…æ›´æ–°æ¶ˆæ¯</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//å…·ä½“è¢«è§‚å¯Ÿè€…</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SubscriptionSubject</span> <span class="token keyword">implements</span> <span class="token class-name">Subject</span> <span class="token punctuation">{</span>
    <span class="token comment">//å‚¨å­˜è®¢é˜…å…¬ä¼—å·çš„å¾®ä¿¡ç”¨æˆ·</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span> weixinUserlist <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Observer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">attach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detach</span><span class="token punctuation">(</span><span class="token class-name">Observer</span> observer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        weixinUserlist<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>observer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">notify</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Observer</span> observer <span class="token operator">:</span> weixinUserlist<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            observer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SubscriptionSubject</span> mSubscriptionSubject<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SubscriptionSubject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ›å»ºå¾®ä¿¡ç”¨æˆ·</span>
        <span class="token class-name">WeixinUser</span> user1<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">&quot;å­™æ‚Ÿç©º&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user2<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">&quot;çŒªæ‚Ÿèƒ½&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">WeixinUser</span> user3<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">WeixinUser</span><span class="token punctuation">(</span><span class="token string">&quot;æ²™æ‚Ÿå‡€&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®¢é˜…å…¬ä¼—å·</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user2<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">attach</span><span class="token punctuation">(</span>user3<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å…¬ä¼—å·æ›´æ–°å‘å‡ºæ¶ˆæ¯ç»™è®¢é˜…çš„å¾®ä¿¡ç”¨æˆ·</span>
        mSubscriptionSubject<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">&quot;luçš„ä¸“æ æ›´æ–°äº†&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-6"><a href="#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-6" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>è§£è€¦åˆï¼šè¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…</li> <li>è¢«è§‚å¯Ÿè€…å‘é€šçŸ¥ï¼Œå¹¿æ’­å¼çš„ä¼ æ’­</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>è§‚å¯Ÿè€…è¿‡å¤šï¼Œæ¥æ”¶é€šçŸ¥è€—æ—¶</li></ul></li> <li>åœºæ™¯ï¼š
<ul><li>ä¸€å¯¹å¤š</li></ul></li></ul> <h3 id="æºç -7"><a href="#æºç -7" class="header-anchor">#</a> æºç </h3> <blockquote><p><code>Observer</code>ä½¿ç”¨äº†è§‚å¯Ÿè€…æ¨¡å¼ã€‚åªè¦å®ç°å®ƒå°±å¯ä»¥ç¼–å†™è§‚å¯Ÿè€…æ¨¡å¼</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//å…·ä½“è¢«è§‚å¯Ÿè€…ï¼ŒObservableï¼šæŠ½è±¡è¢«è§‚å¯Ÿè€…</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Thief</span> <span class="token keyword">extends</span> <span class="token class-name">Observable</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å°å·ï¼šæˆ‘å·ä¸œè¥¿äº†ï¼Œæœ‰æ²¡æœ‰äººæ¥æŠ“æˆ‘ï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">setChanged</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//changed  = true</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">notifyObservers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//å…·ä½“è§‚å¯Ÿè€…ï¼ŒObserverï¼šæŠ½è±¡è§‚å¯Ÿè€…</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Policemen</span> <span class="token keyword">implements</span> <span class="token class-name">Observer</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">Observable</span> o<span class="token punctuation">,</span> <span class="token class-name">Object</span> arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è­¦å¯Ÿï¼š&quot;</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Thief</span><span class="token punctuation">)</span> o<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;ï¼Œæˆ‘å·²ç»ç›¯ä½ å¾ˆä¹…äº†ï¼Œä½ å¯ä»¥ä¿æŒæ²‰é»˜ï¼Œä½†ä½ æ‰€è¯´çš„å°†æˆä¸ºå‘ˆå ‚è¯ä¾›ï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//åˆ›å»ºå°å·å¯¹è±¡</span>
        <span class="token class-name">Thief</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thief</span><span class="token punctuation">(</span><span class="token string">&quot;éš”å£è€ç‹&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//åˆ›å»ºè­¦å¯Ÿå¯¹è±¡</span>
        <span class="token class-name">Policemen</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Policemen</span><span class="token punctuation">(</span><span class="token string">&quot;å°æ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//è®©è­¦å¯Ÿç›¯ç€å°å·</span>
        t<span class="token punctuation">.</span><span class="token function">addObserver</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å°å·å·ä¸œè¥¿</span>
        t<span class="token punctuation">.</span><span class="token function">steal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ä¸­ä»‹è€…"><a href="#ä¸­ä»‹è€…" class="header-anchor">#</a> ä¸­ä»‹è€…</h2> <blockquote><p>ç±»çš„å˜åŒ–åªå½±å“æœ¬èº«å’Œä¸­ä»‹è€…</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220314180020.png" alt="image-20220314180019897"></p> <h3 id="ç»“æ„-19"><a href="#ç»“æ„-19" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡ä¸­ä»‹è€…ï¼šæ¥å£ï¼Œæœ‰äº¤äº’æ–¹æ³•</li> <li>å…·ä½“ä¸­ä»‹è€…ï¼šå®ç°æ¥å£ï¼Œæœ‰ç§Ÿæˆ·å’Œæˆ¿ä¸»å¼•ç”¨</li> <li>æŠ½è±¡ï¼ˆç§Ÿæˆ·å’Œæˆ¿ä¸»ï¼‰çš„æ¥å£æˆ–æŠ½è±¡ç±»ï¼šæœ‰ä¸­ä»‹è€…å¼•ç”¨ï¼Œæä¾›å’Œä¸­ä»‹äº¤äº’æ–¹æ³•</li> <li>å…·ä½“ï¼šå®ç°æŠ½è±¡ï¼Œæœ‰å…·ä½“äº¤äº’æ–¹æ³•</li></ul> <h3 id="æ¡ˆä¾‹-12"><a href="#æ¡ˆä¾‹-12" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220314180030.png" alt="image-20220314180029078"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡ä¸­ä»‹è€…</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//ç”³æ˜ä¸€ä¸ªè”ç»œæ–¹æ³•</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//æŠ½è±¡åŒäº‹ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span><span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>mediator <span class="token operator">=</span> mediator<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//å…·ä½“åŒäº‹ç±» æˆ¿å±‹æ‹¥æœ‰è€…</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HouseOwner</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ä¸ä¸­ä»‹è€…è”ç³»</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è·å–ä¿¡æ¯</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;æˆ¿ä¸»&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">&quot;è·å–åˆ°çš„ä¿¡æ¯ï¼š&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//å…·ä½“åŒäº‹ç±» æ‰¿ç§Ÿäºº</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tenant</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Mediator</span> mediator<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ä¸ä¸­ä»‹è€…è”ç³»</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        mediator<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span>message<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//è·å–ä¿¡æ¯</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ç§Ÿæˆ¿è€…&quot;</span> <span class="token operator">+</span> name <span class="token operator">+</span><span class="token string">&quot;è·å–åˆ°çš„ä¿¡æ¯ï¼š&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ä¸­ä»‹æœºæ„</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MediatorStructure</span> <span class="token keyword">extends</span> <span class="token class-name">Mediator</span> <span class="token punctuation">{</span>
    <span class="token comment">//é¦–å…ˆä¸­ä»‹ç»“æ„å¿…é¡»çŸ¥é“æ‰€æœ‰æˆ¿ä¸»å’Œç§Ÿæˆ¿è€…çš„ä¿¡æ¯</span>
    <span class="token keyword">private</span> <span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Tenant</span> tenant<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">HouseOwner</span> <span class="token function">getHouseOwner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setHouseOwner</span><span class="token punctuation">(</span><span class="token class-name">HouseOwner</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>houseOwner <span class="token operator">=</span> houseOwner<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Tenant</span> <span class="token function">getTenant</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setTenant</span><span class="token punctuation">(</span><span class="token class-name">Tenant</span> tenant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>tenant <span class="token operator">=</span> tenant<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">constact</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">,</span> <span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>person <span class="token operator">==</span> houseOwner<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment">//å¦‚æœæ˜¯æˆ¿ä¸»ï¼Œåˆ™ç§Ÿæˆ¿è€…è·å¾—ä¿¡æ¯</span>
            tenant<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>       <span class="token comment">//åæ­£åˆ™æ˜¯æˆ¿ä¸»è·å¾—ä¿¡æ¯</span>
            houseOwner<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//ä¸€ä¸ªæˆ¿ä¸»ã€ä¸€ä¸ªç§Ÿæˆ¿è€…ã€ä¸€ä¸ªä¸­ä»‹æœºæ„</span>
        <span class="token class-name">MediatorStructure</span> mediator <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MediatorStructure</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//æˆ¿ä¸»å’Œç§Ÿæˆ¿è€…åªéœ€è¦çŸ¥é“ä¸­ä»‹æœºæ„å³å¯</span>
        <span class="token class-name">HouseOwner</span> houseOwner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HouseOwner</span><span class="token punctuation">(</span><span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Tenant</span> tenant <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Tenant</span><span class="token punctuation">(</span><span class="token string">&quot;æå››&quot;</span><span class="token punctuation">,</span> mediator<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//ä¸­ä»‹ç»“æ„è¦çŸ¥é“æˆ¿ä¸»å’Œç§Ÿæˆ¿è€…</span>
        mediator<span class="token punctuation">.</span><span class="token function">setHouseOwner</span><span class="token punctuation">(</span>houseOwner<span class="token punctuation">)</span><span class="token punctuation">;</span>
        mediator<span class="token punctuation">.</span><span class="token function">setTenant</span><span class="token punctuation">(</span>tenant<span class="token punctuation">)</span><span class="token punctuation">;</span>

        tenant<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">&quot;éœ€è¦ç§Ÿä¸‰å®¤çš„æˆ¿å­&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        houseOwner<span class="token punctuation">.</span><span class="token function">constact</span><span class="token punctuation">(</span><span class="token string">&quot;æˆ‘è¿™æœ‰ä¸‰å®¤çš„æˆ¿å­ï¼Œä½ éœ€è¦ç§Ÿå—ï¼Ÿ&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-7"><a href="#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-7" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>è§£è€¦åˆï¼šç§Ÿæˆ·å’Œæˆ¿ä¸»</li> <li>é›†ä¸­æ§åˆ¶äº¤äº’ï¼šäº¤äº’æ”¹å˜åªéœ€æ”¹ä¸­ä»‹è€…</li> <li>ä¸€å¯¹å¤š---&gt;ä¸€å¯¹ä¸€ï¼šç§Ÿæˆ¿éœ€è¦æ‰¾å¾ˆå¤šæˆ¿ä¸»ï¼Œè€Œä¸­ä»‹è€…å»å¹²è¿™æ´»</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>å¤æ‚ï¼Œéš¾ä»¥ç»´æŠ¤</li></ul></li> <li>åœºæ™¯ï¼š
<ul><li>==ä¸€å¯¹å¤š---&gt;ä¸€å¯¹ä¸€==</li></ul></li></ul> <h2 id="è¿­ä»£å™¨"><a href="#è¿­ä»£å™¨" class="header-anchor">#</a> è¿­ä»£å™¨</h2> <blockquote><p>ä¸€ä¸ªå¯¹è±¡è®¿é—®ä¸€å †æ•°æ®</p></blockquote> <h3 id="ç»“æ„-20"><a href="#ç»“æ„-20" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡èšåˆï¼šå­˜å‚¨ã€æ·»åŠ ã€åˆ é™¤å…ƒç´ ï¼Œè·å–è¿­ä»£å™¨å¯¹è±¡</li> <li>å…·ä½“èšåˆï¼šå®ç°</li> <li>æŠ½è±¡è¿­ä»£å™¨ï¼šhashNext()ã€next()ç­‰æ–¹æ³•</li> <li>å…·ä½“è¿­ä»£å™¨ï¼šå®ç°æ¥å£ã€è®°å½•å½“å‰éå†ä½ç½®</li></ul> <h3 id="æ¡ˆä¾‹-13"><a href="#æ¡ˆä¾‹-13" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220314194851.png" alt="image-20220314194850359"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡è¿­ä»£å™¨</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//å…·ä½“è¿­ä»£å™¨</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentIteratorImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentIterator</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> position <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> position <span class="token operator">&lt;</span> list<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Student</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Student</span> currentStudent <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>
        position <span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> currentStudent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//æŠ½è±¡èšåˆ</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//å…·ä½“èšåˆ</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentAggregateImpl</span> <span class="token keyword">implements</span> <span class="token class-name">StudentAggregate</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Student</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// å­¦ç”Ÿåˆ—è¡¨</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeStudent</span><span class="token punctuation">(</span><span class="token class-name">Student</span> student<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">StudentIterator</span> <span class="token function">getStudentIterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StudentIteratorImpl</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-8"><a href="#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-8" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>è‡ªå®šä¹‰è¿­ä»£å™¨</li> <li>å¼€é—­åŸåˆ™</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>ç±»çš„ä¸ªæ•°</li></ul></li> <li>åœºæ™¯ï¼š
<ul><li>å¤šç§éå†æ–¹å¼</li> <li>è®¿é—®èšåˆå¯¹è±¡æ— é¡»æš´éœ²å†…éƒ¨ç»†èŠ‚</li></ul></li></ul> <h3 id="æºç -8"><a href="#æºç -8" class="header-anchor">#</a> æºç </h3> <blockquote><p>Javaçš„è¿­ä»£å™¨<code>Iterator</code></p> <p>å®ç°Iteratoræ¥å£</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220314200006.png" alt="image-20220314200005691"></p> <h2 id="è®¿é—®è€…"><a href="#è®¿é—®è€…" class="header-anchor">#</a> è®¿é—®è€…</h2> <blockquote><p>ä¸æ”¹å˜æ•°æ®ç»“æ„ï¼Œå¯¹å…ƒç´ çš„æ–°æ“ä½œ</p></blockquote> <h3 id="ç»“æ„-21"><a href="#ç»“æ„-21" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡è®¿é—®è€…ï¼šå®šä¹‰è®¿é—®è¡Œä¸º</li> <li>å…·ä½“è®¿é—®è€…ï¼šå®ç°æ¥å£</li> <li>æŠ½è±¡å…ƒç´ ï¼šå¯ä»¥è¢«è®¿é—®è€…è®¿é—®çš„æ–¹æ³•</li> <li>å…·ä½“å…ƒç´ ï¼šå®ç°</li> <li>å¯¹è±¡ç»“æ„ï¼šå®¹å™¨ï¼Œè¿­ä»£å…ƒç´ ï¼Œä¾›è®¿é—®è€…è®¿é—®</li></ul> <h3 id="æ¡ˆä¾‹-14"><a href="#æ¡ˆä¾‹-14" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220314200533.png" alt="image-20220314200532994"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡è®¿é—®è€…</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//å…·ä½“è®¿é—®è€…</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Owner</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸»äººå–‚é£ŸçŒ«&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸»äººå–‚é£Ÿç‹—&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Someone</span> <span class="token keyword">implements</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> cat<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å…¶ä»–äººå–‚é£ŸçŒ«&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">feed</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> dog<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å…¶ä»–äººå–‚é£Ÿç‹—&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//æŠ½è±¡å…ƒç´ </span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//å…·ä½“å…ƒç´ </span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å¥½å¥½åƒï¼Œæ±ªæ±ªæ±ªï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">implements</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        person<span class="token punctuation">.</span><span class="token function">feed</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;å¥½å¥½åƒï¼Œå–µå–µå–µï¼ï¼ï¼&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//å¯¹è±¡ç»“æ„</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Home</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">&gt;</span></span> nodeList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Animal</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token class-name">Person</span> person<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Animal</span> node <span class="token operator">:</span> nodeList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            node<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>	
    <span class="token punctuation">}</span>

    <span class="token comment">//æ·»åŠ æ“ä½œ</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        nodeList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>animal<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Home</span> home <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Home</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Owner</span> owner <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Owner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>owner<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Someone</span> someone <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Someone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        home<span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span>someone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-9"><a href="#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-9" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>æ‰©å±•æ€§å¥½ï¼šä¸æ”¹å˜ç»“æ„</li> <li>å¤ç”¨æ€§å¥½ï¼šè®¿é—®è€…å®šä¹‰æ•´ä¸ªå¯¹è±¡ç»“æ„é€šç”¨åŠŸèƒ½</li> <li>åˆ†ç¦»</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>è¿èƒŒä¾èµ–å€’ç½®ï¼šè®¿é—®è€…ä¾èµ–å…·ä½“ç±»</li></ul></li> <li>åœºæ™¯ï¼š
<ul><li>ä¸æ”¹å˜æ•°æ®ç»“æ„ï¼Œå¯¹å…ƒç´ çš„æ–°æ“ä½œ</li></ul></li></ul> <h3 id="æºç -9"><a href="#æºç -9" class="header-anchor">#</a> æºç </h3> <blockquote><p>è®¿é—®è€…æ¨¡å¼ä½¿ç”¨åŒåˆ†æ´¾æŠ€æœ¯</p> <p>åˆ†æ´¾ï¼š</p> <ul><li>é™æ€åˆ†æ´¾ï¼šæ–¹æ³•é‡è½½ï¼Œç¼–è¯‘</li> <li>åŠ¨æ€åˆ†æ´¾ï¼šé‡å†™ï¼Œè¿è¡Œ</li> <li>åŒåˆ†æ´¾ï¼š</li></ul></blockquote> <p>åŠ¨æ€åˆ†æ´¾ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Animal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
     <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
   	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a1<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>é™æ€åˆ†æ´¾ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Animal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>a2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220315193354.png" alt="image-20220315193353670"></p> <p>åŒåˆ†æ´¾ï¼šè¿è¡Œæ—¶å’Œå‚æ•°</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cat</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">accept</span><span class="token punctuation">(</span><span class="token class-name">Execute</span> exe<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        exe<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Execute</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Animal</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;animal&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Dog</span> d<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;dog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">execute</span><span class="token punctuation">(</span><span class="token class-name">Cat</span> c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;cat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Animal</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Animal</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Execute</span> exe <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Execute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        d<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        c<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>exe<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="å¤‡å¿˜å½•"><a href="#å¤‡å¿˜å½•" class="header-anchor">#</a> å¤‡å¿˜å½•</h2> <blockquote><p>æ¸¸æˆå¤‡ä»½ã€æ’¤é”€å’Œæ‚”æ£‹ç­‰ï¼Œæ•è·å¯¹è±¡çŠ¶æ€</p></blockquote> <h3 id="ç»“æ„-22"><a href="#ç»“æ„-22" class="header-anchor">#</a> ç»“æ„</h3> <blockquote><p>å¤‡å¿˜å½•ï¼š</p> <ul><li>çª„æ¥å£ï¼ˆé»‘ç®±ï¼‰ï¼šåªå…è®¸å‘èµ·äººï¼ˆç”¨æˆ·ï¼‰çœ‹åˆ°å¤‡å¿˜å½•æ•°æ®</li> <li>å®½æ¥å£ï¼ˆç™½ç®±ï¼‰ï¼šå¤‡å¿˜å½•æ•°æ®æ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥è®¿é—®</li></ul></blockquote> <ul><li>å‘èµ·äººï¼šæœ‰å¤‡å¿˜å½•å’Œæ¢å¤æ•°æ®åŠŸèƒ½</li> <li>å¤‡å¿˜å½•ï¼šå­˜å‚¨å‘èµ·äººå¤‡ä»½çš„æ•°æ®çŠ¶æ€</li> <li>ç®¡ç†è€…ï¼šå¯¹å¤‡å¿˜å½•è¿‡æ¥ï¼Œæœ‰è·å–å’Œä¿å­˜å¤‡å¿˜å½•åŠŸèƒ½</li></ul> <h3 id="æ¡ˆä¾‹-15"><a href="#æ¡ˆä¾‹-15" class="header-anchor">#</a> æ¡ˆä¾‹</h3> <h4 id="ç™½ç®±å¤‡å¿˜å½•"><a href="#ç™½ç®±å¤‡å¿˜å½•" class="header-anchor">#</a> ç™½ç®±å¤‡å¿˜å½•</h4> <blockquote><p>å¤‡å¿˜å½•æ•°æ®æ‰€æœ‰å¯¹è±¡éƒ½å¯ä»¥è®¿é—®</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220315193919.png" alt="image-20220315193917779"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æ¸¸æˆè§’è‰²ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//ç”Ÿå‘½åŠ›</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//æ”»å‡»åŠ›</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//é˜²å¾¡åŠ›</span>

    <span class="token comment">//åˆå§‹åŒ–çŠ¶æ€</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æˆ˜æ–—</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ä¿å­˜è§’è‰²çŠ¶æ€</span>
    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//å›å¤è§’è‰²çŠ¶æ€</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è§’è‰²ç”Ÿå‘½åŠ›ï¼š&quot;</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è§’è‰²æ”»å‡»åŠ›ï¼š&quot;</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è§’è‰²é˜²å¾¡åŠ›ï¼š&quot;</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æ¸¸æˆçŠ¶æ€å­˜å‚¨ç±»(å¤‡å¿˜å½•ç±»)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//è§’è‰²çŠ¶æ€ç®¡ç†è€…ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span> <span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span> roleStateMemento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>roleStateMemento <span class="token operator">=</span> roleStateMemento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------å¤§æˆ˜Bosså‰------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å¤§æˆ˜Bosså‰</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//ä¿å­˜è¿›åº¦</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setRoleStateMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------å¤§æˆ˜Bosså------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å¤§æˆ˜Bossæ—¶ï¼ŒæŸè€—ä¸¥é‡</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------æ¢å¤ä¹‹å‰çŠ¶æ€------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ¢å¤ä¹‹å‰çŠ¶æ€</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getRoleStateMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="é»‘ç®±å¤‡å¿˜å½•"><a href="#é»‘ç®±å¤‡å¿˜å½•" class="header-anchor">#</a> é»‘ç®±å¤‡å¿˜å½•</h4> <blockquote><p>åªå…è®¸å‘èµ·äººï¼ˆç”¨æˆ·ï¼‰çœ‹åˆ°å¤‡å¿˜å½•æ•°æ®</p> <p>æŠŠå¤‡å¿˜å½•å®ç°ç±»ï¼ˆRoleStateMementoï¼‰æ”¾åˆ°å‘èµ·äººå½“<code>å†…éƒ¨ç±»</code>ï¼Œå¯¹å¤–æä¾›æ¥å£ï¼ˆMementoï¼‰</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220315194529.png" alt="image-20220315194528311"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//çª„æ¥å£</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token comment">//æ¸¸æˆè§’è‰²ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GameRole</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span> <span class="token comment">//ç”Ÿå‘½åŠ›</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span> <span class="token comment">//æ”»å‡»åŠ›</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span> <span class="token comment">//é˜²å¾¡åŠ›</span>

    <span class="token comment">//åˆå§‹åŒ–çŠ¶æ€</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æˆ˜æ–—</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//ä¿å­˜è§’è‰²çŠ¶æ€</span>
    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span>vit<span class="token punctuation">,</span> atk<span class="token punctuation">,</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//å›å¤è§’è‰²çŠ¶æ€</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">recoverState</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RoleStateMemento</span> roleStateMemento <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">RoleStateMemento</span><span class="token punctuation">)</span> memento<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> roleStateMemento<span class="token punctuation">.</span><span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è§’è‰²ç”Ÿå‘½åŠ›ï¼š&quot;</span> <span class="token operator">+</span> vit<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è§’è‰²æ”»å‡»åŠ›ï¼š&quot;</span> <span class="token operator">+</span> atk<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;è§’è‰²é˜²å¾¡åŠ›ï¼š&quot;</span> <span class="token operator">+</span> def<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token comment">//å¤‡å¿˜å½•ç±»ï¼šçª„æ¥å£å®ç°ç±»</span>
    <span class="token keyword">private</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateMemento</span> <span class="token keyword">implements</span> <span class="token class-name">Memento</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> vit<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> atk<span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">int</span> def<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token class-name">RoleStateMemento</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">,</span> <span class="token keyword">int</span> atk<span class="token punctuation">,</span> <span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getVit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setVit</span><span class="token punctuation">(</span><span class="token keyword">int</span> vit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>vit <span class="token operator">=</span> vit<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getAtk</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setAtk</span><span class="token punctuation">(</span><span class="token keyword">int</span> atk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>atk <span class="token operator">=</span> atk<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getDef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDef</span><span class="token punctuation">(</span><span class="token keyword">int</span> def<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>def <span class="token operator">=</span> def<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">//è§’è‰²çŠ¶æ€ç®¡ç†è€…ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RoleStateCaretaker</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Memento</span> memento<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Memento</span> <span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setMemento</span><span class="token punctuation">(</span><span class="token class-name">Memento</span> memento<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>memento <span class="token operator">=</span> memento<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------å¤§æˆ˜Bosså‰------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å¤§æˆ˜Bosså‰</span>
        <span class="token class-name">GameRole</span> gameRole <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GameRole</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">initState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//ä¿å­˜è¿›åº¦</span>
        <span class="token class-name">RoleStateCaretaker</span> roleStateCaretaker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RoleStateCaretaker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        roleStateCaretaker<span class="token punctuation">.</span><span class="token function">setMemento</span><span class="token punctuation">(</span>gameRole<span class="token punctuation">.</span><span class="token function">saveState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------å¤§æˆ˜Bosså------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//å¤§æˆ˜Bossæ—¶ï¼ŒæŸè€—ä¸¥é‡</span>
        gameRole<span class="token punctuation">.</span><span class="token function">fight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;------------æ¢å¤ä¹‹å‰çŠ¶æ€------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//æ¢å¤ä¹‹å‰çŠ¶æ€</span>
        gameRole<span class="token punctuation">.</span><span class="token function">recoverState</span><span class="token punctuation">(</span>roleStateCaretaker<span class="token punctuation">.</span><span class="token function">getMemento</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gameRole<span class="token punctuation">.</span><span class="token function">stateDisplay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-10"><a href="#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-10" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>æ¢å¤</li> <li>å•ä¸€èŒè´£åŸåˆ™ï¼Œå‘èµ·äººæ— éœ€ç®¡ç†å¤‡å¿˜å½•æ•°æ®</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>å†…å­˜</li></ul></li> <li>åœºæ™¯ï¼š
<ul><li>æ¸¸æˆå­˜æ¡£</li> <li>Ctrl+Zæ’¤é”€ï¼Œæ•°æ®åº“å›æ»šç­‰</li></ul></li></ul> <h2 id="è§£é‡Šå™¨"><a href="#è§£é‡Šå™¨" class="header-anchor">#</a> è§£é‡Šå™¨</h2> <blockquote><p>è‡ªå®šä¹‰è¯­è¨€ï¼Œè‡ªå®šä¹‰è§£é‡Šå™¨</p></blockquote> <p>è¯­æ³•è§„åˆ™ï¼š</p> <blockquote><p>::=ï¼šå®šä¹‰ä¸º</p> <p>|ï¼šæˆ–</p></blockquote> <div class="language-basic extra-class"><pre class="language-basic"><code>expression <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> value | plus | minus
plus <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> expression â€˜<span class="token operator">+</span>â€™ expression   
minus <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> expression â€˜<span class="token operator">-</span>â€™ expression  
value <span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">=</span> <span class="token keyword">integer</span>
</code></pre></div><h3 id="ç»“æ„-23"><a href="#ç»“æ„-23" class="header-anchor">#</a> ç»“æ„</h3> <ul><li>æŠ½è±¡è¡¨è¾¾å¼ï¼šè§£é‡Šæ–¹æ³•interpret()</li> <li>ç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼šå­ç±»ï¼Œå€¼æˆ–å˜é‡</li> <li>éç»ˆç»“ç¬¦è¡¨è¾¾å¼ï¼šå­ç±»ï¼Œè¿ç®—ç¬¦</li> <li>ç¯å¢ƒè§’è‰²ï¼šæ•°æ®æˆ–å…¬å…±çš„åŠŸèƒ½</li> <li>å®¢æˆ·ç«¯ï¼šåˆ†æå¥å­ï¼Œè°ƒç”¨è§£é‡Šå™¨çš„è§£é‡Šæ–¹æ³•</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220315195749.png" alt="image-20220315195748416"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//æŠ½è±¡è§’è‰²AbstractExpression</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç»ˆç»“ç¬¦è¡¨è¾¾å¼è§’è‰²</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Value</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">int</span> value<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Value</span><span class="token punctuation">(</span><span class="token keyword">int</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//éç»ˆç»“ç¬¦è¡¨è¾¾å¼è§’è‰²  åŠ æ³•è¡¨è¾¾å¼</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Plus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; + &quot;</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">///éç»ˆç»“ç¬¦è¡¨è¾¾å¼è§’è‰² å‡æ³•è¡¨è¾¾å¼</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Minus</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> left<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token class-name">AbstractExpression</span> left<span class="token punctuation">,</span> <span class="token class-name">AbstractExpression</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> left<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">-</span> right<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;(&quot;</span> <span class="token operator">+</span> left<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; - &quot;</span> <span class="token operator">+</span> right<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç»ˆç»“ç¬¦è¡¨è¾¾å¼è§’è‰² å˜é‡è¡¨è¾¾å¼</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Variable</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractExpression</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">interpret</span><span class="token punctuation">(</span><span class="token class-name">Context</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> ctx<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//ç¯å¢ƒç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Context</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Variable</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token class-name">Variable</span> <span class="token keyword">var</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Integer</span> value <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//æµ‹è¯•ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Client</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Variable</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">&quot;c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">&quot;d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Variable</span> e <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Variable</span><span class="token punctuation">(</span><span class="token string">&quot;e&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//Value v = new Value(1);</span>

        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>d<span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        context<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">AbstractExpression</span> expression <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Minus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Plus</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>expression <span class="token operator">+</span> <span class="token string">&quot;= &quot;</span> <span class="token operator">+</span> expression<span class="token punctuation">.</span><span class="token function">interpret</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-11"><a href="#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-11" class="header-anchor">#</a> ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</h3> <ul><li>ä¼˜ç‚¹ï¼š
<ul><li>æ˜“äºæ§åˆ¶è¯­æ³•è§„åˆ™ï¼ˆæ–‡æ³•ï¼‰</li> <li>å¼€é—­åŸåˆ™</li></ul></li> <li>ç¼ºç‚¹ï¼š
<ul><li>å¤æ‚æ–‡æ³•éš¾ä»¥ç»´æŠ¤</li></ul></li> <li>åœºæ™¯ï¼š
<ul><li>è¯­è¨€å¥å­å¯ä»¥æŠ½è±¡æˆè¯­æ³•æ ‘</li></ul></li></ul> <h1 id="è‡ªå®šä¹‰springæ¡†æ¶"><a href="#è‡ªå®šä¹‰springæ¡†æ¶" class="header-anchor">#</a> è‡ªå®šä¹‰springæ¡†æ¶</h1> <h2 id="å›é¡¾"><a href="#å›é¡¾" class="header-anchor">#</a> å›é¡¾</h2> <blockquote><p>å¯¹è±¡äº¤ç»™springç®¡ç†ï¼Œä»å®¹å™¨ä¸­è·å–</p> <p><code>IOC</code>ï¼ˆinversion of controlï¼‰æ§åˆ¶åè½¬å’Œ<code>DI</code>ï¼ˆdependency injectionï¼‰ä¾èµ–æ³¨å…¥</p></blockquote> <h2 id="æ ¸å¿ƒåŠŸèƒ½"><a href="#æ ¸å¿ƒåŠŸèƒ½" class="header-anchor">#</a> æ ¸å¿ƒåŠŸèƒ½</h2> <blockquote><p>æ ¸å¿ƒå®¹å™¨ã€AOPå’Œè®¾å¤‡æ”¯æŒã€æ•°æ®è®¿é—®ä¸é›†æˆã€webç»„ä»¶ã€é€šä¿¡æŠ¥æ–‡å’Œé›†æˆæµ‹è¯•ç­‰</p></blockquote> <p>æ ¸å¿ƒå®¹å™¨ï¼š</p> <ul><li>spring-<code>beans</code>å’Œspring-<code>core</code>ï¼šæ ¸å¿ƒæ¨¡å—ï¼Œæœ‰IOCå’ŒDIï¼ŒBeanFactory</li> <li>spring-<code>context</code>ï¼šæ‰©å±•BeanFactoryï¼Œéå»¶æ—¶åŠ è½½<code>ApplicationContext</code> <ul><li>spring-context-supportï¼ˆäº†è§£ï¼‰ï¼šIOCå®¹å™¨çš„æ‰©å±•</li> <li>spring-context-indexerï¼ˆäº†è§£ï¼‰ï¼šç±»ç®¡ç†ç»„ä»¶å’ŒClasspathæ‰«æç»„ä»¶</li></ul></li> <li>spring-expressionï¼ˆäº†è§£ï¼‰ï¼šè¡¨è¾¾å¼è¯­è¨€ï¼ˆELï¼‰æ‰©å±•</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220316173652.png" alt="image-20220316173651681"></p> <h2 id="bean"><a href="#bean" class="header-anchor">#</a> Bean</h2> <blockquote><p>é…ç½®æˆ–æ³¨è§£ç®¡ç†Beanå¯¹è±¡</p> <ul><li>åº•å±‚ï¼š
<ul><li>springå°†beanäº¤ç»™IOCå®¹å™¨ç®¡ç†</li> <li>beanå¯¹è±¡ä¹‹é—´å…³ç³»åœ¨é…ç½®ä¸­ä½“ç°</li></ul></li></ul></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220316173045.png" alt="image-20220316173043779"></p> <h2 id="springiocæ¥å£"><a href="#springiocæ¥å£" class="header-anchor">#</a> SpringIOCæ¥å£</h2> <h3 id="beanfactory"><a href="#beanfactory" class="header-anchor">#</a> BeanFactory</h3> <blockquote><p>å·¥å‚æ¨¡å¼</p> <ul><li>ListableBeanFactoryï¼šbeanå¯åˆ—è¡¨åŒ–ï¼ˆé›†åˆï¼‰</li> <li>HierarchicalBeanFactoryï¼šç»§æ‰¿å…³ç³»</li> <li>AutowireCapableBeanFactoryï¼šè‡ªåŠ¨è£…é…</li></ul></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220316180306.png" alt="image-20220316180305350"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>

	<span class="token class-name">String</span> FACTORY_BEAN_PREFIX <span class="token operator">=</span> <span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">;</span>

	<span class="token comment">//æ ¹æ®beançš„åç§°è·å–IOCå®¹å™¨ä¸­çš„çš„beanå¯¹è±¡</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token comment">//æ ¹æ®beançš„åç§°è·å–IOCå®¹å™¨ä¸­çš„çš„beanå¯¹è±¡ï¼Œå¹¶æŒ‡å®šè·å–åˆ°çš„beanå¯¹è±¡çš„ç±»å‹ï¼Œè¿™æ ·æˆ‘ä»¬ä½¿ç”¨æ—¶å°±ä¸éœ€è¦è¿›è¡Œç±»å‹å¼ºè½¬äº†</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>
	
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">ObjectProvider</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">getBeanProvider</span><span class="token punctuation">(</span><span class="token class-name">ResolvableType</span> requiredType<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">//åˆ¤æ–­å®¹å™¨ä¸­æ˜¯å¦åŒ…å«æŒ‡å®šåç§°çš„beanå¯¹è±¡</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//æ ¹æ®beançš„åç§°åˆ¤æ–­æ˜¯å¦æ˜¯å•ä¾‹</span>
	<span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isPrototype</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">ResolvableType</span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isTypeMatch</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> typeToMatch<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> <span class="token function">getType</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getAliases</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>ClasspathXmlApplicationContextï¼šç±»è·¯å¾„åŠ è½½xmlé…ç½®ï¼Œåˆ›å»ºIOCå®¹å™¨</li> <li>FileSystemXmlApplicationContextï¼šç³»ç»Ÿè·¯å¾„</li> <li>AnnotationConfigApplicationContextï¼šæ³¨è§£ç±»é…ç½®</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220316192412.png" alt="image-20220316192410040"></p> <h3 id="beandefiniton"><a href="#beandefiniton" class="header-anchor">#</a> BeanDefiniton</h3> <blockquote><p>beançš„æè¿°</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220316192840.png" alt="image-20220316192839812"></p> <p>ç±»çš„ä½“ç³»ç»“æ„ï¼š</p> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220316192752.png" alt="image-20220316192751442"></p> <h3 id="beandefinitionreader"><a href="#beandefinitionreader" class="header-anchor">#</a> BeanDefinitionReader</h3> <blockquote><p>è§£ææ•°æ®å˜æˆbean</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220316193430.png" alt="image-20220316193429752"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

	<span class="token comment">//è·å–BeanDefinitionRegistryæ³¨å†Œå™¨å¯¹è±¡</span>
	<span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ResourceLoader</span> <span class="token function">getResourceLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token annotation punctuation">@Nullable</span>
	<span class="token class-name">ClassLoader</span> <span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token class-name">BeanNameGenerator</span> <span class="token function">getBeanNameGenerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token comment">/*
		ä¸‹é¢çš„loadBeanDefinitionséƒ½æ˜¯åŠ è½½beanå®šä¹‰ï¼Œä»æŒ‡å®šçš„èµ„æºä¸­
	*/</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span> resource<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">Resource</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> resources<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> location<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> locations<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="beandefinitonregistry"><a href="#beandefinitonregistry" class="header-anchor">#</a> BeanDefinitonRegistry</h3> <blockquote><p>æ³¨å†Œè¡¨ï¼šå­˜å‚¨è§£æåçš„æ•°æ®ï¼Œå³å­˜å‚¨bean</p></blockquote> <p><img src="https://cdn.jsdelivr.net/gh/luomu888/cloudimg@master/img/20220316193753.png" alt="image-20220316193752133"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token keyword">extends</span> <span class="token class-name">AliasRegistry</span> <span class="token punctuation">{</span>

	<span class="token comment">//å¾€æ³¨å†Œè¡¨ä¸­æ³¨å†Œbean</span>
	<span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">BeanDefinitionStoreException</span><span class="token punctuation">;</span>

	<span class="token comment">//ä»æ³¨å†Œè¡¨ä¸­åˆ é™¤æŒ‡å®šåç§°çš„bean</span>
	<span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>

	<span class="token comment">//è·å–æ³¨å†Œè¡¨ä¸­æŒ‡å®šåç§°çš„bean</span>
	<span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
    
	<span class="token comment">//åˆ¤æ–­æ³¨å†Œè¡¨ä¸­æ˜¯å¦å·²ç»æ³¨å†Œäº†æŒ‡å®šåç§°çš„bean</span>
	<span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
	<span class="token comment">//è·å–æ³¨å†Œè¡¨ä¸­æ‰€æœ‰çš„beançš„åç§°</span>
	<span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    
	<span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">boolean</span> <span class="token function">isBeanNameInUse</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="å®¹å™¨"><a href="#å®¹å™¨" class="header-anchor">#</a> å®¹å™¨</h3> <blockquote><p><code>ClassPathXmlApplicationContext</code>ï¼ˆå­ç±»ï¼‰ï¼šè·å–bean</p> <ul><li><code>refresh</code>()ï¼š
<ul><li>æ¨¡æ¿æ–¹æ³•</li> <li>å¯åŠ¨æµç¨‹</li> <li>beanè½½å…¥</li> <li>å…·ä½“å®ç°åœ¨çˆ¶ç±»ï¼Œå­ç±»åªæ˜¯è°ƒç”¨</li></ul></li> <li>è°ƒç”¨çˆ¶ç±»<code>AbstractApplicationContext</code>çš„refresh()</li></ul></blockquote> <h2 id="è‡ªå®šä¹‰springioc"><a href="#è‡ªå®šä¹‰springioc" class="header-anchor">#</a> è‡ªå®šä¹‰SpringIOC</h2> <h3 id="pojo"><a href="#pojo" class="header-anchor">#</a> pojo</h3> <h4 id="propertyvalue"><a href="#propertyvalue" class="header-anchor">#</a> PropertyValue</h4> <blockquote><p>å°è£…beançš„å­æ ‡ç­¾property</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PropertyValue</span> <span class="token punctuation">{</span>

  <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> ref<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> value<span class="token punctuation">;</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> ref<span class="token punctuation">,</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setRef</span><span class="token punctuation">(</span><span class="token class-name">String</span> ref<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>ref <span class="token operator">=</span> ref<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="mutablepropertyvalues"><a href="#mutablepropertyvalues" class="header-anchor">#</a> MutablePropertyValues</h4> <blockquote><p>å¤šä¸ªproperty</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MultiPropertyValue</span> <span class="token keyword">implements</span> <span class="token class-name">Iterable</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">&gt;</span></span> propertyValueList<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">MultiPropertyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MultiPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">&gt;</span></span> propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValueList <span class="token operator">=</span> propertyValueList<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æ•°ç»„ï¼šè·å–æ‰€æœ‰PropertyValue</span>
    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValueList<span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æ ¹æ®å±æ€§åè·å–PropertyValue</span>
    <span class="token keyword">public</span> <span class="token class-name">PropertyValue</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">:</span> propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyValue<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> propertyValue<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">PropertyValue</span><span class="token punctuation">&gt;</span></span> <span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValueList<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>  propertyValueList<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//æ·»åŠ PropertyValue</span>
    <span class="token keyword">public</span> <span class="token class-name">MultiPropertyValue</span> <span class="token function">addPropertyValue</span><span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> pv<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">:</span> propertyValueList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//å­˜åœ¨ï¼Œè¦†ç›–åç»“æŸæ–¹æ³•</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyValue<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                propertyValue<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                propertyValue<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                propertyValue<span class="token punctuation">.</span><span class="token function">setRef</span><span class="token punctuation">(</span>pv<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//ä¸å­˜åœ¨</span>
        propertyValueList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>pv<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">contains</span><span class="token punctuation">(</span><span class="token class-name">String</span> propertyName<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">getPropertyValue</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><h4 id="beandefinition"><a href="#beandefinition" class="header-anchor">#</a> BeanDefinition</h4> <blockquote><p>å°è£…beanï¼Œidã€classï¼ˆç±»çš„å…¨é™å®šåç§°ï¼‰åŠ<code>property</code></p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeanDefinition</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token keyword">class</span>	<span class="token class-name">Name</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        propertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MutablePropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setId</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>id <span class="token operator">=</span> id<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setClassName</span><span class="token punctuation">(</span><span class="token class-name">String</span> className<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> className<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setPropertyValues</span><span class="token punctuation">(</span><span class="token class-name">MutablePropertyValues</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>propertyValues <span class="token operator">=</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">MutablePropertyValues</span> <span class="token function">getPropertyValues</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> propertyValues<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ³¨å†Œè¡¨"><a href="#æ³¨å†Œè¡¨" class="header-anchor">#</a> æ³¨å†Œè¡¨</h3> <h4 id="beandefinitionregistryæ¥å£"><a href="#beandefinitionregistryæ¥å£" class="header-anchor">#</a> BeanDefinitionRegistryæ¥å£</h4> <blockquote><p>æ¥å£ï¼Œæ³¨å†Œè¡¨çš„æ–¹æ³•</p></blockquote> <ul><li><code>æ·»åŠ </code>BeanDefinitionåˆ°æ³¨å†Œè¡¨</li> <li><code>åˆ é™¤</code>BeanDefinition</li> <li>æ ¹æ®åç§°<code>è·å–</code>BeanDefinition</li> <li>æ ¹æ®åç§°åˆ¤æ–­æ˜¯å¦<code>å­˜åœ¨</code>BeanDefinition</li> <li>BeanDefinition<code>ä¸ªæ•°</code></li> <li>æ‰€æœ‰<code>BeanDefinition</code>åç§°</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token comment">//æ³¨å†ŒBeanDefinitionå¯¹è±¡åˆ°æ³¨å†Œè¡¨ä¸­</span>
    <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//ä»æ³¨å†Œè¡¨ä¸­åˆ é™¤æŒ‡å®šåç§°çš„BeanDefinitionå¯¹è±¡</span>
    <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token comment">//æ ¹æ®åç§°ä»æ³¨å†Œè¡¨ä¸­è·å–BeanDefinitionå¯¹è±¡</span>
    <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

    <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="simplebeandefinitionregistry"><a href="#simplebeandefinitionregistry" class="header-anchor">#</a> SimpleBeanDefinitionRegistry</h4> <blockquote><p>å®ç°<code>BeanDefinitionRegistry</code>æ¥å£ï¼ŒMapé›†åˆä½œä¸ºå®¹å™¨</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">&gt;</span></span> beanDefinitionMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">,</span> <span class="token class-name">BeanDefinition</span> beanDefinition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>beanName<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        beanDefinitionMap<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinition</span> <span class="token function">getBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">containsBeanDefinition</span><span class="token punctuation">(</span><span class="token class-name">String</span> beanName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">containsKey</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getBeanDefinitionCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> beanDefinitionMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="è§£æå™¨"><a href="#è§£æå™¨" class="header-anchor">#</a> è§£æå™¨</h3> <h4 id="beandefinitonreaderæ¥å£"><a href="#beandefinitonreaderæ¥å£" class="header-anchor">#</a> BeanDefinitonReaderæ¥å£</h4> <blockquote><p>è§£æé…ç½®é‡Œçš„æ•°æ®æˆbeanï¼Œç„¶åæ·»åŠ åˆ°æ³¨å†Œè¡¨</p> <p>æ–¹æ³•ï¼š</p> <ul><li>è·å–æ³¨å†Œè¡¨</li> <li>åŠ è½½é…ç½®æ–‡ä»¶ï¼Œå¹¶ç”Ÿæˆbean</li></ul></blockquote> <h4 id="xmlbeandefinitionreader"><a href="#xmlbeandefinitionreader" class="header-anchor">#</a> XmlBeanDefinitionReader</h4> <blockquote><p>å®ç°æ¥å£ï¼Œè§£æxmlé…ç½®</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">XmlBeanDefinitionReader</span> <span class="token keyword">implements</span> <span class="token class-name">BeanDefinitionReader</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>registry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleBeanDefinitionRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">BeanDefinitionRegistry</span> <span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> registry<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token class-name">Configuration</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// SAXReaderï¼šxmlè§£æå™¨</span>
        <span class="token class-name">SAXReader</span> reader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">SAXReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Document</span> document <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>is<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Element</span> rootElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getRootElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// è§£æBean</span>
        <span class="token function">parseBean</span><span class="token punctuation">(</span>rootElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">parseBean</span><span class="token punctuation">(</span><span class="token class-name">Element</span> rootElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">&gt;</span></span> elements <span class="token operator">=</span> rootElement<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element <span class="token operator">:</span> elements<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">// å°è£…Bean</span>
            <span class="token class-name">String</span> id <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> className <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BeanDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
            beanDefinition<span class="token punctuation">.</span><span class="token function">setClassName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Beanä¸‹æ‰€æœ‰property</span>
            <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Element</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">elements</span><span class="token punctuation">(</span><span class="token string">&quot;property&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">MultiPropertyValue</span> propertyValues <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MultiPropertyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Element</span> element1 <span class="token operator">:</span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> name <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> ref <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;ref&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> value <span class="token operator">=</span> element1<span class="token punctuation">.</span><span class="token function">attributeValue</span><span class="token punctuation">(</span><span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// å°è£…PropertyValue</span>
                <span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">PropertyValue</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> ref<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                propertyValues<span class="token punctuation">.</span><span class="token function">addPropertyValue</span><span class="token punctuation">(</span>propertyValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            beanDefinition<span class="token punctuation">.</span><span class="token function">setMultiPropertyValue</span><span class="token punctuation">(</span>propertyValues<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// æ³¨å†ŒBeanåˆ°æ³¨å†Œè¡¨</span>
            registry<span class="token punctuation">.</span><span class="token function">registerBeanDefinition</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span>beanDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="iocå®¹å™¨"><a href="#iocå®¹å™¨" class="header-anchor">#</a> IOCå®¹å™¨</h3> <h4 id="beanfactoryæ¥å£"><a href="#beanfactoryæ¥å£" class="header-anchor">#</a> BeanFactoryæ¥å£</h4> <blockquote><p>æ–¹æ³•ï¼šè·å–beanå¯¹è±¡</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//æ ¹æ®beanå¯¹è±¡çš„åç§°è·å–beanå¯¹è±¡</span>
    <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
	<span class="token comment">//æ ¹æ®beanå¯¹è±¡çš„åç§°è·å–beanå¯¹è±¡ï¼Œå¹¶è¿›è¡Œç±»å‹è½¬æ¢</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span> <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> clazz<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="applicationcontextæ¥å£"><a href="#applicationcontextæ¥å£" class="header-anchor">#</a> ApplicationContextæ¥å£</h4> <blockquote><p>æ–¹æ³•ï¼š</p> <ul><li>éå»¶æ—¶refresh()
<ul><li>è°ƒç”¨è§£æå™¨</li> <li>æ³¨å†Œè¡¨é‡Œå¯¹beanåˆå§‹åŒ–</li></ul></li></ul></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>
	<span class="token comment">//è¿›è¡Œé…ç½®æ–‡ä»¶åŠ è½½å¹¶è¿›è¡Œå¯¹è±¡åˆ›å»º</span>
    <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="abstractapplicationcontext"><a href="#abstractapplicationcontext" class="header-anchor">#</a> AbstractApplicationContext</h4> <blockquote><p>å®ç°æ¥å£</p> <ul><li>å£°æ˜BeanDefinitionReaderï¼Œå…·ä½“å®ç°äº¤ç»™å­ç±»</li> <li>å£°æ˜Mapï¼šé˜²æ­¢å‡ºç°æ–°çš„Beanï¼Œå‡ºç°åˆ™æ·»åŠ åˆ°æ³¨å†Œè¡¨</li></ul> <p>æ³¨æ„ï¼š<code>getBean</code>ä½¿ç”¨æ¨¡æ¿æ¨¡å¼</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractApplicationContext</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContext</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token class-name">BeanDefinitionReader</span> beanDefinitionReader<span class="token punctuation">;</span>
    <span class="token comment">//ç”¨æ¥å­˜å‚¨beanå¯¹è±¡çš„å®¹å™¨   keyå­˜å‚¨çš„æ˜¯beançš„idå€¼ï¼Œvalueå­˜å‚¨çš„æ˜¯beanå¯¹è±¡</span>
    <span class="token keyword">protected</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> singletonObjects <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//å­˜å‚¨é…ç½®æ–‡ä»¶çš„è·¯å¾„</span>
    <span class="token keyword">protected</span> <span class="token class-name">String</span> configLocation<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">,</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//åŠ è½½BeanDefinition</span>
        beanDefinitionReader<span class="token punctuation">.</span><span class="token function">loadBeanDefinitions</span><span class="token punctuation">(</span>configLocation<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//åˆå§‹åŒ–bean</span>
        <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//beançš„åˆå§‹åŒ–</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">finishBeanInitialization</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> beanNames <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinitionNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> beanName <span class="token operator">:</span> beanNames<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">getBean</span><span class="token punctuation">(</span>beanName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="classpathxmlapplicationcontext"><a href="#classpathxmlapplicationcontext" class="header-anchor">#</a> ClassPathXmlApplicationContext</h4> <blockquote><p>ç±»è·¯å¾„çš„é…ç½®ï¼Œç»§æ‰¿<code>AbstractApplicationContext</code></p> <ul><li>æ„é€ æ–¹æ³•ï¼š
<ul><li>å®Œæˆ<code>BeanDefinitionReader</code>å…·ä½“å­ç±»åˆ›å»º</li> <li>è°ƒç”¨refresh()</li> <li>é‡å†™çˆ¶æ¥å£çš„getBean()ï¼Œå®ç°ä¾èµ–æ³¨å…¥</li></ul></li></ul></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ClassPathXmlApplicationContext</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractApplicationContext</span><span class="token punctuation">{</span>

    <span class="token comment">// åˆå§‹åŒ–çˆ¶ç±»</span>
    <span class="token keyword">public</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">String</span> configuration<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>configuration<span class="token operator">=</span>configuration<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>beanDefinitionReader<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XmlBeanDefinitionReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">NoSuchMethodException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 1ã€å­˜åœ¨Bean</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 2ã€ä¸å­˜åœ¨Beanï¼Œä»æ³¨å†Œè¡¨è·å–</span>
        <span class="token class-name">BeanDefinitionRegistry</span> registry <span class="token operator">=</span> beanDefinitionReader<span class="token punctuation">.</span><span class="token function">getRegistry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">BeanDefinition</span> beanDefinition <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">getBeanDefinition</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2.1ã€æ³¨å†Œè¡¨æ²¡æœ‰ï¼Œè¿”å›ç©º</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>beanDefinition <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 2.2ã€æ³¨å†Œè¡¨æœ‰</span>
        <span class="token class-name">String</span> className <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getClassName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// åå°„åˆ›å»ºå¯¹è±¡(Bean)</span>
        <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> aClass <span class="token operator">=</span> <span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token function">forName</span><span class="token punctuation">(</span>className<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> beanObj <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">newInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// è¿›è¡Œä¾èµ–æ³¨å…¥(å³prepertyå±æ€§é‡Œçš„nameã€refã€valueï¼‰</span>
        <span class="token class-name">MultiPropertyValue</span> propertyValues <span class="token operator">=</span> beanDefinition<span class="token punctuation">.</span><span class="token function">getMultiPropertyValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">PropertyValue</span> propertyValue <span class="token operator">:</span> propertyValues<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">String</span> propertyName <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// valueå’Œrefåªèƒ½æœ‰ä¸€ä¸ª</span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> ref <span class="token operator">=</span> propertyValue<span class="token punctuation">.</span><span class="token function">getRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// refï¼šæ–¹æ³•</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>ref <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Object</span> bean <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>ref<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span><span class="token punctuation">[</span><span class="token punctuation">]</span> methods <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">getMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Method</span> method <span class="token operator">:</span> methods<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>methodName<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// valueï¼šå€¼</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token string">&quot;&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">String</span> methodName <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">getSetterMethodNameByFieldName</span><span class="token punctuation">(</span>propertyName<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Method</span> method <span class="token operator">=</span> aClass<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>beanObj<span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> beanObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ClassNotFoundException</span><span class="token punctuation">,</span> <span class="token class-name">InstantiationException</span><span class="token punctuation">,</span> <span class="token class-name">IllegalAccessException</span><span class="token punctuation">,</span> <span class="token class-name">InvocationTargetException</span><span class="token punctuation">,</span> <span class="token class-name">NoSuchMethodException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token function">getBean</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> requiredType<span class="token punctuation">.</span><span class="token function">cast</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="header-anchor">#</a> æ€»ç»“</h3> <ul><li>è®¾è®¡æ¨¡å¼
<ul><li><code>å·¥å‚</code>æ¨¡å¼+é…ç½®æ–‡ä»¶</li> <li><code>å•ä¾‹</code>æ¨¡å¼ï¼šbeanå¯¹è±¡éƒ½æ˜¯å•ä¾‹ï¼Œæ¯ä¸€ä¸ªbeanåªåˆ›å»ºä¸€ä¸ªå¯¹è±¡</li> <li><code>æ¨¡æ¿</code>æ¨¡å¼ï¼šgetBean()ï¼Œå¾…å®šçš„æ–¹æ³•ç•™ç»™å­ç±»å®ç°</li> <li><code>è¿­ä»£å™¨</code>æ¨¡å¼ï¼šMutilPropertyValues</li> <li>springå®é™…æ¡†æ¶ä½¿ç”¨å¾ˆå¤šè®¾è®¡æ¨¡å¼
<ul><li>AOPï¼šä»£ç†æ¨¡å¼</li> <li>é€‰æ‹©JDKä»£ç†è¿˜æ˜¯CGLIBä½¿ç”¨ï¼šç­–ç•¥æ¨¡å¼</li> <li>é€‚é…å™¨æ¨¡å¼</li> <li>è£…é¥°è€…æ¨¡å¼</li> <li>è§‚å¯Ÿè€…æ¨¡å¼</li></ul></li></ul></li> <li>ç¬¦åˆå¤§éƒ¨åˆ†è®¾è®¡æ¨¡å¼</li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/learn-vuepress/computer/jiwang.html">
            è®¡ç®—æœºç½‘ç»œ
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#åˆ†ç±»" class="sidebar-link reco-side-åˆ†ç±»" data-v-cb1513f6>åˆ†ç±»</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç±»å›¾" class="sidebar-link reco-side-ç±»å›¾" data-v-cb1513f6>ç±»å›¾</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç±»å›¾è¡¨ç¤º" class="sidebar-link reco-side-ç±»å›¾è¡¨ç¤º" data-v-cb1513f6>ç±»å›¾è¡¨ç¤º</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç±»ä¸ç±»çš„å…³ç³»" class="sidebar-link reco-side-ç±»ä¸ç±»çš„å…³ç³»" data-v-cb1513f6>ç±»ä¸ç±»çš„å…³ç³»</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å…³è”å…³ç³»" class="sidebar-link reco-side-å…³è”å…³ç³»" data-v-cb1513f6>å…³è”å…³ç³»</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#èšåˆå…³ç³»" class="sidebar-link reco-side-èšåˆå…³ç³»" data-v-cb1513f6>èšåˆå…³ç³»</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»„åˆå…³ç³»" class="sidebar-link reco-side-ç»„åˆå…³ç³»" data-v-cb1513f6>ç»„åˆå…³ç³»</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¾èµ–å…³ç³»" class="sidebar-link reco-side-ä¾èµ–å…³ç³»" data-v-cb1513f6>ä¾èµ–å…³ç³»</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»§æ‰¿å…³ç³»" class="sidebar-link reco-side-ç»§æ‰¿å…³ç³»" data-v-cb1513f6>ç»§æ‰¿å…³ç³»</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å®ç°å…³ç³»" class="sidebar-link reco-side-å®ç°å…³ç³»" data-v-cb1513f6>å®ç°å…³ç³»</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å¼€é—­" class="sidebar-link reco-side-å¼€é—­" data-v-cb1513f6>å¼€é—­</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#é‡Œæ°æ›¿æ¢" class="sidebar-link reco-side-é‡Œæ°æ›¿æ¢" data-v-cb1513f6>é‡Œæ°æ›¿æ¢</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¾èµ–å€’è½¬" class="sidebar-link reco-side-ä¾èµ–å€’è½¬" data-v-cb1513f6>ä¾èµ–å€’è½¬</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¥å£éš”ç¦»" class="sidebar-link reco-side-æ¥å£éš”ç¦»" data-v-cb1513f6>æ¥å£éš”ç¦»</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#è¿ªç±³ç‰¹" class="sidebar-link reco-side-è¿ªç±³ç‰¹" data-v-cb1513f6>è¿ªç±³ç‰¹</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#åˆæˆå¤ç”¨" class="sidebar-link reco-side-åˆæˆå¤ç”¨" data-v-cb1513f6>åˆæˆå¤ç”¨</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å•ä¾‹" class="sidebar-link reco-side-å•ä¾‹" data-v-cb1513f6>å•ä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å®ç°" class="sidebar-link reco-side-å®ç°" data-v-cb1513f6>å®ç°</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#é—®é¢˜" class="sidebar-link reco-side-é—®é¢˜" data-v-cb1513f6>é—®é¢˜</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#è§£å†³" class="sidebar-link reco-side-è§£å†³" data-v-cb1513f6>è§£å†³</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹" class="sidebar-link reco-side-æ¡ˆä¾‹" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å·¥å‚" class="sidebar-link reco-side-å·¥å‚" data-v-cb1513f6>å·¥å‚</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç®€å•å·¥å‚" class="sidebar-link reco-side-ç®€å•å·¥å‚" data-v-cb1513f6>ç®€å•å·¥å‚</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å·¥å‚æ–¹æ³•" class="sidebar-link reco-side-å·¥å‚æ–¹æ³•" data-v-cb1513f6>å·¥å‚æ–¹æ³•</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æŠ½è±¡å·¥å‚" class="sidebar-link reco-side-æŠ½è±¡å·¥å‚" data-v-cb1513f6>æŠ½è±¡å·¥å‚</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å¸¸ç”¨å·¥å‚" class="sidebar-link reco-side-å¸¸ç”¨å·¥å‚" data-v-cb1513f6>å¸¸ç”¨å·¥å‚</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-2" class="sidebar-link reco-side-æ¡ˆä¾‹-2" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#åŸå‹" class="sidebar-link reco-side-åŸå‹" data-v-cb1513f6>åŸå‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-4" class="sidebar-link reco-side-ç»“æ„-4" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å®ç°-2" class="sidebar-link reco-side-å®ç°-2" data-v-cb1513f6>å®ç°</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-3" class="sidebar-link reco-side-æ¡ˆä¾‹-3" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æµ…å…‹éš†-æ·±å…‹éš†" class="sidebar-link reco-side-æµ…å…‹éš†-æ·±å…‹éš†" data-v-cb1513f6>æµ…å…‹éš†-&gt;æ·±å…‹éš†</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å»ºé€ è€…" class="sidebar-link reco-side-å»ºé€ è€…" data-v-cb1513f6>å»ºé€ è€…</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-5" class="sidebar-link reco-side-ç»“æ„-5" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-4" class="sidebar-link reco-side-æ¡ˆä¾‹-4" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹-3" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹-3" data-v-cb1513f6>ä¼˜ç¼ºç‚¹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ‰©å±•" class="sidebar-link reco-side-æ‰©å±•" data-v-cb1513f6>æ‰©å±•</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#åˆ›å»ºè€…æ¨¡å¼å¯¹æ¯”" class="sidebar-link reco-side-åˆ›å»ºè€…æ¨¡å¼å¯¹æ¯”" data-v-cb1513f6>åˆ›å»ºè€…æ¨¡å¼å¯¹æ¯”</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å·¥å‚æ–¹æ³•vså»ºé€ è€…" class="sidebar-link reco-side-å·¥å‚æ–¹æ³•vså»ºé€ è€…" data-v-cb1513f6>å·¥å‚æ–¹æ³•VSå»ºé€ è€…</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æŠ½è±¡å·¥å‚vså»ºé€ è€…" class="sidebar-link reco-side-æŠ½è±¡å·¥å‚vså»ºé€ è€…" data-v-cb1513f6>æŠ½è±¡å·¥å‚VSå»ºé€ è€…</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä»£ç†" class="sidebar-link reco-side-ä»£ç†" data-v-cb1513f6>ä»£ç†</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-6" class="sidebar-link reco-side-ç»“æ„-6" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#é™æ€ä»£ç†" class="sidebar-link reco-side-é™æ€ä»£ç†" data-v-cb1513f6>é™æ€ä»£ç†</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#jdkåŠ¨æ€ä»£ç†" class="sidebar-link reco-side-jdkåŠ¨æ€ä»£ç†" data-v-cb1513f6>JDKåŠ¨æ€ä»£ç†</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#cglibåŠ¨æ€ä»£ç†" class="sidebar-link reco-side-cglibåŠ¨æ€ä»£ç†" data-v-cb1513f6>CGLIBåŠ¨æ€ä»£ç†</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¸‰ç§ä»£ç†å¯¹æ¯”" class="sidebar-link reco-side-ä¸‰ç§ä»£ç†å¯¹æ¯”" data-v-cb1513f6>ä¸‰ç§ä»£ç†å¯¹æ¯”</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹-4" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹-4" data-v-cb1513f6>ä¼˜ç¼ºç‚¹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#åœºæ™¯" class="sidebar-link reco-side-åœºæ™¯" data-v-cb1513f6>åœºæ™¯</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#é€‚é…å™¨" class="sidebar-link reco-side-é€‚é…å™¨" data-v-cb1513f6>é€‚é…å™¨</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-7" class="sidebar-link reco-side-ç»“æ„-7" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç±»é€‚é…å™¨" class="sidebar-link reco-side-ç±»é€‚é…å™¨" data-v-cb1513f6>ç±»é€‚é…å™¨</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å¯¹è±¡é€‚é…å™¨" class="sidebar-link reco-side-å¯¹è±¡é€‚é…å™¨" data-v-cb1513f6>å¯¹è±¡é€‚é…å™¨</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#åœºæ™¯-2" class="sidebar-link reco-side-åœºæ™¯-2" data-v-cb1513f6>åœºæ™¯</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#jdkæºç è§£æ" class="sidebar-link reco-side-jdkæºç è§£æ" data-v-cb1513f6>JDKæºç è§£æ</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#è£…é¥°è€…" class="sidebar-link reco-side-è£…é¥°è€…" data-v-cb1513f6>è£…é¥°è€…</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-8" class="sidebar-link reco-side-ç»“æ„-8" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#åœºæ™¯-3" class="sidebar-link reco-side-åœºæ™¯-3" data-v-cb1513f6>åœºæ™¯</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#jdkæºç " class="sidebar-link reco-side-jdkæºç " data-v-cb1513f6>JDKæºç </a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#é™æ€ä»£ç†å’Œè£…é¥°è€…" class="sidebar-link reco-side-é™æ€ä»£ç†å’Œè£…é¥°è€…" data-v-cb1513f6>é™æ€ä»£ç†å’Œè£…é¥°è€…</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡¥æ¥" class="sidebar-link reco-side-æ¡¥æ¥" data-v-cb1513f6>æ¡¥æ¥</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-9" class="sidebar-link reco-side-ç»“æ„-9" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#åœºæ™¯-4" class="sidebar-link reco-side-åœºæ™¯-4" data-v-cb1513f6>åœºæ™¯</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å¤–è§‚" class="sidebar-link reco-side-å¤–è§‚" data-v-cb1513f6>å¤–è§‚</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-10" class="sidebar-link reco-side-ç»“æ„-10" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#åœºæ™¯-5" class="sidebar-link reco-side-åœºæ™¯-5" data-v-cb1513f6>åœºæ™¯</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æºç " class="sidebar-link reco-side-æºç " data-v-cb1513f6>æºç </a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»„åˆ" class="sidebar-link reco-side-ç»„åˆ" data-v-cb1513f6>ç»„åˆ</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-11" class="sidebar-link reco-side-ç»“æ„-11" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#åˆ†ç±»-2" class="sidebar-link reco-side-åˆ†ç±»-2" data-v-cb1513f6>åˆ†ç±»</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#åœºæ™¯-6" class="sidebar-link reco-side-åœºæ™¯-6" data-v-cb1513f6>åœºæ™¯</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#äº«å…ƒæ¨¡å¼" class="sidebar-link reco-side-äº«å…ƒæ¨¡å¼" data-v-cb1513f6>äº«å…ƒæ¨¡å¼</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-12" class="sidebar-link reco-side-ç»“æ„-12" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-5" class="sidebar-link reco-side-æ¡ˆä¾‹-5" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹å’Œåœºæ™¯" data-v-cb1513f6>ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æºç -2" class="sidebar-link reco-side-æºç -2" data-v-cb1513f6>æºç </a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¨¡æ¿æ–¹æ³•" class="sidebar-link reco-side-æ¨¡æ¿æ–¹æ³•" data-v-cb1513f6>æ¨¡æ¿æ–¹æ³•</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-13" class="sidebar-link reco-side-ç»“æ„-13" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-6" class="sidebar-link reco-side-æ¡ˆä¾‹-6" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-2" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-2" data-v-cb1513f6>ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æºç -3" class="sidebar-link reco-side-æºç -3" data-v-cb1513f6>æºç </a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç­–ç•¥" class="sidebar-link reco-side-ç­–ç•¥" data-v-cb1513f6>ç­–ç•¥</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-14" class="sidebar-link reco-side-ç»“æ„-14" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-7" class="sidebar-link reco-side-æ¡ˆä¾‹-7" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-3" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-3" data-v-cb1513f6>ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æºç -4" class="sidebar-link reco-side-æºç -4" data-v-cb1513f6>æºç </a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å‘½ä»¤" class="sidebar-link reco-side-å‘½ä»¤" data-v-cb1513f6>å‘½ä»¤</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-15" class="sidebar-link reco-side-ç»“æ„-15" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-8" class="sidebar-link reco-side-æ¡ˆä¾‹-8" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-4" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-4" data-v-cb1513f6>ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æºç -5" class="sidebar-link reco-side-æºç -5" data-v-cb1513f6>æºç </a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#èŒè´£é“¾" class="sidebar-link reco-side-èŒè´£é“¾" data-v-cb1513f6>èŒè´£é“¾</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-16" class="sidebar-link reco-side-ç»“æ„-16" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-9" class="sidebar-link reco-side-æ¡ˆä¾‹-9" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹-5" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹-5" data-v-cb1513f6>ä¼˜ç¼ºç‚¹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æºç -6" class="sidebar-link reco-side-æºç -6" data-v-cb1513f6>æºç </a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#çŠ¶æ€" class="sidebar-link reco-side-çŠ¶æ€" data-v-cb1513f6>çŠ¶æ€</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-17" class="sidebar-link reco-side-ç»“æ„-17" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-10" class="sidebar-link reco-side-æ¡ˆä¾‹-10" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-5" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-5" data-v-cb1513f6>ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#è§‚å¯Ÿè€…" class="sidebar-link reco-side-è§‚å¯Ÿè€…" data-v-cb1513f6>è§‚å¯Ÿè€…</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-18" class="sidebar-link reco-side-ç»“æ„-18" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-11" class="sidebar-link reco-side-æ¡ˆä¾‹-11" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-6" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-6" data-v-cb1513f6>ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æºç -7" class="sidebar-link reco-side-æºç -7" data-v-cb1513f6>æºç </a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¸­ä»‹è€…" class="sidebar-link reco-side-ä¸­ä»‹è€…" data-v-cb1513f6>ä¸­ä»‹è€…</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-19" class="sidebar-link reco-side-ç»“æ„-19" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-12" class="sidebar-link reco-side-æ¡ˆä¾‹-12" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-7" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-7" data-v-cb1513f6>ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#è¿­ä»£å™¨" class="sidebar-link reco-side-è¿­ä»£å™¨" data-v-cb1513f6>è¿­ä»£å™¨</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-20" class="sidebar-link reco-side-ç»“æ„-20" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-13" class="sidebar-link reco-side-æ¡ˆä¾‹-13" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-8" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-8" data-v-cb1513f6>ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æºç -8" class="sidebar-link reco-side-æºç -8" data-v-cb1513f6>æºç </a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#è®¿é—®è€…" class="sidebar-link reco-side-è®¿é—®è€…" data-v-cb1513f6>è®¿é—®è€…</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-21" class="sidebar-link reco-side-ç»“æ„-21" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-14" class="sidebar-link reco-side-æ¡ˆä¾‹-14" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-9" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-9" data-v-cb1513f6>ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æºç -9" class="sidebar-link reco-side-æºç -9" data-v-cb1513f6>æºç </a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å¤‡å¿˜å½•" class="sidebar-link reco-side-å¤‡å¿˜å½•" data-v-cb1513f6>å¤‡å¿˜å½•</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-22" class="sidebar-link reco-side-ç»“æ„-22" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ¡ˆä¾‹-15" class="sidebar-link reco-side-æ¡ˆä¾‹-15" data-v-cb1513f6>æ¡ˆä¾‹</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-10" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-10" data-v-cb1513f6>ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#è§£é‡Šå™¨" class="sidebar-link reco-side-è§£é‡Šå™¨" data-v-cb1513f6>è§£é‡Šå™¨</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ç»“æ„-23" class="sidebar-link reco-side-ç»“æ„-23" data-v-cb1513f6>ç»“æ„</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-11" class="sidebar-link reco-side-ä¼˜ç¼ºç‚¹å’Œåœºæ™¯-11" data-v-cb1513f6>ä¼˜ç¼ºç‚¹å’Œåœºæ™¯</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å›é¡¾" class="sidebar-link reco-side-å›é¡¾" data-v-cb1513f6>å›é¡¾</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ ¸å¿ƒåŠŸèƒ½" class="sidebar-link reco-side-æ ¸å¿ƒåŠŸèƒ½" data-v-cb1513f6>æ ¸å¿ƒåŠŸèƒ½</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#bean" class="sidebar-link reco-side-bean" data-v-cb1513f6>Bean</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#springiocæ¥å£" class="sidebar-link reco-side-springiocæ¥å£" data-v-cb1513f6>SpringIOCæ¥å£</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#beanfactory" class="sidebar-link reco-side-beanfactory" data-v-cb1513f6>BeanFactory</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#beandefiniton" class="sidebar-link reco-side-beandefiniton" data-v-cb1513f6>BeanDefiniton</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#beandefinitionreader" class="sidebar-link reco-side-beandefinitionreader" data-v-cb1513f6>BeanDefinitionReader</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#beandefinitonregistry" class="sidebar-link reco-side-beandefinitonregistry" data-v-cb1513f6>BeanDefinitonRegistry</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#å®¹å™¨" class="sidebar-link reco-side-å®¹å™¨" data-v-cb1513f6>å®¹å™¨</a></li><li class="level-2" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#è‡ªå®šä¹‰springioc" class="sidebar-link reco-side-è‡ªå®šä¹‰springioc" data-v-cb1513f6>è‡ªå®šä¹‰SpringIOC</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#pojo" class="sidebar-link reco-side-pojo" data-v-cb1513f6>pojo</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ³¨å†Œè¡¨" class="sidebar-link reco-side-æ³¨å†Œè¡¨" data-v-cb1513f6>æ³¨å†Œè¡¨</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#è§£æå™¨" class="sidebar-link reco-side-è§£æå™¨" data-v-cb1513f6>è§£æå™¨</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#iocå®¹å™¨" class="sidebar-link reco-side-iocå®¹å™¨" data-v-cb1513f6>IOCå®¹å™¨</a></li><li class="level-3" data-v-cb1513f6><a href="/learn-vuepress/computer/design.html#æ€»ç»“-2" class="sidebar-link reco-side-æ€»ç»“-2" data-v-cb1513f6>æ€»ç»“</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/learn-vuepress/assets/js/app.58b32b08.js" defer></script><script src="/learn-vuepress/assets/js/6.0c5ddd61.js" defer></script><script src="/learn-vuepress/assets/js/1.a3f35cab.js" defer></script><script src="/learn-vuepress/assets/js/15.cf43ae37.js" defer></script>
  </body>
</html>
